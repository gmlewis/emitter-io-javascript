var emitter=(require=function n(i,o,s){function a(t,e){if(!o[t]){if(!i[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}r=o[t]={exports:{}},i[t][0].call(r.exports,function(e){return a(i[t][1][e]||e)},r,r.exports,n,i,o,s)}return o[t].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(e,t,r){"use strict";r.byteLength=function(e){var e=c(e),t=e[0],e=e[1];return 3*(t+e)/4-e},r.toByteArray=function(e){var t,r,n=c(e),i=n[0],n=n[1],o=new u(function(e,t){return 3*(e+t)/4-t}(i,n)),s=0,a=0<n?i-4:i;for(r=0;r<a;r+=4)t=l[e.charCodeAt(r)]<<18|l[e.charCodeAt(r+1)]<<12|l[e.charCodeAt(r+2)]<<6|l[e.charCodeAt(r+3)],o[s++]=t>>16&255,o[s++]=t>>8&255,o[s++]=255&t;2===n&&(t=l[e.charCodeAt(r)]<<2|l[e.charCodeAt(r+1)]>>4,o[s++]=255&t);1===n&&(t=l[e.charCodeAt(r)]<<10|l[e.charCodeAt(r+1)]<<4|l[e.charCodeAt(r+2)]>>2,o[s++]=t>>8&255,o[s++]=255&t);return o},r.fromByteArray=function(e){for(var t,r=e.length,n=r%3,i=[],o=0,s=r-n;o<s;o+=16383)i.push(function(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(function(e){return a[e>>18&63]+a[e>>12&63]+a[e>>6&63]+a[63&e]}(n));return i.join("")}(e,o,s<o+16383?s:o+16383));1==n?(t=e[r-1],i.push(a[t>>2]+a[t<<4&63]+"==")):2==n&&(t=(e[r-2]<<8)+e[r-1],i.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"="));return i.join("")};for(var a=[],l=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=n.length;i<o;++i)a[i]=n[i],l[n.charCodeAt(i)]=i;function c(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("="),t=(e=-1===e?t:e)===t?0:4-e%4;return[e,t]}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},{}],2:[function(e,t,r){"use strict";const h=e("buffer")["Buffer"],n=Symbol.for("BufferList");function i(e){if(!(this instanceof i))return new i(e);i._init.call(this,e)}i._init=function(e){Object.defineProperty(this,n,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},i.prototype._new=function(e){return new i(e)},i.prototype._offset=function(t){if(0===t)return[0,0];let r=0;for(let e=0;e<this._bufs.length;e++){var n=r+this._bufs[e].length;if(t<n||e===this._bufs.length-1)return[e,t-r];r=n}},i.prototype._reverseOffset=function(e){var t=e[0];let r=e[1];for(let e=0;e<t;e++)r+=this._bufs[e].length;return r},i.prototype.get=function(e){if(!(e>this.length||e<0))return e=this._offset(e),this._bufs[e[0]][e[1]]},i.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},i.prototype.copy=function(t,e,r,n){if(("number"!=typeof n||n>this.length)&&(n=this.length),(r="number"!=typeof r||r<0?0:r)>=this.length)return t||h.alloc(0);if(n<=0)return t||h.alloc(0);var i=!!t,o=this._offset(r),s=n-r;let a=s,l=i&&e||0,u=o[1];if(0===r&&n===this.length){if(!i)return 1===this._bufs.length?this._bufs[0]:h.concat(this._bufs,this.length);for(let e=0;e<this._bufs.length;e++)this._bufs[e].copy(t,l),l+=this._bufs[e].length;return t}if(a<=this._bufs[o[0]].length-u)return i?this._bufs[o[0]].copy(t,e,u,u+a):this._bufs[o[0]].slice(u,u+a);i||(t=h.allocUnsafe(s));for(let e=o[0];e<this._bufs.length;e++){var c=this._bufs[e].length-u;if(!(a>c)){this._bufs[e].copy(t,l,u,u+a),l+=c;break}this._bufs[e].copy(t,l,u),l+=c,a-=c,u=u&&0}return t.length>l?t.slice(0,l):t},i.prototype.shallowSlice=function(e,t){if(t="number"!=typeof t?this.length:t,(e=e||0)<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();e=this._offset(e),t=this._offset(t);const r=this._bufs.slice(e[0],t[0]+1);return 0===t[1]?r.pop():r[r.length-1]=r[r.length-1].slice(0,t[1]),0!==e[1]&&(r[0]=r[0].slice(e[1])),this._new(r)},i.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},i.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},i.prototype.duplicate=function(){const t=this._new();for(let e=0;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},i.prototype.append=function(t){if(null==t)return this;if(t.buffer)this._appendBuffer(h.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t))for(let e=0;e<t.length;e++)this.append(t[e]);else if(this._isBufferList(t))for(let e=0;e<t._bufs.length;e++)this.append(t._bufs[e]);else"number"==typeof t&&(t=t.toString()),this._appendBuffer(h.from(t));return this},i.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},i.prototype.indexOf=function(e,t,r){if(void 0===r&&"string"==typeof t&&(r=t,t=void 0),"function"==typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof e?e=h.from([e]):"string"==typeof e?e=h.from(e,r):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=h.from(e.buffer,e.byteOffset,e.byteLength):h.isBuffer(e)||(e=h.from(e)),t=Number(t||0),(t=(t=isNaN(t)?0:t)<0?this.length+t:t)<0&&(t=0),0===e.length)return t>this.length?this.length:t;r=this._offset(t);let n=r[0],i=r[1];for(;n<this._bufs.length;n++){const s=this._bufs[n];for(;i<s.length;)if(s.length-i>=e.length){var o=s.indexOf(e,i);if(-1!==o)return this._reverseOffset([n,o]);i=s.length-e.length+1}else{o=this._reverseOffset([n,i]);if(this._match(o,e))return o;i++}i=0}return-1},i.prototype._match=function(t,r){if(this.length-t<r.length)return!1;for(let e=0;e<r.length;e++)if(this.get(t+e)!==r[e])return!1;return!0};{const o={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const s in o)!function(r){null===o[r]?i.prototype[r]=function(e,t){return this.slice(e,e+t)[r](0,t)}:i.prototype[r]=function(e=0){return this.slice(e,e+o[r])[r](0)}}(s)}i.prototype._isBufferList=function(e){return e instanceof i||i.isBufferList(e)},i.isBufferList=function(e){return null!=e&&e[n]},t.exports=i},{buffer:5}],3:[function(e,t,r){"use strict";const n=e("readable-stream").Duplex,i=e("inherits"),o=e("./BufferList");function s(e){if(!(this instanceof s))return new s(e);if("function"==typeof e){this._callback=e;const t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)}),e=null}o._init.call(this,e),n.call(this)}i(s,n),Object.assign(s.prototype,o.prototype),s.prototype._new=function(e){return new s(e)},s.prototype._write=function(e,t,r){this._appendBuffer(e),"function"==typeof r&&r()},s.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},s.prototype.end=function(e){n.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},s.prototype._isBufferList=function(e){return e instanceof s||e instanceof o||s.isBufferList(e)},s.isBufferList=o.isBufferList,t.exports=s,t.exports.BufferListStream=s,t.exports.BufferList=o},{"./BufferList":2,inherits:12,"readable-stream":69}],4:[function(e,t,r){},{}],5:[function(P,e,R){!function(e){!function(){"use strict";var E=P("base64-js"),o=P("ieee754"),t=(R.Buffer=h,R.SlowBuffer=function(e){+e!=e&&(e=0);return h.alloc(+e)},R.INSPECT_MAX_BYTES=50,2147483647);function l(e){if(t<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return e.__proto__=h.prototype,e}function h(e,t,r){if("number"!=typeof e)return n(e,t,r);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return s(e)}function n(e,t,r){if("string"==typeof e){var n=e,i=t;if(!h.isEncoding(i="string"==typeof i&&""!==i?i:"utf8"))throw new TypeError("Unknown encoding: "+i);var o=0|f(n,i),s=l(o);return s=(n=s.write(n,i))!==o?s.slice(0,n):s}if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(I(e,ArrayBuffer)||e&&I(e.buffer,ArrayBuffer)){i=e,o=t,n=r;if(o<0||i.byteLength<o)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<o+(n||0))throw new RangeError('"length" is outside of buffer bounds');return(i=void 0===o&&void 0===n?new Uint8Array(i):void 0===n?new Uint8Array(i,o):new Uint8Array(i,o,n)).__proto__=h.prototype,i}if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');s=e.valueOf&&e.valueOf();if(null!=s&&s!==e)return h.from(s,t,r);var a=function(e){{var t,r;if(h.isBuffer(e))return t=0|c(e.length),0===(r=l(t)).length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||O(e.length)?l(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return h.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function i(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function s(e){return i(e),l(e<0?0:0|c(e))}function u(e){for(var t=e.length<0?0:0|c(e.length),r=l(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function c(e){if(t<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|e}function f(e,t){if(h.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||I(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return T(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return x(e).length;default:if(i)return n?-1:T(e).length;t=(""+t).toLowerCase(),i=!0}}function r(e,t,r){var n,i=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var o=this,s=t,a=r,l=o.length;(!a||a<0||l<a)&&(a=l);for(var u="",c=s=!s||s<0?0:s;c<a;++c)u+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(o[c]);return u;case"utf8":case"utf-8":return C(this,t,r);case"ascii":var h=this,l=t,f=r,p="";f=Math.min(h.length,f);for(var d=l;d<f;++d)p+=String.fromCharCode(127&h[d]);return p;case"latin1":case"binary":var y=this,s=t,g=r,b="";g=Math.min(y.length,g);for(var m=s;m<g;++m)b+=String.fromCharCode(y[m]);return b;case"base64":return v=this,n=r,0===(w=t)&&n===v.length?E.fromByteArray(v):E.fromByteArray(v.slice(w,n));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var v=t,w=r,_=this.slice(v,w),k="",S=0;S<_.length;S+=2)k+=String.fromCharCode(_[S]+256*_[S+1]);return k;default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function a(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function p(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=O(r=+r)?i?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=h.from(t,n)),h.isBuffer(t))return 0===t.length?-1:d(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):d(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function d(e,t,r,n,i){var o=1,s=e.length,a=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s/=o=2,a/=2,r/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i)for(var u=-1,c=r;c<s;c++)if(l(e,c)===l(t,-1===u?0:c-u)){if(c-(u=-1===u?c:u)+1===a)return u*o}else-1!==u&&(c-=c-u),u=-1;else for(c=r=s<r+a?s-a:r;0<=c;c--){for(var h=!0,f=0;f<a;f++)if(l(e,c+f)!==l(t,f)){h=!1;break}if(h)return c}return-1}function g(e,t,r,n){return A(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function b(e,t,r,n){return A(function(e,t){for(var r,n,i=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,n=n%256,i.push(n),i.push(r);return i}(t,e.length-r),e,r,n)}function C(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,a,l,u=e[i],c=null,h=239<u?4:223<u?3:191<u?2:1;if(i+h<=r)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[i+1]))&&127<(l=(31&u)<<6|63&o)&&(c=l);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&2047<(l=(15&u)<<12|(63&o)<<6|63&s)&&(l<55296||57343<l)&&(c=l);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(l=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)&&l<1114112&&(c=l)}null===c?(c=65533,h=1):65535<c&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}var f=n,p=f.length;if(p<=m)return String.fromCharCode.apply(String,f);for(var d="",y=0;y<p;)d+=String.fromCharCode.apply(String,f.slice(y,y+=m));return d}R.kMaxLength=t,h.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=n,h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,h.alloc=function(e,t,r){return t=t,r=r,i(e=e),!(e<=0)&&void 0!==t?"string"==typeof r?l(e).fill(t,r):l(e).fill(t):l(e)},h.allocUnsafe=s,h.allocUnsafeSlow=s,h.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==h.prototype},h.compare=function(e,t){if(I(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),I(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(e)||!h.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return h.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var r=h.allocUnsafe(t),n=0,i=0;i<e.length;++i){var o=e[i];if(I(o,Uint8Array)&&(o=h.from(o)),!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,n),n+=o.length}return r},h.byteLength=f,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)a(this,t,t+1);return this},h.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)a(this,t,t+3),a(this,t+1,t+2);return this},h.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)a(this,t,t+7),a(this,t+1,t+6),a(this,t+2,t+5),a(this,t+3,t+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?C(this,0,e):r.apply(this,arguments)},h.prototype.equals=function(e){if(h.isBuffer(e))return this===e||0===h.compare(this,e);throw new TypeError("Argument must be a Buffer")},h.prototype.inspect=function(){var e="",t=R.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},h.prototype.compare=function(e,t,r,n,i){if(I(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),(t=void 0===t?0:t)<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=t)return 0;if(i<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(o,s),l=this.slice(n,i),u=e.slice(t,r),c=0;c<a;++c)if(l[c]!==u[c]){o=l[c],s=u[c];break}return o<s?-1:s<o?1:0},h.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},h.prototype.indexOf=function(e,t,r){return p(this,e,t,r,!0)},h.prototype.lastIndexOf=function(e,t,r){return p(this,e,t,r,!1)},h.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||i<r)&&(r=i),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var o,s,a,l=!1;;)switch(n){case"hex":var u=this,c=e,h=t,f=r,p=(h=Number(h)||0,u.length-h);(!f||p<(f=Number(f)))&&(f=p),(p=c.length)/2<f&&(f=p/2);for(var d=0;d<f;++d){var y=parseInt(c.substr(2*d,2),16);if(O(y))return d;u[h+d]=y}return d;case"utf8":case"utf-8":return p=t,a=r,A(T(e,(s=this).length-p),s,p,a);case"ascii":return g(this,e,t,r);case"latin1":case"binary":return g(this,e,t,r);case"base64":return s=this,a=t,o=r,A(x(e),s,a,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,r);default:if(l)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),l=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var m=4096;function y(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function v(e,t,r,n,i,o){if(!h.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function w(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function _(e,t,r,n,i){return t=+t,r>>>=0,i||w(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function k(e,t,r,n,i){return t=+t,r>>>=0,i||w(e,0,r,8),o.write(e,t,r,n,52,8),r+8}h.prototype.slice=function(e,t){var r=this.length,r=((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),this.subarray(e,t));return r.__proto__=h.prototype,r},h.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||y(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},h.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||y(e,t,this.length);for(var n=this[e+--t],i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},h.prototype.readUInt8=function(e,t){return e>>>=0,t||y(e,1,this.length),this[e]},h.prototype.readUInt16LE=function(e,t){return e>>>=0,t||y(e,2,this.length),this[e]|this[e+1]<<8},h.prototype.readUInt16BE=function(e,t){return e>>>=0,t||y(e,2,this.length),this[e]<<8|this[e+1]},h.prototype.readUInt32LE=function(e,t){return e>>>=0,t||y(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},h.prototype.readUInt32BE=function(e,t){return e>>>=0,t||y(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},h.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||y(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*t)),n},h.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||y(e,t,this.length);for(var n=t,i=1,o=this[e+--n];0<n&&(i*=256);)o+=this[e+--n]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},h.prototype.readInt8=function(e,t){return e>>>=0,t||y(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},h.prototype.readInt16LE=function(e,t){e>>>=0,t||y(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},h.prototype.readInt16BE=function(e,t){e>>>=0,t||y(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},h.prototype.readInt32LE=function(e,t){return e>>>=0,t||y(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},h.prototype.readInt32BE=function(e,t){return e>>>=0,t||y(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},h.prototype.readFloatLE=function(e,t){return e>>>=0,t||y(e,4,this.length),o.read(this,e,!0,23,4)},h.prototype.readFloatBE=function(e,t){return e>>>=0,t||y(e,4,this.length),o.read(this,e,!1,23,4)},h.prototype.readDoubleLE=function(e,t){return e>>>=0,t||y(e,8,this.length),o.read(this,e,!0,52,8)},h.prototype.readDoubleBE=function(e,t){return e>>>=0,t||y(e,8,this.length),o.read(this,e,!1,52,8)},h.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||v(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},h.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||v(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+r},h.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,1,255,0),this[t]=255&e,t+1},h.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},h.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeIntLE=function(e,t,r,n){e=+e,t>>>=0,n||v(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},h.prototype.writeIntBE=function(e,t,r,n){e=+e,t>>>=0,n||v(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=r-1,o=1,s=0;for(this[t+i]=255&e;0<=--i&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},h.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},h.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},h.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeFloatLE=function(e,t,r){return _(this,e,t,!0,r)},h.prototype.writeFloatBE=function(e,t,r){return _(this,e,t,!1,r)},h.prototype.writeDoubleLE=function(e,t,r){return k(this,e,t,!0,r)},h.prototype.writeDoubleBE=function(e,t,r){return k(this,e,t,!1,r)},h.prototype.copy=function(e,t,r,n){if(!h.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var i=(n=e.length-t<n-r?e.length-t+r:n)-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var o=i-1;0<=o;--o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return i},h.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var i;1===e.length&&(i=e.charCodeAt(0),("utf8"===n&&i<128||"latin1"===n)&&(e=i))}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(o=t;o<r;++o)this[o]=e;else{var s=h.isBuffer(e)?e:h.from(e,n),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=s[o%a]}return this};var S=/[^+/0-9A-Za-z-_]/g;function T(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],s=0;s<n;++s){if(55295<(r=e.charCodeAt(s))&&r<57344){if(!i){if(56319<r){-1<(t-=3)&&o.push(239,191,189);continue}if(s+1===n){-1<(t-=3)&&o.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(t-=3)&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,r<128){if(--t<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function x(e){return E.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(S,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function A(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function I(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function O(e){return e!=e}}.call(this)}.call(this,P("buffer").Buffer)},{"base64-js":1,buffer:5,ieee754:11}],6:[function(r,i,n){!function(t){!function(){n.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+i.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");let t=0,r=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(t++,"%c"===e&&(r=t))}),e.splice(r,0,n)}},n.save=function(e){try{e?n.storage.setItem("debug",e):n.storage.removeItem("debug")}catch(e){}},n.load=function(){let e;try{e=n.storage.getItem("debug")}catch(e){}!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG);return e},n.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage=function(){try{return localStorage}catch(e){}}(),n.destroy=(()=>{let e=!1;return()=>{e=e||!0}})(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.log=console.debug||console.log||(()=>{}),i.exports=r("./common")(n);const e=i.exports["formatters"];e.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}.call(this)}.call(this,r("_process"))},{"./common":7,_process:50}],7:[function(e,t,r){t.exports=function(t){function l(e){let s,t=null,r,n;function a(...i){if(a.enabled){const o=a;var e=Number(new Date),t=e-(s||e);o.diff=t,o.prev=s,o.curr=e,s=e,i[0]=l.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");let n=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(e,t)=>{if("%%"===e)return"%";n++;const r=l.formatters[t];return"function"==typeof r&&(t=i[n],e=r.call(o,t),i.splice(n,1),n--),e}),l.formatArgs.call(o,i);const r=o.log||l.log;r.apply(o,i)}}return a.namespace=e,a.useColors=l.useColors(),a.color=l.selectColor(e),a.extend=i,a.destroy=l.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==t?t:(r!==l.namespaces&&(r=l.namespaces,n=l.enabled(e)),n),set:e=>{t=e}}),"function"==typeof l.init&&l.init(a),a}function i(e,t){const r=l(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return((l.debug=l).default=l).coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},l.disable=function(){var e=[...l.names.map(r),...l.skips.map(r).map(e=>"-"+e)].join(",");return l.enable(""),e},l.enable=function(e){l.save(e),l.namespaces=e,l.names=[],l.skips=[];let t;const r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(t=0;t<n;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?l.skips.push(new RegExp("^"+e.slice(1)+"$")):l.names.push(new RegExp("^"+e+"$")))},l.enabled=function(e){if("*"===e[e.length-1])return!0;let t,r;for(t=0,r=l.skips.length;t<r;t++)if(l.skips[t].test(e))return!1;for(t=0,r=l.names.length;t<r;t++)if(l.names[t].test(e))return!0;return!1},l.humanize=e("ms"),l.destroy=function(){},Object.keys(t).forEach(e=>{l[e]=t[e]}),l.names=[],l.skips=[],l.formatters={},l.selectColor=function(t){let r=0;for(let e=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;return l.colors[Math.abs(r)%l.colors.length]},l.enable(l.load()),l}},{ms:45}],8:[function(h,f,e){!function(c,r){!function(){function i(e,t){e._corked?e.once("uncork",t):t()}function o(r,n){return function(e){var t;e?(t=r,e="premature close"===e.message?null:e,t._autoDestroy&&t.destroy(e)):n&&!r._ended&&r.end()}}function n(){}function s(e,t,r){if(!(this instanceof s))return new s(e,t,r);a.Duplex.call(this,r),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!r||!1!==r.autoDestroy,this._forwardDestroy=!r||!1!==r.destroy,this._forwardEnd=!r||!1!==r.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,e&&this.setWritable(e),t&&this.setReadable(t)}var a=h("readable-stream"),l=h("end-of-stream"),e=h("inherits"),t=h("stream-shift"),u=r.from&&r.from!==Uint8Array.from?r.from([0]):new r([0]);e(s,a.Duplex),s.obj=function(e,t,r){return(r=r||{}).objectMode=!0,r.highWaterMark=16,new s(e,t,r)},s.prototype.cork=function(){1==++this._corked&&this.emit("cork")},s.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},s.prototype.setWritable=function(e){var t,r,n;this._unwrite&&this._unwrite(),this.destroyed?e&&e.destroy&&e.destroy():null===e||!1===e?this.end():(r=l(e,{writable:!0,readable:!1},o(t=this,this._forwardEnd)),n=function(){var e=t._ondrain;t._ondrain=null,e&&e()},this._unwrite&&c.nextTick(n),this._writable=e,this._writable.on("drain",n),this._unwrite=function(){t._writable.removeListener("drain",n),r()},this.uncork())},s.prototype.setReadable=function(e){if(this._unread&&this._unread(),this.destroyed)e&&e.destroy&&e.destroy();else{if(null===e||!1===e)return this.push(null),void this.resume();var t=this,r=l(e,{writable:!1,readable:!0},o(this)),n=function(){t._forward()},i=function(){t.push(null)};this._drained=!0,this._readable=e,this._readable2=e._readableState?e:(e=e,new a.Readable({objectMode:!0,highWaterMark:16}).wrap(e)),this._readable2.on("readable",n),this._readable2.on("end",i),this._unread=function(){t._readable2.removeListener("readable",n),t._readable2.removeListener("end",i),r()},this._forward()}},s.prototype._read=function(){this._drained=!0,this._forward()},s.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var e;for(this._forwarding=!0;this._drained&&null!==(e=t(this._readable2));)this.destroyed||(this._drained=this.push(e));this._forwarding=!1}},s.prototype.destroy=function(e,t){if(t=t||n,this.destroyed)return t(null);this.destroyed=!0;var r=this;c.nextTick(function(){r._destroy(e),t(null)})},s.prototype._destroy=function(e){var t;e&&(t=this._ondrain,this._ondrain=null,t?t(e):this.emit("error",e)),this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},s.prototype._write=function(e,t,r){if(!this.destroyed)return this._corked?i(this,this._write.bind(this,e,t,r)):e===u?this._finish(r):this._writable?void(!1===this._writable.write(e)?this._ondrain=r:this.destroyed||r()):r()},s.prototype._finish=function(r){var n=this;this.emit("preend"),i(this,function(){var e,t;e=n._forwardEnd&&n._writable,t=function(){!1===n._writableState.prefinished&&(n._writableState.prefinished=!0),n.emit("prefinish"),i(n,r)},!e||e._writableState&&e._writableState.finished?t():e._writableState?e.end(t):(e.end(),t())})},s.prototype.end=function(e,t,r){return"function"==typeof e?this.end(null,null,e):"function"==typeof t?this.end(e,null,t):(this._ended=!0,e&&this.write(e),this._writableState.ending||this._writableState.destroyed||this.write(u),a.Writable.prototype.end.call(this,r))},f.exports=s}.call(this)}.call(this,h("_process"),h("buffer").Buffer)},{_process:50,buffer:5,"end-of-stream":9,inherits:12,"readable-stream":69,"stream-shift":74}],9:[function(e,t,r){!function(w){!function(){function b(){}function m(t,e,r){if("function"==typeof e)return m(t,null,e);function n(){t.writable||i()}function i(){y=!1,d||r.call(t)}function o(){d=!1,y||r.call(t)}function s(e){r.call(t,e?new Error("exited with error code: "+e):null)}function a(e){r.call(t,e)}function l(){w.nextTick(u)}function u(){if(!g)return(!d||p&&p.ended&&!p.destroyed)&&(!y||f&&f.ended&&!f.destroyed)?void 0:r.call(t,new Error("premature close"))}function c(){t.req.on("finish",i)}e=e||{},r=v(r||b);var h,f=t._writableState,p=t._readableState,d=e.readable||!1!==e.readable&&t.readable,y=e.writable||!1!==e.writable&&t.writable,g=!1;return(h=t).setHeader&&"function"==typeof h.abort?(t.on("complete",i),t.on("abort",l),t.req?c():t.on("request",c)):y&&!f&&(t.on("end",n),t.on("close",n)),(h=t).stdio&&Array.isArray(h.stdio)&&3===h.stdio.length&&t.on("exit",s),t.on("end",o),t.on("finish",i),!1!==e.error&&t.on("error",a),t.on("close",l),function(){g=!0,t.removeListener("complete",i),t.removeListener("abort",l),t.removeListener("request",c),t.req&&t.req.removeListener("finish",i),t.removeListener("end",n),t.removeListener("close",n),t.removeListener("finish",i),t.removeListener("exit",s),t.removeListener("end",o),t.removeListener("error",a),t.removeListener("close",l)}}var v=e("once");t.exports=m}.call(this)}.call(this,e("_process"))},{_process:50,once:48}],10:[function(e,t,r){"use strict";var n="object"==typeof Reflect?Reflect:null,l=n&&"function"==typeof n.apply?n.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};var i=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(a,l){return new Promise(function(e,t){function r(e){a.removeListener(l,n),t(e)}function n(){"function"==typeof a.removeListener&&a.removeListener("error",r),e([].slice.call(arguments))}var i,o,s;g(a,l,n,{once:!0}),"error"!==l&&(o=r,s={once:!0},"function"==typeof(i=a).on&&g(i,"error",o,s))})},(s.EventEmitter=s).prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function h(e,t,r,n){var i,o;return u(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener||r),i=e._events),o=i[t]),void 0===o?(o=i[t]=r,++e._eventsCount):("function"==typeof o?o=i[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),0<(i=c(e))&&o.length>i&&!o.warned&&(o.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=o.length,console&&console.warn)),e}function f(e,t,r){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e);return t.listener=r,e.wrapFn=t}function p(e,t,r){e=e._events;if(void 0===e)return[];e=e[t];{if(void 0===e)return[];if("function"==typeof e)return r?[e.listener||e]:[e];if(r){for(var n=e,i=new Array(n.length),o=0;o<i.length;++o)i[o]=n[o].listener||n[o];return i}return y(e,e.length)}}function d(e){var t=this._events;if(void 0!==t){t=t[e];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function y(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function g(r,n,i,o){if("function"==typeof r.on)o.once?r.once(n,i):r.on(n,i);else{if("function"!=typeof r.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r);r.addEventListener(n,function e(t){o.once&&r.removeEventListener(n,e),i(t)})}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){if((o=0<t.length?t[0]:o)instanceof Error)throw o;n=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw n.context=o,n}var o=i[e];if(void 0===o)return!1;if("function"==typeof o)l(o,this,t);else for(var s=o.length,a=y(o,s),r=0;r<s;++r)l(a[r],this,t);return!0},s.prototype.on=s.prototype.addListener=function(e,t){return h(this,e,t,!1)},s.prototype.prependListener=function(e,t){return h(this,e,t,!0)},s.prototype.once=function(e,t){return u(t),this.on(e,f(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,f(this,e,t)),this},s.prototype.off=s.prototype.removeListener=function(e,t){var r,n,i,o,s;if(u(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;0<=o;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;if(0===i)r.shift();else{for(var a=r,l=i;l+1<a.length;l++)a[l]=a[l+1];a.pop()}1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},s.prototype.removeAllListeners=function(e){var t,r=this._events;if(void 0===r)return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){for(var n,i=Object.keys(r),o=0;o<i.length;++o)"removeListener"!==(n=i[o])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(o=t.length-1;0<=o;o--)this.removeListener(e,t[o]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},s.prototype.listenerCount=d,s.prototype.eventNames=function(){return 0<this._eventsCount?i(this._events):[]}},{}],11:[function(e,t,r){r.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,l=(1<<a)-1,u=l>>1,c=-7,h=r?i-1:0,f=r?-1:1,i=e[t+h];for(h+=f,o=i&(1<<-c)-1,i>>=-c,c+=a;0<c;o=256*o+e[t+h],h+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;0<c;s=256*s+e[t+h],h+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(i?-1:1);s+=Math.pow(2,n),o-=u}return(i?-1:1)*s*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var s,a,l=8*o-i-1,u=(1<<l)-1,c=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,p=n?1:-1,o=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-s))<1&&(s--,n*=2),2<=(t+=1<=s+c?h/n:h*Math.pow(2,1-c))*n&&(s++,n/=2),u<=s+c?(a=0,s=u):1<=s+c?(a=(t*n-1)*Math.pow(2,i),s+=c):(a=t*Math.pow(2,c-1)*Math.pow(2,i),s=0));8<=i;e[r+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,l+=i;0<l;e[r+f]=255&s,f+=p,s/=256,l-=8);e[r+f-p]|=128*o}},{}],12:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){var r;t&&(e.super_=t,(r=function(){}).prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e)}},{}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});i.prototype.rotateLeft=function(){var e=this.parent,t=this.brother,r=this.leftChild,n=this.rightChild;if(!n)throw new Error("unknown error");var i=n.leftChild,o=n.rightChild;return e&&(e.leftChild===this?e.leftChild=n:e.rightChild===this&&(e.rightChild=n)),n.parent=e,n.brother=t,n.leftChild=this,n.rightChild=o,t&&(t.brother=n),this.parent=n,this.brother=o,this.leftChild=r,this.rightChild=i,o&&(o.parent=n,o.brother=this),r&&(r.parent=this,r.brother=i),i&&(i.parent=this,i.brother=r),n},i.prototype.rotateRight=function(){var e=this.parent,t=this.brother,r=this.leftChild;if(!r)throw new Error("unknown error");var n=this.rightChild,i=r.leftChild,o=r.rightChild;return e&&(e.leftChild===this?e.leftChild=r:e.rightChild===this&&(e.rightChild=r)),r.parent=e,r.brother=t,r.leftChild=i,r.rightChild=this,t&&(t.brother=r),i&&(i.parent=r,i.brother=this),this.parent=r,this.brother=i,this.leftChild=o,this.rightChild=n,o&&(o.parent=this,o.brother=n),n&&(n.parent=this,n.brother=o),r},i.prototype.remove=function(){if(this.leftChild||this.rightChild)throw new Error("can only remove leaf node");this.parent&&(this===this.parent.leftChild?this.parent.leftChild=void 0:this===this.parent.rightChild&&(this.parent.rightChild=void 0)),this.brother&&(this.brother.brother=void 0),this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0},i.TreeNodeColorType={red:!0,black:!1};var n=i;function i(e,t){this.color=!0,this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0,this.leftChild=void 0,this.rightChild=void 0,this.key=e,this.value=t}Object.freeze(n),r.default=n},{}],14:[function(e,t,r){"use strict";var a=this&&this.__generator||function(n,i){var o,s,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,s=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){l.label=t[1];break}if(6===t[0]&&l.label<a[1]){l.label=a[1],a=t;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(t);break}a[2]&&l.ops.pop(),l.trys.pop();continue}t=i.call(n,l)}catch(e){t=[6,e],s=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}};function g(e){function n(e){var t=c*g.bucketSize+h;if((e=t+e)<t||f*g.bucketSize+p<e)throw new Error("pos should more than 0 and less than queue's size");return{curNodeBucketIndex:Math.floor(e/g.bucketSize),curNodePointerIndex:e%g.bucketSize}}var t=this,u=(void 0===e&&(e=[]),[]),c=0,h=0,f=0,p=0,d=0,y=0,r=(this.size=function(){return y},this.empty=function(){return 0===y},this.clear=function(){c=f=h=p=d=y=0,r.call(this,g.bucketSize),y=0},this.front=function(){return u[c][h]},this.back=function(){return u[f][p]},this.forEach=function(e){if(!this.empty()){var t=0;if(c===f)for(var r=h;r<=p;++r)e(u[c][r],t++);else{for(r=h;r<g.bucketSize;++r)e(u[c][r],t++);for(r=c+1;r<f;++r)for(var n=0;n<g.bucketSize;++n)e(u[r][n],t++);for(r=0;r<=p;++r)e(u[f][r],t++)}}},this.getElementByPos=function(e){var e=n(e),t=e.curNodeBucketIndex,e=e.curNodePointerIndex;return u[t][e]},this.eraseElementByPos=function(e){var t=this;if(e<0||y<e)throw new Error("pos should more than 0 and less than queue's size");if(0===e)this.popFront();else if(e===this.size())this.popBack();else{for(var r=[],n=e+1;n<y;++n)r.push(this.getElementByPos(n));this.cut(e),this.popBack(),r.forEach(function(e){return t.pushBack(e)})}},this.eraseElementByValue=function(t){if(!this.empty()){for(var r=[],e=(this.forEach(function(e){e!==t&&r.push(e)}),r.length),n=0;n<e;++n)this.setElementByPos(n,r[n]);this.cut(e-1)}},function(e){for(var t=[],r=Math.max(Math.ceil(e*g.sigma/g.bucketSize),2),n=0;n<r;++n)t.push(new Array(g.bucketSize));var i=Math.ceil(e/g.bucketSize),o=Math.floor(r/2)-Math.floor(i/2),s=o,a=0;if(this.size())for(n=0;n<i;++n){for(var l=0;l<g.bucketSize;++l)if(t[o+n][l]=this.front(),this.popFront(),this.empty()){s=o+n,a=l;break}if(this.empty())break}u=t,c=o,h=0,f=s,p=a,d=r,y=e}),i=(this.pushBack=function(e){this.empty()||(f===d-1&&p===g.bucketSize-1&&r.call(this,this.size()),p<g.bucketSize-1?++p:f<d-1&&(++f,p=0)),++y,u[f][p]=e},this.popBack=function(){this.empty()||(1!==this.size()&&(0<p?--p:c<f&&(--f,p=g.bucketSize-1)),0<y&&--y)},this.setElementByPos=function(e,t){var e=n(e),r=e.curNodeBucketIndex,e=e.curNodePointerIndex;u[r][e]=t},this.insert=function(e,t,r){var n=this;if(void 0===r&&(r=1),0===e)for(;r--;)this.pushFront(t);else if(e===this.size())for(;r--;)this.pushBack(t);else{for(var i=[],o=e;o<y;++o)i.push(this.getElementByPos(o));this.cut(e-1);for(o=0;o<r;++o)this.pushBack(t);i.forEach(function(e){return n.pushBack(e)})}},this.find=function(e){if(c===f){for(var t=h;t<=p;++t)if(u[c][t]===e)return!0;return!1}for(t=h;t<g.bucketSize;++t)if(u[c][t]===e)return!0;for(t=c+1;t<f;++t)for(var r=0;r<g.bucketSize;++r)if(u[t][r]===e)return!0;for(t=0;t<=p;++t)if(u[f][t]===e)return!0;return!1},this.reverse=function(){for(var e=0,t=y-1;e<t;){var r=this.getElementByPos(e);this.setElementByPos(e,this.getElementByPos(t)),this.setElementByPos(t,r),++e,--t}},this.unique=function(){if(!this.empty()){var r=[],n=this.front();this.forEach(function(e,t){0!==t&&e===n||(r.push(e),n=e)});for(var e=0;e<y;++e)this.setElementByPos(e,r[e]);this.cut(r.length-1)}},this.sort=function(e){var t=[];this.forEach(function(e){t.push(e)}),t.sort(e);for(var r=0;r<y;++r)this.setElementByPos(r,t[r])},this.pushFront=function(e){this.empty()||(0===c&&0===h&&r.call(this,this.size()),0<h?--h:0<c&&(--c,h=g.bucketSize-1)),++y,u[c][h]=e},this.popFront=function(){this.empty()||(1!==this.size()&&(h<g.bucketSize-1?++h:c<f&&(++c,h=0)),0<y&&--y)},this.shrinkToFit=function(){for(var t=this,r=[],e=(this.forEach(function(e){r.push(e)}),r.length),n=(u=[],Math.ceil(e/g.bucketSize)),i=0;i<n;++i)u.push(new Array(g.bucketSize));this.clear(),r.forEach(function(e){return t.pushBack(e)})},this.cut=function(e){var t,r;e<0?this.clear():(t=(r=n(e)).curNodeBucketIndex,r=r.curNodePointerIndex,f=t,p=r,y=e+1)},this[Symbol.iterator]=function(){return function(){var t,r;return a(this,function(e){switch(e.label){case 0:if(0===y)return[2];if(c!==f)return[3,5];r=h,e.label=1;case 1:return r<=p?[4,u[c][r]]:[3,4];case 2:e.sent(),e.label=3;case 3:return++r,[3,1];case 4:return[2];case 5:r=h,e.label=6;case 6:return r<g.bucketSize?[4,u[c][r]]:[3,9];case 7:e.sent(),e.label=8;case 8:return++r,[3,6];case 9:r=c+1,e.label=10;case 10:if(!(r<f))return[3,15];t=0,e.label=11;case 11:return t<g.bucketSize?[4,u[r][t]]:[3,14];case 12:e.sent(),e.label=13;case 13:return++t,[3,11];case 14:return++r,[3,10];case 15:r=0,e.label=16;case 16:return r<=p?[4,u[f][r]]:[3,19];case 17:e.sent(),e.label=18;case 18:return++r,[3,16];case 19:return[2]}})}()},g.bucketSize),o=(e.size?i=e.size():e.length&&(i=e.length),i*g.sigma);d=Math.ceil(o/g.bucketSize),d=Math.max(d,3);for(var s=0;s<d;++s)u.push(new Array(g.bucketSize));o=Math.ceil(i/g.bucketSize),c=Math.floor(d/2)-Math.floor(o/2),f=c,e.forEach(function(e){return t.pushBack(e)}),Object.freeze(this)}Object.defineProperty(r,"__esModule",{value:!0}),g.sigma=3,g.bucketSize=5e3,Object.freeze(g),r.default=g},{}],15:[function(e,t,r){"use strict";var a=this&&this.__generator||function(n,i){var o,s,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,s=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){l.label=t[1];break}if(6===t[0]&&l.label<a[1]){l.label=a[1],a=t;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(t);break}a[2]&&l.ops.pop(),l.trys.pop();continue}t=i.call(n,l)}catch(e){t=[6,e],s=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},p=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},d=(Object.defineProperty(r,"__esModule",{value:!0}),e("../LinkList/LinkList")),y=e("../Map/Map");function g(e,t,c){var r=this;if(void 0===e&&(e=[]),c=c||function(e){var t,r,n=0,i="";if("number"==typeof e)n=((n=Math.floor(e))<<5)-n,n&=n;else{i="string"!=typeof e?JSON.stringify(e):e;try{for(var o=p(i),s=o.next();!s.done;s=o.next()){n=(n<<5)-n+s.value.charCodeAt(0);n&=n}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}}return n^=n>>>16},0!=((t=void 0===t?g.initSize:t)&t-1))throw new Error("initBucketNum must be 2 to the power of n");var u=0,h=[],f=Math.max(g.initSize,Math.min(g.maxSize,t));this.size=function(){return u},this.empty=function(){return 0===u},this.clear=function(){u=0,f=t,h=[]},this.forEach=function(t){var r=0;h.forEach(function(e){e.forEach(function(e){t(e,r++)})})};this.setElement=function(e,t){var r;if(null==e)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(null==t)this.eraseElementByKey(e);else{var n=c(e)&f-1;if(h[n]){var i=h[n].size();if(h[n]instanceof d.default){try{for(var o=p(h[n]),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.key===e)return void(a.value=t)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(l=o.return)&&l.call(o)}finally{if(r)throw r.error}}h[n].pushBack({key:e,value:t}),h[n].size()>=g.treeifyThreshold&&(h[n]=new y.default(h[n]))}else h[n].setElement(e,t);var l=h[n].size();u+=l-i}else++u,h[n]=new d.default([{key:e,value:t}]);f*g.sigma<u&&!function(l){var u;g.maxSize<=l||(f=2*l,u=[],h.forEach(function(e,t){var r,n,i,o,s,a;e.empty()||(e instanceof d.default&&1===e.size()?(r=(n=e.front()).key,n=n.value,u[c(r)&f-1]=new d.default([{key:r,value:n}])):e instanceof y.default?(i=new d.default,o=new d.default,e.forEach(function(e){(0==(c(e.key)&l)?i:o).pushBack(e)}),i.size()>g.untreeifyThreshold?u[t]=new y.default(i):i.size()&&(u[t]=i),o.size()>g.untreeifyThreshold?u[t+l]=new y.default(o):o.size()&&(u[t+l]=o)):(s=new d.default,a=new d.default,e.forEach(function(e){(0==(c(e.key)&l)?s:a).pushBack(e)}),s.size()&&(u[t]=s),a.size()&&(u[t+l]=a)),h[t].clear())}),h=u)}.call(this,f)}},this.getElementByKey=function(e){var t,r,n=c(e)&f-1;if(h[n]){if(h[n]instanceof y.default)return h[n].getElementByKey(e);try{for(var i=p(h[n]),o=i.next();!o.done;o=i.next()){var s=o.value;if(s.key===e)return s.value}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}}},this.eraseElementByKey=function(e){var t,r=c(e)&f-1;if(h[r]){var n=h[r].size();if(h[r]instanceof y.default)h[r].eraseElementByKey(e),h[r].size()<=g.untreeifyThreshold&&(h[r]=new d.default(h[r]));else{var i=-1;try{for(var o=p(h[r]),s=o.next();!s.done;s=o.next()){var a=s.value;if(++i,a.key===e){h[r].eraseElementByPos(i);break}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(l=o.return)&&l.call(o)}finally{if(t)throw t.error}}}var l=h[r].size();u+=l-n}},this.find=function(e){var t,r,n=c(e)&f-1;if(!h[n])return!1;if(h[n]instanceof y.default)return h[n].find(e);try{for(var i=p(h[n]),o=i.next();!o.done;o=i.next())if(o.value.key===e)return!0}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return!1},this[Symbol.iterator]=function(){return function(){var t,r,n,i,o,s;return a(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:if(!(t<f))return[3,10];for(;t<f&&!h[t];)++t;if(f<=t)return[3,10];e.label=2;case 2:e.trys.push([2,7,8,9]),o=void 0,r=p(h[t]),n=r.next(),e.label=3;case 3:return n.done?[3,6]:[4,n.value];case 4:e.sent(),e.label=5;case 5:return n=r.next(),[3,3];case 6:return[3,9];case 7:return i=e.sent(),o={error:i},[3,9];case 8:try{n&&!n.done&&(s=r.return)&&s.call(r)}finally{if(o)throw o.error}return[7];case 9:return++t,[3,1];case 10:return[2]}})}()},e.forEach(function(e){var t=e.key,e=e.value;return r.setElement(t,e)}),Object.freeze(this)}g.initSize=16,g.maxSize=1<<30,g.sigma=.75,g.treeifyThreshold=8,g.untreeifyThreshold=6,g.minTreeifySize=64,Object.freeze(g),r.default=g},{"../LinkList/LinkList":17,"../Map/Map":18}],16:[function(e,t,r){"use strict";var a=this&&this.__generator||function(n,i){var o,s,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,s=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){l.label=t[1];break}if(6===t[0]&&l.label<a[1]){l.label=a[1],a=t;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(t);break}a[2]&&l.ops.pop(),l.trys.pop();continue}t=i.call(n,l)}catch(e){t=[6,e],s=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},f=(Object.defineProperty(r,"__esModule",{value:!0}),e("../Set/Set")),p=e("../LinkList/LinkList");function d(e,t,u){var r=this;if(void 0===e&&(e=[]),u=u||function(e){var t=0,r="";if("number"==typeof e)t=((t=Math.floor(e))<<5)-t,t&=t;else for(var r="string"!=typeof e?JSON.stringify(e):e,n=0;n<r.length;n++){t=(t<<5)-t+r.charCodeAt(n);t&=t}return t^=t>>>16},0!=((t=void 0===t?d.initSize:t)&t-1))throw new Error("initBucketNum must be 2 to the power of n");var i=0,c=[],h=Math.max(d.initSize,Math.min(d.maxSize,t));this.size=function(){return i},this.empty=function(){return 0===i},this.clear=function(){i=0,h=t,c=[]},this.forEach=function(t){var r=0;c.forEach(function(e){e.forEach(function(e){t(e,r++)})})};this.insert=function(e){if(null==e)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");var t=u(e)&h-1;if(c[t]){var r=c[t].size();if(c[t]instanceof p.default){if(c[t].find(e))return;c[t].pushBack(e),c[t].size()>=d.treeifyThreshold&&(c[t]=new f.default(c[t]))}else c[t].insert(e);var n=c[t].size();i+=n-r}else c[t]=new p.default([e]),++i;h*d.sigma<i&&!function(a){var l;d.maxSize<=a||(h=2*a,l=[],c.forEach(function(e,t){if(!e.empty()){if(e instanceof p.default&&1===e.size()){var r=e.front();if(void 0===r)throw new Error("unknown error");l[u(r)&h-1]=new p.default([r])}else{var n,i,o,s;e instanceof f.default?(n=new p.default,i=new p.default,e.forEach(function(e){(0==(u(e)&a)?n:i).pushBack(e)}),n.size()>d.untreeifyThreshold?l[t]=new f.default(n):n.size()&&(l[t]=n),i.size()>d.untreeifyThreshold?l[t+a]=new f.default(i):i.size()&&(l[t+a]=i)):(o=new p.default,s=new p.default,e.forEach(function(e){(0==(u(e)&a)?o:s).pushBack(e)}),o.size()&&(l[t]=o),s.size()&&(l[t+a]=s))}c[t].clear()}}),c=l)}.call(this,h)},this.eraseElementByValue=function(e){var t,r=u(e)&h-1;c[r]&&(t=c[r].size(),c[r].eraseElementByValue(e),c[r]instanceof f.default&&c[r].size()<=d.untreeifyThreshold&&(c[r]=new p.default(c[r])),e=c[r].size(),i+=e-t)},this.find=function(e){var t=u(e)&h-1;return!!c[t]&&c[t].find(e)},this[Symbol.iterator]=function(){return function(){var t,r,n,i,o,s;return a(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:if(!(t<h))return[3,10];for(;t<h&&!c[t];)++t;if(h<=t)return[3,10];e.label=2;case 2:e.trys.push([2,7,8,9]),o=void 0,r=l(c[t]),n=r.next(),e.label=3;case 3:return n.done?[3,6]:[4,n.value];case 4:e.sent(),e.label=5;case 5:return n=r.next(),[3,3];case 6:return[3,9];case 7:return i=e.sent(),o={error:i},[3,9];case 8:try{n&&!n.done&&(s=r.return)&&s.call(r)}finally{if(o)throw o.error}return[7];case 9:return++t,[3,1];case 10:return[2]}})}()},e.forEach(function(e){return r.insert(e)}),Object.freeze(this)}d.initSize=16,d.maxSize=1<<30,d.sigma=.75,d.treeifyThreshold=8,d.untreeifyThreshold=6,d.minTreeifySize=64,Object.freeze(d),r.default=d},{"../LinkList/LinkList":17,"../Set/Set":21}],17:[function(e,t,r){"use strict";var n=this&&this.__generator||function(n,i){var o,s,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,s=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){l.label=t[1];break}if(6===t[0]&&l.label<a[1]){l.label=a[1],a=t;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(t);break}a[2]&&l.ops.pop(),l.trys.pop();continue}t=i.call(n,l)}catch(e){t=[6,e],s=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=(Object.defineProperty(r,"__esModule",{value:!0}),function(e){this.value=void 0,this.pre=void 0,this.next=void 0,this.value=e});function i(e){var t=this,s=(void 0===e&&(e=[]),0),a=void 0,i=void 0;this.size=function(){return s},this.empty=function(){return 0===s},this.clear=function(){a=i=void 0,s=0},this.front=function(){return null==a?void 0:a.value},this.back=function(){return null==i?void 0:i.value},this.forEach=function(e){for(var t=a,r=0;t;){if(void 0===t.value)throw new Error("unknown error");e(t.value,r++),t=t.next}},this.getElementByPos=function(e){if(e<0||s<=e)throw new Error("pos must more then 0 and less then the list length");for(var t=a;e--&&t;)t=t.next;if(t&&void 0!==t.value)return t.value;throw new Error("unknown error")},this.eraseElementByPos=function(e){if(e<0||s<=e)throw new Error("erase pos must more then 0 and less then the list length");if(0===e)this.popFront();else if(e===s-1)this.popBack();else{for(var t=a;e--;){if(null==t||!t.next)throw new Error("unknown error");t=t.next}if(!t||!t.pre||!t.next)throw new Error("unknown error");var r=t.pre,n=t.next;(n.pre=r).next=n,0<s&&--s}},this.eraseElementByValue=function(e){for(;a&&a.value===e;)this.popFront();for(;i&&i.value===e;)this.popBack();if(a)for(var t,r,n=a;n;)n.value===e&&(t=n.pre,(r=n.next)&&(r.pre=t),t&&(t.next=r),0<s&&--s),n=n.next},this.pushBack=function(e){if(null==e)throw new Error("you can't push null or undefined here");++s;e=new l(e);i?((i.next=e).pre=i,i=e):a=i=e},this.popBack=function(){i&&(0<s&&--s,i&&(a===i?a=i=void 0:(i=i.pre)&&(i.next=void 0)))},this.setElementByPos=function(e,t){if(null==t)throw new Error("you can't set null or undefined here");if(e<0||s<=e)throw new Error("pos must more then 0 and less then the list length");for(var r=a;e--;){if(!r)throw new Error("unknown error");r=r.next}r&&(r.value=t)},this.insert=function(e,t,r){if(void 0===r&&(r=1),null==t)throw new Error("you can't insert null or undefined here");if(e<0||s<e)throw new Error("insert pos must more then 0 and less then or equal to the list length");if(r<0)throw new Error("insert size must more than 0");if(0===e)for(;r--;)this.pushFront(t);else if(e===s)for(;r--;)this.pushBack(t);else{for(var n=a,i=1;i<e;++i){if(null==n||!n.next)throw new Error("unknown error");n=null==n?void 0:n.next}if(!n)throw new Error("unknown error");var o=n.next;for(s+=r;r--;)n.next=new l(t),n=(n.next.pre=n).next;(n.next=o)&&(o.pre=n)}},this.find=function(e){for(var t=a;t;){if(t.value===e)return!0;t=t.next}return!1},this.reverse=function(){for(var e=a,t=i,r=0;e&&t&&2*r<s;){var n=e.value;e.value=t.value,t.value=n,e=e.next,t=t.pre,++r}},this.unique=function(){for(var e=a;e;){for(var t=e;t&&t.next&&t.value===t.next.value;)t=t.next,0<s&&--s;e.next=t.next,e.next&&(e.next.pre=e),e=e.next}},this.sort=function(e){var t=[],r=(this.forEach(function(e){t.push(e)}),t.sort(e),a);t.forEach(function(e){r&&(r.value=e,r=r.next)})},this.pushFront=function(e){if(null==e)throw new Error("you can't push null or undefined here");++s;e=new l(e);a=a?(e.next=a).pre=e:i=e},this.popFront=function(){a&&(0<s&&--s,a&&(a===i?a=i=void 0:(a=a.next)&&(a.pre=void 0)))},this.merge=function(e){var r=this,n=a;e.forEach(function(e){for(;n&&void 0!==n.value&&n.value<=e;)n=n.next;var t;void 0===n?(r.pushBack(e),n=i):n===a?(r.pushFront(e),n=a):(++s,(t=n.pre)&&(t.next=new l(e),((t.next.pre=t).next.next=n)&&(n.pre=t.next)))})},this[Symbol.iterator]=function(){return function(){var t;return n(this,function(e){switch(e.label){case 0:t=a,e.label=1;case 1:if(void 0===t)return[3,3];if(t.value)return[4,t.value];throw new Error("unknown error");case 2:return e.sent(),t=t.next,[3,1];case 3:return[2]}})}()},e.forEach(function(e){return t.pushBack(e)}),Object.freeze(this)}Object.freeze(i),r.default=i},{}],18:[function(e,t,r){"use strict";var v=this&&this.__generator||function(n,i){var o,s,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,s=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){l.label=t[1];break}if(6===t[0]&&l.label<a[1]){l.label=a[1],a=t;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(t);break}a[2]&&l.ops.pop(),l.trys.pop();continue}t=i.call(n,l)}catch(e){t=[6,e],s=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},w=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_=(Object.defineProperty(r,"__esModule",{value:!0}),e("../Base/TreeNode"));function n(e,n){function i(e){for(var t,r,n=e;n.leftChild||n.rightChild;)n.rightChild&&(n=a(n.rightChild),t=e.key,e.key=n.key,n.key=t,r=e.value,e.value=n.value,n.value=r,e=n),n.leftChild&&(n=l(n.leftChild),t=e.key,e.key=n.key,n.key=t,r=e.value,e.value=n.value,n.value=r,e=n);p(n),n&&n.remove(),--o,s.color=_.default.TreeNodeColorType.black}var r=this,o=(void 0===e&&(e=[]),n=n||function(e,t){return e<t?-1:t<e?1:0},0),s=new _.default,a=(s.color=_.default.TreeNodeColorType.black,this.size=function(){return o},this.empty=function(){return 0===o},this.clear=function(){o=0,s.key=s.value=void 0,s.leftChild=s.rightChild=s.brother=void 0},function(e){if(e&&void 0!==e.key)return e.leftChild?a(e.leftChild):e;throw new Error("unknown error")}),l=function(e){if(e&&void 0!==e.key)return e.rightChild?l(e.rightChild):e;throw new Error("unknown error")},u=(this.front=function(){if(!this.empty()){var e=a(s);if(void 0===e.key||void 0===e.value)throw new Error("unknown error");return{key:e.key,value:e.value}}},this.back=function(){if(!this.empty()){var e=l(s);if(void 0===e.key||void 0===e.value)throw new Error("unknown error");return{key:e.key,value:e.value}}},this.forEach=function(e){var t,r,n=0;try{for(var i=w(this),o=i.next();!o.done;o=i.next())e(o.value,n++)}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},this.getElementByPos=function(e){var t,r;if(e<0||e>=this.size())throw new Error("pos must more than 0 and less than set's size");var n=0;try{for(var i=w(this),o=i.next();!o.done;o=i.next()){var s=o.value;if(n===e)return s;++n}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new Error("unknown Error")},function(e,t){var r;if(e&&void 0!==e.key&&void 0!==e.value)return r=n(e.key,t),0===r?{key:e.key,value:e.value}:r<0?u(e.rightChild,t):u(e.leftChild,t)||{key:e.key,value:e.value}}),c=(this.lowerBound=function(e){return u(s,e)},function(e,t){if(e&&void 0!==e.key&&void 0!==e.value)return n(e.key,t)<=0?c(e.rightChild,t):c(e.leftChild,t)||{key:e.key,value:e.value}}),h=(this.upperBound=function(e){return c(s,e)},function(e,t){var r;if(e&&void 0!==e.key&&void 0!==e.value)return r=n(e.key,t),0===r?{key:e.key,value:e.value}:0<r?h(e.leftChild,t):h(e.rightChild,t)||{key:e.key,value:e.value}}),f=(this.reverseLowerBound=function(e){return h(s,e)},function(e,t){if(e&&void 0!==e.key&&void 0!==e.value)return 0<=n(e.key,t)?f(e.leftChild,t):f(e.rightChild,t)||{key:e.key,value:e.value}}),p=(this.reverseUpperBound=function(e){return f(s,e)},function(e){var t=e.parent;if(!t){if(e===s)return;throw new Error("unknown error")}if(e.color===_.default.TreeNodeColorType.red)e.color=_.default.TreeNodeColorType.black;else{var r,n=e.brother;if(!n)throw new Error("unknown error");e===t.leftChild?n.color===_.default.TreeNodeColorType.red?(n.color=_.default.TreeNodeColorType.black,t.color=_.default.TreeNodeColorType.red,r=t.rotateLeft(),s===t&&(s=r),p(e)):n.color===_.default.TreeNodeColorType.black&&(n.rightChild&&n.rightChild.color===_.default.TreeNodeColorType.red?(n.color=t.color,t.color=_.default.TreeNodeColorType.black,n.rightChild&&(n.rightChild.color=_.default.TreeNodeColorType.black),r=t.rotateLeft(),s===t&&(s=r),e.color=_.default.TreeNodeColorType.black):n.rightChild&&n.rightChild.color!==_.default.TreeNodeColorType.black||!n.leftChild||n.leftChild.color!==_.default.TreeNodeColorType.red?n.leftChild&&n.leftChild.color!==_.default.TreeNodeColorType.black||n.rightChild&&n.rightChild.color!==_.default.TreeNodeColorType.black||(n.color=_.default.TreeNodeColorType.red,p(t)):(n.color=_.default.TreeNodeColorType.red,n.leftChild&&(n.leftChild.color=_.default.TreeNodeColorType.black),r=n.rotateRight(),s===n&&(s=r),p(e))):e===t.rightChild&&(n.color===_.default.TreeNodeColorType.red?(n.color=_.default.TreeNodeColorType.black,t.color=_.default.TreeNodeColorType.red,r=t.rotateRight(),s===t&&(s=r),p(e)):n.color===_.default.TreeNodeColorType.black&&(n.leftChild&&n.leftChild.color===_.default.TreeNodeColorType.red?(n.color=t.color,t.color=_.default.TreeNodeColorType.black,n.leftChild&&(n.leftChild.color=_.default.TreeNodeColorType.black),r=t.rotateRight(),s===t&&(s=r),e.color=_.default.TreeNodeColorType.black):n.leftChild&&n.leftChild.color!==_.default.TreeNodeColorType.black||!n.rightChild||n.rightChild.color!==_.default.TreeNodeColorType.red?n.leftChild&&n.leftChild.color!==_.default.TreeNodeColorType.black||n.rightChild&&n.rightChild.color!==_.default.TreeNodeColorType.black||(n.color=_.default.TreeNodeColorType.red,p(t)):(n.color=_.default.TreeNodeColorType.red,n.rightChild&&(n.rightChild.color=_.default.TreeNodeColorType.black),r=n.rotateLeft(),s===n&&(s=r),p(e))))}}),d=function(e,t){return!(!e||void 0===e.key)&&(!!d(e.leftChild,t)||(!!t(e)||d(e.rightChild,t)))},y=(this.eraseElementByPos=function(t){if(t<0||o<=t)throw new Error("pos must more than 0 and less than set's size");var r=0;d(s,function(e){return t===r?(i(e),!0):(++r,!1)})},this.eraseElementByKey=function(e){var t;this.empty()||void 0!==(t=b(s,e))&&void 0!==t.key&&0===n(t.key,e)&&i(t)},function(e,t){if(!e||void 0===e.key)throw new Error("unknown error");var r=n(t,e.key);return r<0?e.leftChild?y(e.leftChild,t):(e.leftChild=new _.default,(e.leftChild.parent=e).leftChild.brother=e.rightChild,e.rightChild&&(e.rightChild.brother=e.leftChild),e.leftChild):0<r?e.rightChild?y(e.rightChild,t):(e.rightChild=new _.default,(e.rightChild.parent=e).rightChild.brother=e.leftChild,e.leftChild&&(e.leftChild.brother=e.rightChild),e.rightChild):e}),g=function(e){var t=e.parent;if(!t){if(e===s)return;throw new Error("unknown error")}if(t.color!==_.default.TreeNodeColorType.black&&t.color===_.default.TreeNodeColorType.red){var r,n=t.brother,i=t.parent;if(!i)throw new Error("unknown error");n&&n.color===_.default.TreeNodeColorType.red?(n.color=t.color=_.default.TreeNodeColorType.black,i.color=_.default.TreeNodeColorType.red,g(i)):n&&n.color!==_.default.TreeNodeColorType.black||(t===i.leftChild?e===t.leftChild?(t.color=_.default.TreeNodeColorType.black,i.color=_.default.TreeNodeColorType.red,r=i.rotateRight(),i===s&&(s=r)):e===t.rightChild&&(r=t.rotateLeft(),i===s&&(s=r),g(t)):t===i.rightChild&&(e===t.leftChild?(r=t.rotateRight(),i===s&&(s=r),g(t)):e===t.rightChild&&(t.color=_.default.TreeNodeColorType.black,i.color=_.default.TreeNodeColorType.red,r=i.rotateLeft(),i===s&&(s=r))))}},b=(this.setElement=function(e,t){if(null==e)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(null==t)this.eraseElementByKey(e);else{if(this.empty())return++o,s.key=e,s.value=t,void(s.color=_.default.TreeNodeColorType.black);var r=y(s,e);void 0!==r.key&&0===n(r.key,e)?r.value=t:(++o,r.key=e,r.value=t,g(r),s.color=_.default.TreeNodeColorType.black)}},function(e,t){var r;if(e&&void 0!==e.key)return r=n(t,e.key),r<0?b(e.leftChild,t):0<r?b(e.rightChild,t):e}),m=(this.find=function(e){return!!b(s,e)},this.getElementByKey=function(e){e=b(s,e);if(void 0===(null==e?void 0:e.key)||void 0===(null==e?void 0:e.value))throw new Error("unknown error");return e.value},this.union=function(e){var r=this;e.forEach(function(e){var t=e.key,e=e.value;return r.setElement(t,e)})},this.getHeight=function(){if(this.empty())return 0;var t=function(e){return e?Math.max(t(e.leftChild),t(e.rightChild))+1:1};return t(s)},function(t){return v(this,function(e){switch(e.label){case 0:return t&&void 0!==t.key&&void 0!==t.value?[5,w(m(t.leftChild))]:[2];case 1:return e.sent(),[4,{key:t.key,value:t.value}];case 2:return e.sent(),[5,w(m(t.rightChild))];case 3:return e.sent(),[2]}})});this[Symbol.iterator]=function(){return m(s)},e.forEach(function(e){var t=e.key,e=e.value;return r.setElement(t,e)}),Object.freeze(this)}Object.freeze(n),r.default=n},{"../Base/TreeNode":13}],19:[function(e,t,r){"use strict";function n(e,s){s=s||function(e,t){return t<e?-1:e<t?1:0};for(var a=[],l=((e=void 0===e?[]:e).forEach(function(e){return a.push(e)}),a.length),u=function(e,t){if(e<0||l<=e)throw new Error("unknown error");if(t<0||l<=t)throw new Error("unknown error");var r=a[e];a[e]=a[t],a[t]=r},t=Math.floor((l-1)/2);0<=t;--t)for(var r=t,n=2*r+1;n<l;){var i=n+1,o=n;if(i<l&&0<s(a[n],a[i])&&(o=i),s(a[r],a[o])<=0)break;u(r,o),n=2*(r=o)+1}this.size=function(){return l},this.empty=function(){return 0===l},this.clear=function(){l=0,a.length=0},this.push=function(e){if(a.push(e),1!=++l)for(var t=l-1;0<t;){var r=Math.floor((t-1)/2);if(s(a[r],e)<=0)break;o=i=void 0;var n=r;if(n<0||l<=n)throw new Error("unknown error");var i=2*n+1,o=2*n+2;i<l&&0<s(a[n],a[i])&&u(n,i),o<l&&0<s(a[n],a[o])&&u(n,o),t=r}},this.pop=function(){if(!this.empty())if(1===this.size())--l;else{for(var e=a[l-1],t=(--l,0);t<this.size();){var r=2*t+1,n=2*t+2;if(r>=this.size())break;var i=r;if(n<this.size()&&0<s(a[r],a[n])&&(i=n),0<=s(a[i],e))break;a[t]=a[i],t=i}a[t]=e}},this.top=function(){return a[0]},Object.freeze(this)}Object.defineProperty(r,"__esModule",{value:!0}),Object.freeze(n),r.default=n},{}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../LinkList/LinkList");function i(e){var t=new n.default(e=void 0===e?[]:e);this.size=function(){return t.size()},this.empty=function(){return t.empty()},this.clear=function(){t.clear()},this.push=function(e){t.pushBack(e)},this.pop=function(){t.popFront()},this.front=function(){return t.front()},Object.freeze(this)}Object.freeze(i),r.default=i},{"../LinkList/LinkList":17}],21:[function(e,t,r){"use strict";var m=this&&this.__generator||function(n,i){var o,s,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,s=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){l.label=t[1];break}if(6===t[0]&&l.label<a[1]){l.label=a[1],a=t;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(t);break}a[2]&&l.ops.pop(),l.trys.pop();continue}t=i.call(n,l)}catch(e){t=[6,e],s=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},v=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},w=(Object.defineProperty(r,"__esModule",{value:!0}),e("../Base/TreeNode"));function n(e,n){function i(e){for(var t,r=e;r.leftChild||r.rightChild;)r.rightChild&&(r=a(r.rightChild),t=e.key,e.key=r.key,r.key=t,e=r),r.leftChild&&(r=l(r.leftChild),t=e.key,e.key=r.key,r.key=t,e=r);u(r),r&&r.remove(),--o,s.color=w.default.TreeNodeColorType.black}var t=this,o=(void 0===e&&(e=[]),n=n||function(e,t){return e<t?-1:t<e?1:0},0),s=new w.default,a=(s.color=w.default.TreeNodeColorType.black,this.size=function(){return o},this.empty=function(){return 0===o},this.clear=function(){o=0,s.key=void 0,s.leftChild=s.rightChild=s.brother=s.parent=void 0,s.color=w.default.TreeNodeColorType.black},function(e){if(e&&void 0!==e.key)return e.leftChild?a(e.leftChild):e;throw new Error("unknown error")}),l=function(e){if(e&&void 0!==e.key)return e.rightChild?l(e.rightChild):e;throw new Error("unknown error")},u=(this.front=function(){if(!this.empty())return a(s).key},this.back=function(){if(!this.empty())return l(s).key},this.forEach=function(e){var t,r,n=0;try{for(var i=v(this),o=i.next();!o.done;o=i.next())e(o.value,n++)}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},this.getElementByPos=function(e){var t,r;if(e<0||e>=this.size())throw new Error("pos must more than 0 and less than set's size");var n=0;try{for(var i=v(this),o=i.next();!o.done;o=i.next()){var s=o.value;if(n===e)return s;++n}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new Error("unknown error")},function(e){var t=e.parent;if(!t){if(e===s)return;throw new Error("unknown error")}if(e.color===w.default.TreeNodeColorType.red)e.color=w.default.TreeNodeColorType.black;else{var r,n=e.brother;if(!n)throw new Error("unknown error");e===t.leftChild?n.color===w.default.TreeNodeColorType.red?(n.color=w.default.TreeNodeColorType.black,t.color=w.default.TreeNodeColorType.red,r=t.rotateLeft(),s===t&&(s=r),u(e)):n.color===w.default.TreeNodeColorType.black&&(n.rightChild&&n.rightChild.color===w.default.TreeNodeColorType.red?(n.color=t.color,t.color=w.default.TreeNodeColorType.black,n.rightChild&&(n.rightChild.color=w.default.TreeNodeColorType.black),r=t.rotateLeft(),s===t&&(s=r),e.color=w.default.TreeNodeColorType.black):n.rightChild&&n.rightChild.color!==w.default.TreeNodeColorType.black||!n.leftChild||n.leftChild.color!==w.default.TreeNodeColorType.red?n.leftChild&&n.leftChild.color!==w.default.TreeNodeColorType.black||n.rightChild&&n.rightChild.color!==w.default.TreeNodeColorType.black||(n.color=w.default.TreeNodeColorType.red,u(t)):(n.color=w.default.TreeNodeColorType.red,n.leftChild&&(n.leftChild.color=w.default.TreeNodeColorType.black),r=n.rotateRight(),s===n&&(s=r),u(e))):e===t.rightChild&&(n.color===w.default.TreeNodeColorType.red?(n.color=w.default.TreeNodeColorType.black,t.color=w.default.TreeNodeColorType.red,r=t.rotateRight(),s===t&&(s=r),u(e)):n.color===w.default.TreeNodeColorType.black&&(n.leftChild&&n.leftChild.color===w.default.TreeNodeColorType.red?(n.color=t.color,t.color=w.default.TreeNodeColorType.black,n.leftChild&&(n.leftChild.color=w.default.TreeNodeColorType.black),r=t.rotateRight(),s===t&&(s=r),e.color=w.default.TreeNodeColorType.black):n.leftChild&&n.leftChild.color!==w.default.TreeNodeColorType.black||!n.rightChild||n.rightChild.color!==w.default.TreeNodeColorType.red?n.leftChild&&n.leftChild.color!==w.default.TreeNodeColorType.black||n.rightChild&&n.rightChild.color!==w.default.TreeNodeColorType.black||(n.color=w.default.TreeNodeColorType.red,u(t)):(n.color=w.default.TreeNodeColorType.red,n.rightChild&&(n.rightChild.color=w.default.TreeNodeColorType.black),r=n.rotateLeft(),s===n&&(s=r),u(e))))}}),c=function(e,t){return!(!e||void 0===e.key)&&(!!c(e.leftChild,t)||(!!t(e)||c(e.rightChild,t)))},h=(this.eraseElementByPos=function(t){if(t<0||o<=t)throw new Error("pos must more than 0 and less than set's size");var r=0;c(s,function(e){return t===r?(i(e),!0):(++r,!1)})},this.eraseElementByValue=function(e){var t;this.empty()||void 0!==(t=p(s,e))&&void 0!==t.key&&0===n(t.key,e)&&i(t)},function(e,t){if(!e||void 0===e.key)throw new Error("unknown error");var r=n(t,e.key);return r<0?e.leftChild?h(e.leftChild,t):(e.leftChild=new w.default,(e.leftChild.parent=e).leftChild.brother=e.rightChild,e.rightChild&&(e.rightChild.brother=e.leftChild),e.leftChild):0<r?e.rightChild?h(e.rightChild,t):(e.rightChild=new w.default,(e.rightChild.parent=e).rightChild.brother=e.leftChild,e.leftChild&&(e.leftChild.brother=e.rightChild),e.rightChild):e}),f=function(e){var t=e.parent;if(!t){if(e===s)return;throw new Error("unknown error")}if(t.color!==w.default.TreeNodeColorType.black&&t.color===w.default.TreeNodeColorType.red){var r,n=t.brother,i=t.parent;if(!i)throw new Error("unknown error");n&&n.color===w.default.TreeNodeColorType.red?(n.color=t.color=w.default.TreeNodeColorType.black,i.color=w.default.TreeNodeColorType.red,f(i)):n&&n.color!==w.default.TreeNodeColorType.black||(t===i.leftChild?e===t.leftChild?(t.color=w.default.TreeNodeColorType.black,i.color=w.default.TreeNodeColorType.red,r=i.rotateRight(),i===s&&(s=r)):e===t.rightChild&&(r=t.rotateLeft(),i===s&&(s=r),f(t)):t===i.rightChild&&(e===t.leftChild?(r=t.rotateRight(),i===s&&(s=r),f(t)):e===t.rightChild&&(t.color=w.default.TreeNodeColorType.black,i.color=w.default.TreeNodeColorType.red,r=i.rotateLeft(),i===s&&(s=r))))}},p=(this.insert=function(e){if(null==e)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(this.empty())return++o,s.key=e,void(s.color=w.default.TreeNodeColorType.black);var t=h(s,e);void 0!==t.key&&0===n(t.key,e)||(++o,t.key=e,f(t),s.color=w.default.TreeNodeColorType.black)},function(e,t){var r;if(e&&void 0!==e.key)return r=n(t,e.key),r<0?p(e.leftChild,t):0<r?p(e.rightChild,t):e}),d=(this.find=function(e){var t=p(s,e);return void 0!==t&&void 0!==t.key&&0===n(t.key,e)},function(e,t){if(e&&void 0!==e.key){var r=n(e.key,t);if(0===r)return e.key;if(r<0)return d(e.rightChild,t);r=d(e.leftChild,t);return void 0!==r?r:e.key}}),r=(this.lowerBound=function(e){return d(s,e)},function(e,t){if(e&&void 0!==e.key){if(n(e.key,t)<=0)return r(e.rightChild,t);t=r(e.leftChild,t);return void 0!==t?t:e.key}}),y=(this.upperBound=function(e){return r(s,e)},function(e,t){if(e&&void 0!==e.key){var r=n(e.key,t);if(0===r)return e.key;if(0<r)return y(e.leftChild,t);r=y(e.rightChild,t);return void 0!==r?r:e.key}}),g=(this.reverseLowerBound=function(e){return y(s,e)},function(e,t){if(e&&void 0!==e.key){if(0<=n(e.key,t))return g(e.leftChild,t);t=g(e.rightChild,t);return void 0!==t?t:e.key}}),b=(this.reverseUpperBound=function(e){return g(s,e)},this.union=function(e){var t=this;e.forEach(function(e){return t.insert(e)})},this.getHeight=function(){if(this.empty())return 0;var t=function(e){return e?Math.max(t(e.leftChild),t(e.rightChild))+1:1};return t(s)},function(t){return m(this,function(e){switch(e.label){case 0:return t&&void 0!==t.key?[5,v(b(t.leftChild))]:[2];case 1:return e.sent(),[4,t.key];case 2:return e.sent(),[5,v(b(t.rightChild))];case 3:return e.sent(),[2]}})});this[Symbol.iterator]=function(){return b(s)},e.forEach(function(e){return t.insert(e)}),Object.freeze(this)}Object.freeze(n),r.default=n},{"../Base/TreeNode":13}],22:[function(e,t,r){"use strict";function n(e){var t=this,r=(void 0===e&&(e=[]),0),n=[];this.size=function(){return r},this.empty=function(){return 0===r},this.clear=function(){r=0,n.length=0},this.push=function(e){n.push(e),++r},this.pop=function(){n.pop(),0<r&&--r},this.top=function(){return n[r-1]},e.forEach(function(e){return t.push(e)}),Object.freeze(this)}Object.defineProperty(r,"__esModule",{value:!0}),Object.freeze(n),r.default=n},{}],23:[function(e,t,r){"use strict";var n=this&&this.__generator||function(n,i){var o,s,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,s=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){l.label=t[1];break}if(6===t[0]&&l.label<a[1]){l.label=a[1],a=t;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(t);break}a[2]&&l.ops.pop(),l.trys.pop();continue}t=i.call(n,l)}catch(e){t=[6,e],s=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},l=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function i(e){var t=this,i=(void 0===e&&(e=[]),0),o=[];this.size=function(){return i},this.empty=function(){return 0===i},this.clear=function(){i=0,o.length=0},this.front=function(){if(!this.empty())return o[0]},this.back=function(){if(!this.empty())return o[i-1]},this.forEach=function(e){o.forEach(e)},this.getElementByPos=function(e){if(e<0||i<=e)throw new Error("pos must more than 0 and less than vector's size");return o[e]},this.eraseElementByPos=function(e){if(e<0||i<=e)throw new Error("pos must more than 0 and less than vector's size");for(var t=e;t<i-1;++t)o[t]=o[t+1];this.popBack()},this.eraseElementByValue=function(t){for(var r=[],e=(this.forEach(function(e){e!==t&&r.push(e)}),r.forEach(function(e,t){o[t]=e}),r.length);e<i;)this.popBack()},this.pushBack=function(e){o.push(e),++i},this.popBack=function(){o.pop(),0<i&&--i},this.setElementByPos=function(e,t){if(e<0||i<=e)throw new Error("pos must more than 0 and less than vector's size");o[e]=t},this.insert=function(e,t,r){if(void 0===r&&(r=1),e<0||i<e)throw new Error("pos must more than 0 and less than or equal to vector's size");o.splice.apply(o,a([e,0],s(new Array(r).fill(t)),!1)),i+=r},this.find=function(e){return o.includes(e)},this.reverse=function(){o.reverse()},this.unique=function(){for(var r,n=[],e=(this.forEach(function(e,t){0!==t&&e===r||(n.push(e),r=e)}),n.forEach(function(e,t){o[t]=e}),n.length);e<i;)this.popBack()},this.sort=function(e){o.sort(e)},this[Symbol.iterator]=function(){return function(){return n(this,function(e){switch(e.label){case 0:return[5,l(o)];case 1:return[2,e.sent()]}})}()},e.forEach(function(e){return t.pushBack(e)}),Object.freeze(this)}Object.defineProperty(r,"__esModule",{value:!0}),Object.freeze(i),r.default=i},{}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HashMap=r.HashSet=r.Map=r.Set=r.PriorityQueue=r.Deque=r.LinkList=r.Queue=r.Stack=r.Vector=void 0;var n=e("./Vector/Vector"),n=(r.Vector=n.default,e("./Stack/Stack")),n=(r.Stack=n.default,e("./Queue/Queue")),n=(r.Queue=n.default,e("./LinkList/LinkList")),n=(r.LinkList=n.default,e("./Deque/Deque")),n=(r.Deque=n.default,e("./PriorityQueue/PriorityQueue")),n=(r.PriorityQueue=n.default,e("./Set/Set")),n=(r.Set=n.default,e("./Map/Map")),n=(r.Map=n.default,e("./HashSet/HashSet")),n=(r.HashSet=n.default,e("./HashMap/HashMap"));r.HashMap=n.default},{"./Deque/Deque":14,"./HashMap/HashMap":15,"./HashSet/HashSet":16,"./LinkList/LinkList":17,"./Map/Map":18,"./PriorityQueue/PriorityQueue":19,"./Queue/Queue":20,"./Set/Set":21,"./Stack/Stack":22,"./Vector/Vector":23}],25:[function(e,t,r){"use strict";const n=e("yallist"),s=Symbol("max"),a=Symbol("length"),l=Symbol("lengthCalculator"),o=Symbol("allowStale"),u=Symbol("maxAge"),c=Symbol("dispose"),h=Symbol("noDisposeOnSet"),f=Symbol("lruList"),p=Symbol("cache"),i=Symbol("updateAgeOnGet"),d=()=>1;const y=(e,t,r)=>{const n=e[p].get(t);if(n){t=n.value;if(g(e,t)){if(m(e,n),!e[o])return}else r&&(e[i]&&(n.value.now=Date.now()),e[f].unshiftNode(n));return t.value}},g=(e,t)=>{if(!t||!t.maxAge&&!e[u])return!1;var r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[u]&&r>e[u]},b=t=>{if(t[a]>t[s])for(let e=t[f].tail;t[a]>t[s]&&null!==e;){var r=e.prev;m(t,e),e=r}},m=(e,t)=>{var r;t&&(r=t.value,e[c]&&e[c](r.key,r.value),e[a]-=r.length,e[p].delete(r.key),e[f].removeNode(t))};class v{constructor(e,t,r,n,i){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=i||0}}const w=(e,t,r,n)=>{let i=r.value;g(e,i)&&(m(e,r),e[o]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};t.exports=class{constructor(e){if((e=(e="number"==typeof e?{max:e}:e)||{}).max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[s]=e.max||1/0;var t=e.length||d;if(this[l]="function"!=typeof t?d:t,this[o]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[u]=e.maxAge||0,this[c]=e.dispose,this[h]=e.noDisposeOnSet||!1,this[i]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[s]=e||1/0,b(this)}get max(){return this[s]}set allowStale(e){this[o]=!!e}get allowStale(){return this[o]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[u]=e,b(this)}get maxAge(){return this[u]}set lengthCalculator(e){(e="function"!=typeof e?d:e)!==this[l]&&(this[l]=e,this[a]=0,this[f].forEach(e=>{e.length=this[l](e.value,e.key),this[a]+=e.length})),b(this)}get lengthCalculator(){return this[l]}get length(){return this[a]}get itemCount(){return this[f].length}rforEach(t,r){r=r||this;for(let e=this[f].tail;null!==e;){var n=e.prev;w(this,t,e,r),e=n}}forEach(t,r){r=r||this;for(let e=this[f].head;null!==e;){var n=e.next;w(this,t,e,r),e=n}}keys(){return this[f].toArray().map(e=>e.key)}values(){return this[f].toArray().map(e=>e.value)}reset(){this[c]&&this[f]&&this[f].length&&this[f].forEach(e=>this[c](e.key,e.value)),this[p]=new Map,this[f]=new n,this[a]=0}dump(){return this[f].map(e=>!g(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[f]}set(e,t,r){if((r=r||this[u])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");var n=r?Date.now():0,i=this[l](t,e);if(this[p].has(e)){if(i>this[s])return m(this,this[p].get(e)),!1;const o=this[p].get(e).value;return this[c]&&!this[h]&&this[c](e,o.value),o.now=n,o.maxAge=r,o.value=t,this[a]+=i-o.length,o.length=i,this.get(e),b(this),!0}i=new v(e,t,i,n,r);return i.length>this[s]?(this[c]&&this[c](e,t),!1):(this[a]+=i.length,this[f].unshift(i),this[p].set(e,this[f].head),b(this),!0)}has(e){if(!this[p].has(e))return!1;e=this[p].get(e).value;return!g(this,e)}get(e){return y(this,e,!0)}peek(e){return y(this,e,!1)}pop(){var e=this[f].tail;return e?(m(this,e),e.value):null}del(e){m(this,this[p].get(e))}load(t){this.reset();var r=Date.now();for(let e=t.length-1;0<=e;e--){var n=t[e],i=n.e||0;0===i?this.set(n.k,n.v):0<(i=i-r)&&this.set(n.k,n.v,i)}}prune(){this[p].forEach((e,t)=>y(this,t,!1))}}},{yallist:83}],26:[function(e,a,t){!function(s){!function(){const o=a.exports;o.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},o.codes={};for(const n in o.types){var e=o.types[n];o.codes[e]=n}o.CMD_SHIFT=4,o.CMD_MASK=240,o.DUP_MASK=8,o.QOS_MASK=3,o.QOS_SHIFT=1,o.RETAIN_MASK=1,o.VARBYTEINT_MASK=127,o.VARBYTEINT_FIN_MASK=128,o.VARBYTEINT_MAX=268435455,o.SESSIONPRESENT_MASK=1,o.SESSIONPRESENT_HEADER=s.from([o.SESSIONPRESENT_MASK]),o.CONNACK_HEADER=s.from([o.codes.connack<<o.CMD_SHIFT]),o.USERNAME_MASK=128,o.PASSWORD_MASK=64,o.WILL_RETAIN_MASK=32,o.WILL_QOS_MASK=24,o.WILL_QOS_SHIFT=3,o.WILL_FLAG_MASK=4,o.CLEAN_SESSION_MASK=2,o.CONNECT_HEADER=s.from([o.codes.connect<<o.CMD_SHIFT]),o.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},o.propertiesCodes={};for(const i in o.properties){var t=o.properties[i];o.propertiesCodes[t]=i}function r(i){return[0,1,2].map(n=>[0,1].map(r=>[0,1].map(e=>{const t=s.alloc(1);return t.writeUInt8(o.codes[i]<<o.CMD_SHIFT|(r?o.DUP_MASK:0)|n<<o.QOS_SHIFT|e,0,!0),t})))}o.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},o.PUBLISH_HEADER=r("publish"),o.SUBSCRIBE_HEADER=r("subscribe"),o.SUBSCRIBE_OPTIONS_QOS_MASK=3,o.SUBSCRIBE_OPTIONS_NL_MASK=1,o.SUBSCRIBE_OPTIONS_NL_SHIFT=2,o.SUBSCRIBE_OPTIONS_RAP_MASK=1,o.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,o.SUBSCRIBE_OPTIONS_RH_MASK=3,o.SUBSCRIBE_OPTIONS_RH_SHIFT=4,o.SUBSCRIBE_OPTIONS_RH=[0,16,32],o.SUBSCRIBE_OPTIONS_NL=4,o.SUBSCRIBE_OPTIONS_RAP=8,o.SUBSCRIBE_OPTIONS_QOS=[0,1,2],o.UNSUBSCRIBE_HEADER=r("unsubscribe"),o.ACKS={unsuback:r("unsuback"),puback:r("puback"),pubcomp:r("pubcomp"),pubrel:r("pubrel"),pubrec:r("pubrec")},o.SUBACK_HEADER=s.from([o.codes.suback<<o.CMD_SHIFT]),o.VERSION3=s.from([3]),o.VERSION4=s.from([4]),o.VERSION5=s.from([5]),o.VERSION131=s.from([131]),o.VERSION132=s.from([132]),o.QOS=[0,1,2].map(e=>s.from([e])),o.EMPTY={pingreq:s.from([o.codes.pingreq<<4,0]),pingresp:s.from([o.codes.pingresp<<4,0]),disconnect:s.from([o.codes.disconnect<<4,0])}}.call(this)}.call(this,e("buffer").Buffer)},{buffer:5}],27:[function(t,r,e){!function(s){!function(){const n=t("./writeToStream");var e=t("events");class i extends e{constructor(){super(),this._array=new Array(20),this._i=0}write(e){return this._array[this._i++]=e,!0}concat(){let e=0;const t=new Array(this._array.length),r=this._array;let n=0,i;for(i=0;i<r.length&&void 0!==r[i];i++)"string"!=typeof r[i]?t[i]=r[i].length:t[i]=s.byteLength(r[i]),e+=t[i];const o=s.allocUnsafe(e);for(i=0;i<r.length&&void 0!==r[i];i++)"string"!=typeof r[i]?r[i].copy(o,n):o.write(r[i],n),n+=t[i];return o}}r.exports=function(e,t){const r=new i;return n(e,r,t),r.concat()}}.call(this)}.call(this,t("buffer").Buffer)},{"./writeToStream":32,buffer:5,events:10}],28:[function(e,t,r){r.parser=e("./parser").parser,r.generate=e("./generate"),r.writeToStream=e("./writeToStream")},{"./generate":27,"./parser":31,"./writeToStream":32}],29:[function(e,n,t){!function(o){!function(){const t={},i=o.isBuffer(o.from([1,2]).subarray(0,1));function r(e){const t=o.allocUnsafe(2);return t.writeUInt8(e>>8,0),t.writeUInt8(255&e,1),t}n.exports={cache:t,generateCache:function(){for(let e=0;e<65536;e++)t[e]=r(e)},generateNumber:r,genBufVariableByteInt:function(e){let t=0,r=0;const n=o.allocUnsafe(4);for(;t=e%128|0,0<(e=e/128|0)&&(t|=128),n.writeUInt8(t,r++),0<e&&r<4;);return 0<e&&(r=0),i?n.subarray(0,r):n.slice(0,r)},generate4ByteBuffer:function(e){const t=o.allocUnsafe(4);return t.writeUInt32BE(e,0),t}}}.call(this)}.call(this,e("buffer").Buffer)},{buffer:5}],30:[function(e,t,r){t.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}},{}],31:[function(e,t,r){const n=e("bl");var i=e("events");const o=e("./packet"),l=e("./constants"),u=e("debug")("mqtt-packet:parser");class s extends i{constructor(){super(),this.parser=this.constructor.parser}static parser(e){return this instanceof s?(this.settings=e||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):(new s).parser(e)}_resetState(){u("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new o,this.error=null,this._list=n(),this._stateCounter=0}parse(e){for(this.error&&this._resetState(),this._list.append(e),u("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||0<this._list.length)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,u("parse: state complete. _stateCounter is now: %d",this._stateCounter),u("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return u("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){var e=this._list.readUInt8(0);return this.packet.cmd=l.types[e>>l.CMD_SHIFT],this.packet.retain=0!=(e&l.RETAIN_MASK),this.packet.qos=e>>l.QOS_SHIFT&l.QOS_MASK,this.packet.dup=0!=(e&l.DUP_MASK),u("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){var e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),u("_parseLength %d",e.value),!!e}_parsePayload(){u("_parsePayload: payload %O",this._list);let e=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}e=!0}return u("_parsePayload complete result: %s",e),e}_parseConnect(){u("_parseConnect");const e={},t=this.packet;var r=this._parseString();if(null===r)return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==r&&"MQIsdp"!==r)return this._emitError(new Error("Invalid protocolId"));if(t.protocolId=r,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(t.protocolVersion=this._list.readUInt8(this._pos),128<=t.protocolVersion&&(t.bridgeMode=!0,t.protocolVersion=t.protocolVersion-128),3!==t.protocolVersion&&4!==t.protocolVersion&&5!==t.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(e.username=this._list.readUInt8(this._pos)&l.USERNAME_MASK,e.password=this._list.readUInt8(this._pos)&l.PASSWORD_MASK,e.will=this._list.readUInt8(this._pos)&l.WILL_FLAG_MASK,e.will&&(t.will={},t.will.retain=0!=(this._list.readUInt8(this._pos)&l.WILL_RETAIN_MASK),t.will.qos=(this._list.readUInt8(this._pos)&l.WILL_QOS_MASK)>>l.WILL_QOS_SHIFT),t.clean=0!=(this._list.readUInt8(this._pos)&l.CLEAN_SESSION_MASK),this._pos++,t.keepalive=this._parseNum(),-1===t.keepalive)return this._emitError(new Error("Packet too short"));5===t.protocolVersion&&(r=this._parseProperties(),Object.getOwnPropertyNames(r).length&&(t.properties=r));var r=this._parseString();if(null===r)return this._emitError(new Error("Packet too short"));if(t.clientId=r,u("_parseConnect: packet.clientId: %s",t.clientId),e.will){if(5===t.protocolVersion&&(r=this._parseProperties(),Object.getOwnPropertyNames(r).length&&(t.will.properties=r)),null===(r=this._parseString()))return this._emitError(new Error("Cannot parse will topic"));if(t.will.topic=r,u("_parseConnect: packet.will.topic: %s",t.will.topic),null===(r=this._parseBuffer()))return this._emitError(new Error("Cannot parse will payload"));t.will.payload=r,u("_parseConnect: packet.will.paylaod: %s",t.will.payload)}if(e.username){if(null===(r=this._parseString()))return this._emitError(new Error("Cannot parse username"));t.username=r,u("_parseConnect: packet.username: %s",t.username)}if(e.password){if(null===(r=this._parseBuffer()))return this._emitError(new Error("Cannot parse password"));t.password=r}return this.settings=t,u("_parseConnect: complete"),t}_parseConnack(){u("_parseConnack");const e=this.packet;if(this._list.length<1)return null;if(e.sessionPresent=!!(this._list.readUInt8(this._pos++)&l.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)2<=this._list.length?e.reasonCode=this._list.readUInt8(this._pos++):e.reasonCode=0;else{if(this._list.length<2)return null;e.returnCode=this._list.readUInt8(this._pos++)}if(-1===e.returnCode||-1===e.reasonCode)return this._emitError(new Error("Cannot parse return code"));var t;5===this.settings.protocolVersion&&(t=this._parseProperties(),Object.getOwnPropertyNames(t).length&&(e.properties=t)),u("_parseConnack: complete")}_parsePublish(){u("_parsePublish");const e=this.packet;if(e.topic=this._parseString(),null===e.topic)return this._emitError(new Error("Cannot parse topic"));var t;0<e.qos&&!this._parseMessageId()||(5===this.settings.protocolVersion&&(t=this._parseProperties(),Object.getOwnPropertyNames(t).length&&(e.properties=t)),e.payload=this._list.slice(this._pos,e.length),u("_parsePublish: payload from buffer list: %o",e.payload))}_parseSubscribe(){u("_parseSubscribe");const e=this.packet;var t,r,n,i,o,s;let a;if(1!==e.qos)return this._emitError(new Error("Wrong subscribe header"));if(e.subscriptions=[],this._parseMessageId())for(5===this.settings.protocolVersion&&(s=this._parseProperties(),Object.getOwnPropertyNames(s).length&&(e.properties=s));this._pos<e.length;){if(null===(t=this._parseString()))return this._emitError(new Error("Cannot parse topic"));if(this._pos>=e.length)return this._emitError(new Error("Malformed Subscribe Payload"));r=(n=this._parseByte())&l.SUBSCRIBE_OPTIONS_QOS_MASK,o=0!=(n>>l.SUBSCRIBE_OPTIONS_NL_SHIFT&l.SUBSCRIBE_OPTIONS_NL_MASK),i=0!=(n>>l.SUBSCRIBE_OPTIONS_RAP_SHIFT&l.SUBSCRIBE_OPTIONS_RAP_MASK),n=n>>l.SUBSCRIBE_OPTIONS_RH_SHIFT&l.SUBSCRIBE_OPTIONS_RH_MASK,a={topic:t,qos:r},5===this.settings.protocolVersion?(a.nl=o,a.rap=i,a.rh=n):this.settings.bridgeMode&&(a.rh=0,a.rap=!0,a.nl=!0),u("_parseSubscribe: push subscription `%s` to subscription",a),e.subscriptions.push(a)}}_parseSuback(){u("_parseSuback");const e=this.packet;var t;if(this.packet.granted=[],this._parseMessageId())for(5===this.settings.protocolVersion&&(t=this._parseProperties(),Object.getOwnPropertyNames(t).length&&(e.properties=t));this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}_parseUnsubscribe(){u("_parseUnsubscribe");const e=this.packet;var t;if(e.unsubscriptions=[],this._parseMessageId())for(5===this.settings.protocolVersion&&(t=this._parseProperties(),Object.getOwnPropertyNames(t).length&&(e.properties=t));this._pos<e.length;){var r=this._parseString();if(null===r)return this._emitError(new Error("Cannot parse topic"));u("_parseUnsubscribe: push topic `%s` to unsubscriptions",r),e.unsubscriptions.push(r)}}_parseUnsuback(){u("_parseUnsuback");const e=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(5===this.settings.protocolVersion){var t=this._parseProperties();for(Object.getOwnPropertyNames(t).length&&(e.properties=t),e.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){u("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const e=this.packet;var t;return this._parseMessageId(),5===this.settings.protocolVersion&&(2<e.length?(e.reasonCode=this._parseByte(),u("_parseConfirmation: packet.reasonCode `%d`",e.reasonCode)):e.reasonCode=0,3<e.length&&(t=this._parseProperties(),Object.getOwnPropertyNames(t).length&&(e.properties=t))),!0}_parseDisconnect(){const e=this.packet;var t;return u("_parseDisconnect"),5===this.settings.protocolVersion&&(0<this._list.length?e.reasonCode=this._parseByte():e.reasonCode=0,t=this._parseProperties(),Object.getOwnPropertyNames(t).length&&(e.properties=t)),u("_parseDisconnect result: true"),!0}_parseAuth(){u("_parseAuth");const e=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));e.reasonCode=this._parseByte();var t=this._parseProperties();return Object.getOwnPropertyNames(t).length&&(e.properties=t),u("_parseAuth: result: true"),!0}_parseMessageId(){const e=this.packet;return e.messageId=this._parseNum(),null===e.messageId?(this._emitError(new Error("Cannot parse messageId")),!1):(u("_parseMessageId: packet.messageId %d",e.messageId),!0)}_parseString(e){var t=this._parseNum(),r=t+this._pos;if(-1===t||r>this._list.length||r>this.packet.length)return null;r=this._list.toString("utf8",this._pos,r);return this._pos+=t,u("_parseString: result: %s",r),r}_parseStringPair(){return u("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){var e=this._parseNum(),t=e+this._pos;if(-1===e||t>this._list.length||t>this.packet.length)return null;t=this._list.slice(this._pos,t);return this._pos+=e,u("_parseBuffer: result: %o",t),t}_parseNum(){if(this._list.length-this._pos<2)return-1;var e=this._list.readUInt16BE(this._pos);return this._pos+=2,u("_parseNum: result: %s",e),e}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;var e=this._list.readUInt32BE(this._pos);return this._pos+=4,u("_parse4ByteNum: result: %s",e),e}_parseVarByteNum(e){u("_parseVarByteNum");var t;let r=0,n=1,i=0,o=!1;for(var s=this._pos||0;r<4&&s+r<this._list.length;){if(t=this._list.readUInt8(s+r++),i+=n*(t&l.VARBYTEINT_MASK),n*=128,0==(t&l.VARBYTEINT_FIN_MASK)){o=!0;break}if(this._list.length<=r)break}return!o&&4===r&&this._list.length>=r&&this._emitError(new Error("Invalid variable byte integer")),s&&(this._pos+=r),o=!!o&&(e?{bytes:r,value:i}:i),u("_parseVarByteNum: result: %o",o),o}_parseByte(){let e;return this._pos<this._list.length&&(e=this._list.readUInt8(this._pos),this._pos++),u("_parseByte: result: %o",e),e}_parseByType(e){switch(u("_parseByType: type: %s",e),e){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){u("_parseProperties");var e=this._parseVarByteNum(),t=this._pos+e;const r={};for(;this._pos<t;){var n=this._parseByte();if(!n)return this._emitError(new Error("Cannot parse property code type")),!1;var i,o,n=l.propertiesCodes[n];if(!n)return this._emitError(new Error("Unknown property")),!1;"userProperties"===n?(r[n]||(r[n]=Object.create(null)),i=this._parseByType(l.propertiesTypes[n]),r[n][i.name]?(Array.isArray(r[n][i.name])||(o=r[n][i.name],r[n][i.name]=[o]),r[n][i.name].push(i.value)):r[n][i.name]=i.value):r[n]?(Array.isArray(r[n])||(r[n]=[r[n]]),r[n].push(this._parseByType(l.propertiesTypes[n]))):r[n]=this._parseByType(l.propertiesTypes[n])}return r}_newPacket(){return u("_newPacket"),this.packet&&(this._list.consume(this.packet.length),u("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),u("_newPacket: new packet"),this.packet=new o,!(this._pos=0)}_emitError(e){u("_emitError"),this.error=e,this.emit("error",e)}}t.exports=s},{"./constants":26,"./packet":30,bl:3,debug:6,events:10}],32:[function(f,p,e){!function(ge){!function(){const ee=f("./constants"),te=ge.allocUnsafe(0),re=ge.from([0]);var e=f("./numbers");const ne=f("process-nextick-args").nextTick,ie=f("debug")("mqtt-packet:writeToStream"),r=e.cache,n=e.generateNumber,oe=e.generateCache,a=e.genBufVariableByteInt,o=e.generate4ByteBuffer;let se=l,ae=!0;function t(i,o,n){switch(ie("generate called"),o.cork&&(o.cork(),ne(le,o)),ae&&(ae=!1,oe()),ie("generate: packet.cmd: %s",i.cmd),i.cmd){case"connect":{var s=i;var a=o;var s=s||{},l=s.protocolId||"MQTT";let e=s.protocolVersion||4;var u=s.will;let t=s.clean;var c=s.keepalive||0,h=s.clientId||"",f=s.username,p=s.password,d=s.properties;void 0===t&&(t=!0);let r=0;{if(!l||"string"!=typeof l&&!ge.isBuffer(l))return a.emit("error",new Error("Invalid protocolId")),!1;r+=l.length+2}{if(3!==e&&4!==e&&5!==e)return a.emit("error",new Error("Invalid protocol version")),!1;r+=1}if(("string"==typeof h||ge.isBuffer(h))&&(h||4<=e)&&(h||t))r+=ge.byteLength(h)+2;else{if(e<4)return a.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(0==+t)return a.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}{if("number"!=typeof c||c<0||65535<c||c%1!=0)return a.emit("error",new Error("Invalid keepalive")),!1;r+=2}if(r+=1,5===e){var y=fe(a,d);if(!y)return!1;r+=y.length}if(u){if("object"!=typeof u)return a.emit("error",new Error("Invalid will")),!1;if(!u.topic||"string"!=typeof u.topic)return a.emit("error",new Error("Invalid will topic")),!1;if(r=r+(ge.byteLength(u.topic)+2)+2,u.payload){if(!(0<=u.payload.length))return a.emit("error",new Error("Invalid will payload")),!1;"string"==typeof u.payload?r+=ge.byteLength(u.payload):r+=u.payload.length}var g={};if(5===e){if(!(g=fe(a,u.properties)))return!1;r+=g.length}}let n=!1;if(null!=f){if(!ye(f))return a.emit("error",new Error("Invalid username")),!1;n=!0,r+=ge.byteLength(f)+2}if(null!=p){if(!n)return a.emit("error",new Error("Username is required to use password")),!1;if(!ye(p))return a.emit("error",new Error("Invalid password")),!1;r+=de(p)+2}a.write(ee.CONNECT_HEADER),ue(a,r),he(a,l),s.bridgeMode&&(e+=128);a.write(131===e?ee.VERSION131:132===e?ee.VERSION132:4===e?ee.VERSION4:5===e?ee.VERSION5:ee.VERSION3);d=0;d=(d=(d=(d=(d=(d|=null!=f?ee.USERNAME_MASK:0)|(null!=p?ee.PASSWORD_MASK:0))|(u&&u.retain?ee.WILL_RETAIN_MASK:0))|(u&&u.qos?u.qos<<ee.WILL_QOS_SHIFT:0))|(u?ee.WILL_FLAG_MASK:0))|(t?ee.CLEAN_SESSION_MASK:0),a.write(ge.from([d])),se(a,c),5===e&&y.write();he(a,h),u&&(5===e&&g.write(),ce(a,u.topic),he(a,u.payload));null!=f&&he(a,f);null!=p&&he(a,p);return!0;return}case"connack":{l=i;s=o;d=n;d=d?d.protocolVersion:4,l=l||{},c=5===d?l.reasonCode:l.returnCode,y=l.properties;let e=2;if("number"!=typeof c)return s.emit("error",new Error("Invalid return code")),!1;let t=null;if(5===d){if(!(t=fe(s,y)))return!1;e+=t.length}s.write(ee.CONNACK_HEADER),ue(s,e),s.write(l.sessionPresent?ee.SESSIONPRESENT_HEADER:re),s.write(ge.from([c])),null!=t&&t.write();return!0;return}case"publish":{h=i;g=o;u=n;ie("publish: packet: %o",h);var u=u?u.protocolVersion:4,h=h||{},f=h.qos||0,a=h.retain?ee.RETAIN_MASK:0,p=h.topic,b=h.payload||te,m=h.messageId,v=h.properties;let e=0;if("string"==typeof p)e+=ge.byteLength(p)+2;else{if(!ge.isBuffer(p))return g.emit("error",new Error("Invalid topic")),!1;e+=p.length+2}ge.isBuffer(b)?e+=b.length:e+=ge.byteLength(b);{if(f&&"number"!=typeof m)return g.emit("error",new Error("Invalid messageId")),!1;f&&(e+=2)}let t=null;if(5===u){if(!(t=fe(g,v)))return!1;e+=t.length}g.write(ee.PUBLISH_HEADER[f][h.dup?1:0][a?1:0]),ue(g,e),se(g,de(p)),g.write(p),0<f&&se(g,m);null!=t&&t.write();return ie("publish: payload: %o",b),g.write(b);return}case"puback":case"pubrec":case"pubrel":case"pubcomp":{v=i;m=o;b=n;var w=b?b.protocolVersion:4,v=v||{},_=v.cmd||"puback",U=v.messageId,k=v.dup&&"pubrel"===_?ee.DUP_MASK:0;let e=0;var q=v.reasonCode,v=v.properties;let t=5===w?3:2;"pubrel"===_&&(e=1);if("number"!=typeof U)return m.emit("error",new Error("Invalid messageId")),!1;let r=null;if(5===w&&"object"==typeof v){if(!(r=pe(m,v,b,t)))return!1;t+=r.length}m.write(ee.ACKS[_][e][k][0]),ue(m,t),se(m,U),5===w&&m.write(ge.from([q]));null!==r&&r.write();return!0;return}case"subscribe":{_=i;var S=o;k=n;ie("subscribe: packet: ");var D=k?k.protocolVersion:4,k=_||{},_=k.dup?ee.DUP_MASK:0,U=k.messageId,E=k.subscriptions,k=k.properties;let t=0;{if("number"!=typeof U)return S.emit("error",new Error("Invalid messageId")),!1;t+=2}let e=null;if(5===D){if(!(e=fe(S,k)))return!1;t+=e.length}{if("object"!=typeof E||!E.length)return S.emit("error",new Error("Invalid subscriptions")),!1;for(let e=0;e<E.length;e+=1){var z=E[e].topic,F=E[e].qos;if("string"!=typeof z)return S.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof F)return S.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(5===D){if("boolean"!=typeof(E[e].nl||!1))return S.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(E[e].rap||!1))return S.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;F=E[e].rh||0;if("number"!=typeof F||2<F)return S.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}t+=ge.byteLength(z)+2+1}}ie("subscribe: writing to stream: %o",ee.SUBSCRIBE_HEADER),S.write(ee.SUBSCRIBE_HEADER[1][_?1:0][0]),ue(S,t),se(S,U),null!==e&&e.write();let r=!0;for(const j of E){var V=j.topic,H=j.qos,W=+j.nl,K=+j.rap,Q=j.rh;let e;ce(S,V),e=ee.SUBSCRIBE_OPTIONS_QOS[H],5===D&&(e=(e=(e|=W?ee.SUBSCRIBE_OPTIONS_NL:0)|(K?ee.SUBSCRIBE_OPTIONS_RAP:0))|(Q?ee.SUBSCRIBE_OPTIONS_RH[Q]:0)),r=S.write(ge.from([e]))}return r;return}case"suback":{w=i;var r=o;q=n;var C=q?q.protocolVersion:4,w=w||{},T=w.messageId,G=w.granted,w=w.properties;let t=0;{if("number"!=typeof T)return r.emit("error",new Error("Invalid messageId")),!1;t+=2}{if("object"!=typeof G||!G.length)return r.emit("error",new Error("Invalid qos vector")),!1;for(let e=0;e<G.length;e+=1){if("number"!=typeof G[e])return r.emit("error",new Error("Invalid qos vector")),!1;t+=1}}let e=null;if(5===C){if(!(e=pe(r,w,q,t)))return!1;t+=e.length}r.write(ee.SUBACK_HEADER),ue(r,t),se(r,T),null!==e&&e.write();return r.write(ge.from(G));return}case"unsubscribe":{C=i;var x=o;T=n;var T=T?T.protocolVersion:4,C=C||{},A=C.messageId,I=C.dup?ee.DUP_MASK:0,O=C.unsubscriptions,C=C.properties;let t=0;{if("number"!=typeof A)return x.emit("error",new Error("Invalid messageId")),!1;t+=2}{if("object"!=typeof O||!O.length)return x.emit("error",new Error("Invalid unsubscriptions")),!1;for(let e=0;e<O.length;e+=1){if("string"!=typeof O[e])return x.emit("error",new Error("Invalid unsubscriptions")),!1;t+=ge.byteLength(O[e])+2}}let e=null;if(5===T){if(!(e=fe(x,C)))return!1;t+=e.length}x.write(ee.UNSUBSCRIBE_HEADER[1][I?1:0][0]),ue(x,t),se(x,A),null!==e&&e.write();let r=!0;for(let e=0;e<O.length;e++)r=ce(x,O[e]);return r;return}case"unsuback":{I=i;var P=o;A=n;var R=A?A.protocolVersion:4,I=I||{},B=I.messageId,N=I.dup?ee.DUP_MASK:0,$=I.granted,Y=I.properties,I=I.cmd;let t=2;if("number"!=typeof B)return P.emit("error",new Error("Invalid messageId")),!1;if(5===R){if("object"!=typeof $||!$.length)return P.emit("error",new Error("Invalid qos vector")),!1;for(let e=0;e<$.length;e+=1){if("number"!=typeof $[e])return P.emit("error",new Error("Invalid qos vector")),!1;t+=1}}let e=null;if(5===R){if(!(e=pe(P,Y,A,t)))return!1;t+=e.length}P.write(ee.ACKS[I][0][N][0]),ue(P,t),se(P,B),null!==e&&e.write();5===R&&P.write(ge.from($));return!0;return}case"pingreq":case"pingresp":return Y=i,o.write(ee.EMPTY[Y.cmd]);case"disconnect":{N=i;B=o;R=n;var M=R?R.protocolVersion:4,N=N||{},L=N.reasonCode,N=N.properties;let e=5===M?1:0,t=null;if(5===M){if(!(t=pe(B,N,R,e)))return!1;e+=t.length}B.write(ge.from([ee.codes.disconnect<<4])),ue(B,e),5===M&&B.write(ge.from([L]));null!==t&&t.write();return!0;return}case"auth":{M=i;L=o;var e=n;var t=e?e.protocolVersion:4,M=M||{},J=M.reasonCode,M=M.properties;var Z=5===t?1:0;5!==t&&L.emit("error",new Error("Invalid mqtt version for auth packet"));const X=pe(L,M,e,Z);if(!X)return!1;Z+=X.length,L.write(ge.from([ee.codes.auth<<4])),ue(L,Z),L.write(ge.from([J])),null!==X&&X.write();return!0;return}default:return o.emit("error",new Error("Unknown command")),!1}}function le(e){e.uncork()}Object.defineProperty(t,"cacheNumbers",{get(){return se===l},set(e){se=e?(r&&0!==Object.keys(r).length||(ae=!0),l):(ae=!1,u)}});const i={};function ue(t,r){if(r>ee.VARBYTEINT_MAX)t.emit("error",new Error("Invalid variable byte integer: "+r));else{let e=i[r];e||(e=a(r),r<16384&&(i[r]=e)),ie("writeVarByteInt: writing to stream: %o",e),t.write(e)}}function ce(e,t){var r=ge.byteLength(t);return se(e,r),ie("writeString: %s",t),e.write(t,"utf8")}function s(e,t,r){ce(e,t),ce(e,r)}function l(e,t){return ie("writeNumberCached: number: %d",t),ie("writeNumberCached: %o",r[t]),e.write(r[t])}function u(e,t){t=n(t);return ie("writeNumberGenerated: %o",t),e.write(t)}function he(e,t){"string"==typeof t?ce(e,t):t?(se(e,t.length),e.write(t)):se(e,0)}function fe(r,e){if("object"!=typeof e||null!=e.length)return{length:1,write(){h(r,{},0)}};let n=0;function i(e,n){let t=0;switch(ee.propertiesTypes[e]){case"byte":if("boolean"!=typeof n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=2;break;case"int8":if("number"!=typeof n||n<0||255<n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=2;break;case"binary":if(n&&null===n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=1+ge.byteLength(n)+2;break;case"int16":if("number"!=typeof n||n<0||65535<n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=3;break;case"int32":if("number"!=typeof n||n<0||4294967295<n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=5;break;case"var":if("number"!=typeof n||n<0||268435455<n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=1+ge.byteLength(a(n));break;case"string":if("string"!=typeof n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=3+ge.byteLength(n.toString());break;case"pair":if("object"!=typeof n)return r.emit("error",new Error(`Invalid ${e}: `+n)),!1;t+=Object.getOwnPropertyNames(n).reduce((e,r)=>{const t=n[r];return Array.isArray(t)?e+=t.reduce((e,t)=>e+=3+ge.byteLength(r.toString())+2+ge.byteLength(t.toString()),0):e+=3+ge.byteLength(r.toString())+2+ge.byteLength(n[r].toString()),e},0);break;default:return r.emit("error",new Error(`Invalid property ${e}: `+n)),!1}return t}if(e)for(const s in e){let t=0,r=0;var o=e[s];if(Array.isArray(o))for(let e=0;e<o.length;e++){if(!(r=i(s,o[e])))return!1;t+=r}else{if(!(r=i(s,o)))return!1;t=r}if(!t)return!1;n+=t}return{length:ge.byteLength(a(n))+n,write(){h(r,e,n)}}}function pe(e,t,r,n){const i=["reasonString","userProperties"];var o=r&&r.properties&&r.properties.maximumPacketSize?r.properties.maximumPacketSize:0;let s=fe(e,t);if(o)for(;n+s.length>o;){var a=i.shift();if(!a||!t[a])return!1;delete t[a],s=fe(e,t)}return s}function c(r,n,i){var e,t;switch(ee.propertiesTypes[n]){case"byte":r.write(ge.from([ee.properties[n]])),r.write(ge.from([+i]));break;case"int8":r.write(ge.from([ee.properties[n]])),r.write(ge.from([i]));break;case"binary":r.write(ge.from([ee.properties[n]])),he(r,i);break;case"int16":r.write(ge.from([ee.properties[n]])),se(r,i);break;case"int32":r.write(ge.from([ee.properties[n]])),e=r,t=i,t=o(t),ie("write4ByteNumber: %o",t),e.write(t);break;case"var":r.write(ge.from([ee.properties[n]])),ue(r,i);break;case"string":r.write(ge.from([ee.properties[n]])),ce(r,i);break;case"pair":Object.getOwnPropertyNames(i).forEach(t=>{const e=i[t];Array.isArray(e)?e.forEach(e=>{r.write(ge.from([ee.properties[n]])),s(r,t.toString(),e.toString())}):(r.write(ge.from([ee.properties[n]])),s(r,t.toString(),e.toString()))});break;default:r.emit("error",new Error(`Invalid property ${n} value: `+i))}}function h(t,e,r){ue(t,r);for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&null!==e[i]){var n=e[i];if(Array.isArray(n))for(let e=0;e<n.length;e++)c(t,i,n[e]);else c(t,i,n)}}function de(e){return e?e instanceof ge?e.length:ge.byteLength(e):0}function ye(e){return"string"==typeof e||e instanceof ge}p.exports=t}.call(this)}.call(this,f("buffer").Buffer)},{"./constants":26,"./numbers":29,buffer:5,debug:6,"process-nextick-args":49}],33:[function(C,T,e){!function(r,E){!function(){"use strict";const n=C("events").EventEmitter,o=C("./store"),s=C("./topic-alias-recv"),i=C("./topic-alias-send"),l=C("mqtt-packet"),a=C("./default-message-id-provider"),u=C("readable-stream").Writable,e=C("inherits"),t=C("reinterval"),c=C("rfdc/default"),h=C("./validations"),f=C("xtend"),p=C("debug")("mqttjs:client"),d=r?r.nextTick:function(e){setTimeout(e,0)},y=E.setImmediate||function(e){d(e)},g={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0},b=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],m={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function v(e,t){let r;if(t.properties&&(r=t.properties.topicAlias),0===t.topic.toString().length){if(void 0===r)return new Error("Unregistered Topic Alias");if(void 0===(e=e.topicAliasSend.getTopicByAlias(r)))return new Error("Unregistered Topic Alias");t.topic=e}r&&delete t.properties.topicAlias}function w(e,t,r){p("sendPacket :: packet: %O",t),p("sendPacket :: emitting `packetsend`"),e.emit("packetsend",t),p("sendPacket :: writing to stream");t=l.writeToStream(t,e.stream,e.options);p("sendPacket :: writeToStream result %s",t),!t&&r&&r!==k?(p("sendPacket :: handle events on `drain` once through callback."),e.stream.once("drain",r)):r&&(p("sendPacket :: invoking cb"),r())}function _(t,r,n,i){p("storeAndSend :: store packet with cmd %s to outgoingStore",r.cmd);let e=r;var o;if("publish"===e.cmd&&(e=c(r),o=v(t,e)))return n&&n(o);t.outgoingStore.put(e,function(e){if(e)return n&&n(e);i(),w(t,r,n)})}function k(e){p("nop ::",e)}function S(e,t){let r;const i=this;if(!(this instanceof S))return new S(e,t);for(r in this.options=t||{},g)void 0===this.options[r]?this.options[r]=g[r]:this.options[r]=t[r];p("MqttClient :: options.protocol",t.protocol),p("MqttClient :: options.protocolVersion",t.protocolVersion),p("MqttClient :: options.username",t.username),p("MqttClient :: options.keepalive",t.keepalive),p("MqttClient :: options.reconnectPeriod",t.reconnectPeriod),p("MqttClient :: options.rejectUnauthorized",t.rejectUnauthorized),p("MqttClient :: options.topicAliasMaximum",t.topicAliasMaximum),this.options.clientId="string"==typeof t.clientId?t.clientId:"mqttjs_"+Math.random().toString(16).substr(2,8),p("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===t.protocolVersion&&t.customHandleAcks?t.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=e,this.messageIdProvider=void 0===this.options.messageIdProvider?new a:this.options.messageIdProvider,this.outgoingStore=t.outgoingStore||new o,this.incomingStore=t.incomingStore||new o,this.queueQoSZero=void 0===t.queueQoSZero||t.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,0<t.topicAliasMaximum&&(65535<t.topicAliasMaximum?p("MqttClient :: options.topicAliasMaximum is out of range"):this.topicAliasRecv=new s(t.topicAliasMaximum)),this.on("connect",function(){const e=this.queue;p("connect :: sending queued packets"),function t(){const r=e.shift();p("deliver :: entry %o",r);var n;if(r){n=r.packet,p("deliver :: call _sendPacket for %o",n);let e=!0;(e=!(n.messageId&&0!==n.messageId&&!i.messageIdProvider.register(n.messageId))&&e)?i._sendPacket(n,function(e){r.cb&&r.cb(e),t()}):(p("messageId: %d has already used. The message is skipped and removed.",n.messageId),t())}else i._resubscribe()}()}),this.on("close",function(){p("close :: connected set to `false`"),this.connected=!1,p("close :: clearing connackTimer"),clearTimeout(this.connackTimer),p("close :: clearing ping timer"),null!==i.pingTimer&&(i.pingTimer.clear(),i.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),p("close :: calling _setupReconnect"),this._setupReconnect()}),n.call(this),p("MqttClient :: setting up stream"),this._setupStream()}e(S,n),S.prototype._setupStream=function(){const r=this,e=new u,n=l.parser(this.options);let i=null;const o=[];function s(){if(o.length)d(a);else{const e=i;i=null,e()}}function a(){p("work :: getting next packet in queue");var e=o.shift();if(e)p("work :: packet pulled from queue"),r._handlePacket(e,s);else{p("work :: no packets in queue");const t=i;i=null,p("work :: done flag is %s",!!t),t&&t()}}p("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),p("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),n.on("packet",function(e){p("parser :: on packet push to packets array."),o.push(e)}),e._write=function(e,t,r){i=r,p("writable stream :: parsing buffer"),n.parse(e),a()},p("_setupStream :: pipe stream to writable stream"),this.stream.pipe(e),this.stream.on("error",function(e){p("streamErrorHandler :: error",e.message),b.includes(e.code)?(p("streamErrorHandler :: emitting error"),r.emit("error",e)):k(e)}),this.stream.on("close",function(){var t;p("(%s)stream :: on close",r.options.clientId),(t=r.outgoing)&&(p("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(t).forEach(function(e){t[e].volatile&&"function"==typeof t[e].cb&&(t[e].cb(new Error("Connection closed")),delete t[e])})),p("stream: emit close to MqttClient"),r.emit("close")}),p("_setupStream: sending packet `connect`");const t=Object.create(this.options);if(t.cmd="connect",this.topicAliasRecv&&(t.properties||(t.properties={}),this.topicAliasRecv&&(t.properties.topicAliasMaximum=this.topicAliasRecv.max)),w(this,t),n.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return r.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket&&w(this,f({cmd:"auth",reasonCode:0},this.options.authPacket))}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){p("!!connectTimeout hit!! Calling _cleanUp with force `true`"),r._cleanUp(!0)},this.options.connectTimeout)},S.prototype._handlePacket=function(e,t){var r=this.options;if(5===r.protocolVersion&&r.properties&&r.properties.maximumPacketSize&&r.properties.maximumPacketSize<e.length)return this.emit("error",new Error("exceeding packets size "+e.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(p("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",e),e.cmd){case"publish":this._handlePublish(e,t);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(e),t();break;case"pubrel":this._handlePubrel(e,t);break;case"connack":this._handleConnack(e),t();break;case"auth":this._handleAuth(e),t();break;case"pingresp":this._handlePingresp(e),t();break;case"disconnect":this._handleDisconnect(e),t()}},S.prototype._checkDisconnecting=function(e){return this.disconnecting&&(e&&e!==k?e(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},S.prototype.publish=function(r,n,i,o){p("publish :: message `%s` to topic `%s`",n,r);const s=this.options;"function"==typeof i&&(o=i,i=null);if(i=f({qos:0,retain:!1,dup:!1},i),this._checkDisconnecting(o))return this;const a=this;function e(){let e=0;if((1===i.qos||2===i.qos)&&null===(e=a._nextId()))return p("No messageId left"),!1;const t={cmd:"publish",topic:r,payload:n,qos:i.qos,retain:i.retain,messageId:e,dup:i.dup};switch(5===s.protocolVersion&&(t.properties=i.properties),p("publish :: qos",i.qos),i.qos){case 1:case 2:a.outgoing[t.messageId]={volatile:!1,cb:o||k},p("MqttClient:publish: packet cmd: %s",t.cmd),a._sendPacket(t,void 0,i.cbStorePut);break;default:p("MqttClient:publish: packet cmd: %s",t.cmd),a._sendPacket(t,o,i.cbStorePut)}return!0}return(this._storeProcessing||0<this._storeProcessingQueue.length||!e())&&this._storeProcessingQueue.push({invoke:e,cbStorePut:i.cbStorePut,callback:o}),this},S.prototype.subscribe=function(){const n=this,t=new Array(arguments.length);for(let e=0;e<arguments.length;e++)t[e]=arguments[e];const i=[];let r=t.shift();const o=r.resubscribe;let s=t.pop()||k,a=t.pop();const l=this.options.protocolVersion;delete r.resubscribe,"string"==typeof r&&(r=[r]),"function"!=typeof s&&(a=s,s=k);var e=h.validateTopics(r);if(null!==e)return y(s,new Error("Invalid topic "+e)),this;if(this._checkDisconnecting(s))return p("subscribe: discconecting true"),this;const u={qos:0};if(5===l&&(u.nl=!1,u.rap=!1,u.rh=0),a=f(u,a),Array.isArray(r)?r.forEach(function(e){if(p("subscribe: array topic %s",e),!Object.prototype.hasOwnProperty.call(n._resubscribeTopics,e)||n._resubscribeTopics[e].qos<a.qos||o){const t={topic:e,qos:a.qos};5===l&&(t.nl=a.nl,t.rap=a.rap,t.rh=a.rh,t.properties=a.properties),p("subscribe: pushing topic `%s` and qos `%s` to subs list",t.topic,t.qos),i.push(t)}}):Object.keys(r).forEach(function(e){if(p("subscribe: object topic %s",e),!Object.prototype.hasOwnProperty.call(n._resubscribeTopics,e)||n._resubscribeTopics[e].qos<r[e].qos||o){const t={topic:e,qos:r[e].qos};5===l&&(t.nl=r[e].nl,t.rap=r[e].rap,t.rh=r[e].rh,t.properties=a.properties),p("subscribe: pushing `%s` to subs list",t),i.push(t)}}),!i.length)return s(null,[]),this;function c(){var e=n._nextId();if(null===e)return p("No messageId left"),!1;const t={cmd:"subscribe",subscriptions:i,qos:1,retain:!1,dup:!1,messageId:e};if(a.properties&&(t.properties=a.properties),n.options.resubscribe){p("subscribe :: resubscribe true");const r=[];i.forEach(function(e){if(0<n.options.reconnectPeriod){const t={qos:e.qos};5===l&&(t.nl=e.nl||!1,t.rap=e.rap||!1,t.rh=e.rh||0,t.properties=e.properties),n._resubscribeTopics[e.topic]=t,r.push(e.topic)}}),n.messageIdToTopic[t.messageId]=r}return n.outgoing[t.messageId]={volatile:!0,cb:function(e,t){if(!e){var r=t.granted;for(let e=0;e<r.length;e+=1)i[e].qos=r[e]}s(e,i)}},p("subscribe :: call _sendPacket"),n._sendPacket(t),!0}return(this._storeProcessing||0<this._storeProcessingQueue.length||!c())&&this._storeProcessingQueue.push({invoke:c,callback:s}),this},S.prototype.unsubscribe=function(){const r=this,t=new Array(arguments.length);for(let e=0;e<arguments.length;e++)t[e]=arguments[e];let n=t.shift(),i=t.pop()||k,o=t.pop();"string"==typeof n&&(n=[n]),"function"!=typeof i&&(o=i,i=k);var e=h.validateTopics(n);if(null!==e)return y(i,new Error("Invalid topic "+e)),this;if(r._checkDisconnecting(i))return this;function s(){var e=r._nextId();if(null===e)return p("No messageId left"),!1;const t={cmd:"unsubscribe",qos:1,messageId:e};return"string"==typeof n?t.unsubscriptions=[n]:Array.isArray(n)&&(t.unsubscriptions=n),r.options.resubscribe&&t.unsubscriptions.forEach(function(e){delete r._resubscribeTopics[e]}),"object"==typeof o&&o.properties&&(t.properties=o.properties),r.outgoing[t.messageId]={volatile:!0,cb:i},p("unsubscribe: call _sendPacket"),r._sendPacket(t),!0}return(this._storeProcessing||0<this._storeProcessingQueue.length||!s())&&this._storeProcessingQueue.push({invoke:s,callback:i}),this},S.prototype.end=function(e,t,r){const n=this;function i(){p("end :: (%s) :: finish :: calling _cleanUp with force %s",n.options.clientId,e),n._cleanUp(e,()=>{p("end :: finish :: calling process.nextTick on closeStores"),d(function(){p("end :: closeStores: closing incoming and outgoing stores"),n.disconnected=!0,n.incomingStore.close(function(t){n.outgoingStore.close(function(e){p("end :: closeStores: emitting end"),n.emit("end"),r&&(e=t||e,p("end :: closeStores: invoking callback with args"),r(e))})}),n._deferredReconnect&&n._deferredReconnect()}.bind(n))},t)}return p("end :: (%s)",this.options.clientId),null!=e&&"boolean"==typeof e||(r=t||k,t=e,e=!1,"object"!=typeof t&&(r=t,t=null,"function"!=typeof r&&(r=k))),"object"!=typeof t&&(r=t,t=null),p("end :: cb? %s",!!r),r=r||k,this.disconnecting?r():(this._clearReconnect(),this.disconnecting=!0,!e&&0<Object.keys(this.outgoing).length?(p("end :: (%s) :: calling finish in 10ms once outgoing is empty",n.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,i,10))):(p("end :: (%s) :: immediately calling finish",n.options.clientId),i())),this},S.prototype.removeOutgoingMessage=function(e){const t=this.outgoing[e]?this.outgoing[e].cb:null;return delete this.outgoing[e],this.outgoingStore.del({messageId:e},function(){t(new Error("Message removed"))}),this},S.prototype.reconnect=function(e){p("client reconnect");const t=this;function r(){e?(t.options.incomingStore=e.incomingStore,t.options.outgoingStore=e.outgoingStore):(t.options.incomingStore=null,t.options.outgoingStore=null),t.incomingStore=t.options.incomingStore||new o,t.outgoingStore=t.options.outgoingStore||new o,t.disconnecting=!1,t.disconnected=!1,t._deferredReconnect=null,t._reconnect()}return this.disconnecting&&!this.disconnected?this._deferredReconnect=r:r(),this},S.prototype._reconnect=function(){p("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),p("client already connected. disconnecting first.")):(p("_reconnect: calling _setupStream"),this._setupStream())},S.prototype._setupReconnect=function(){const e=this;!e.disconnecting&&!e.reconnectTimer&&0<e.options.reconnectPeriod?(this.reconnecting||(p("_setupReconnect :: emit `offline` state"),this.emit("offline"),p("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),p("_setupReconnect :: setting reconnectTimer for %d ms",e.options.reconnectPeriod),e.reconnectTimer=setInterval(function(){p("reconnectTimer :: reconnect triggered!"),e._reconnect()},e.options.reconnectPeriod)):p("_setupReconnect :: doing nothing...")},S.prototype._clearReconnect=function(){p("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},S.prototype._cleanUp=function(e,t){var r,n=arguments[2];t&&(p("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",t)),p("_cleanUp :: forced? %s",e),e?(0===this.options.reconnectPeriod&&this.options.clean&&(r=this.outgoing)&&(p("flush: queue exists? %b",!!r),Object.keys(r).forEach(function(e){"function"==typeof r[e].cb&&(r[e].cb(new Error("Connection closed")),delete r[e])})),p("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy()):(e=f({cmd:"disconnect"},n),p("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(e,y.bind(null,this.stream.end.bind(this.stream)))),this.disconnecting||(p("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(p("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),t&&!this.connected&&(p("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",t),t())},S.prototype._sendPacket=function(e,t,r){p("_sendPacket :: (%s) ::  start",this.options.clientId),r=r||k,t=t||k;var n=function(t,r){if(5===t.options.protocolVersion&&"publish"===r.cmd){let e;r.properties&&(e=r.properties.topicAlias);var n=r.topic.toString();if(t.topicAliasSend)if(e){if(0!==n.length&&(p("applyTopicAlias :: register topic: %s - alias: %d",n,e),!t.topicAliasSend.put(n,e)))return p("applyTopicAlias :: error out of range. topic: %s - alias: %d",n,e),new Error("Sending Topic Alias out of range")}else 0!==n.length&&(t.options.autoAssignTopicAlias?(e=t.topicAliasSend.getAliasByTopic(n))?(r.topic="",r.properties={...r.properties,topicAlias:e},p("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",n,e)):(e=t.topicAliasSend.getLruAlias(),t.topicAliasSend.put(n,e),r.properties={...r.properties,topicAlias:e},p("applyTopicAlias :: auto assign topic: %s - alias: %d",n,e)):t.options.autoUseTopicAlias&&(e=t.topicAliasSend.getAliasByTopic(n))&&(r.topic="",r.properties={...r.properties,topicAlias:e},p("applyTopicAlias :: auto use topic: %s - alias: %d",n,e)));else if(e)return p("applyTopicAlias :: error out of range. topic: %s - alias: %d",n,e),new Error("Sending Topic Alias out of range")}}(this,e);if(n)t(n);else{if(!this.connected)return"auth"===e.cmd?(this._shiftPingInterval(),void w(this,e,t)):(p("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(e,t,r));switch(this._shiftPingInterval(),e.cmd){case"publish":break;case"pubrel":return void _(this,e,t,r);default:return void w(this,e,t)}switch(e.qos){case 2:case 1:_(this,e,t,r);break;default:w(this,e,t)}p("_sendPacket :: (%s) ::  end",this.options.clientId)}},S.prototype._storePacket=function(e,t,r){p("_storePacket :: packet: %o",e),p("_storePacket :: cb? %s",!!t),r=r||k;let n=e;if("publish"===n.cmd){e=v(this,n=c(e));if(e)return t&&t(e)}0===(n.qos||0)&&this.queueQoSZero||"publish"!==n.cmd?this.queue.push({packet:n,cb:t}):0<n.qos?(t=this.outgoing[n.messageId]?this.outgoing[n.messageId].cb:null,this.outgoingStore.put(n,function(e){if(e)return t&&t(e);r()})):t&&t(new Error("No connection to broker"))},S.prototype._setupPingTimer=function(){p("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const e=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=t(function(){e._checkPing()},1e3*this.options.keepalive))},S.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},S.prototype._checkPing=function(){p("_checkPing :: checking ping..."),this.pingResp?(p("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(p("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},S.prototype._handlePingresp=function(){this.pingResp=!0},S.prototype._handleConnack=function(e){p("_handleConnack");const t=this.options;var r=5===t.protocolVersion?e.reasonCode:e.returnCode;if(clearTimeout(this.connackTimer),delete this.topicAliasSend,e.properties){if(e.properties.topicAliasMaximum){if(65535<e.properties.topicAliasMaximum)return void this.emit("error",new Error("topicAliasMaximum from broker is out of range"));0<e.properties.topicAliasMaximum&&(this.topicAliasSend=new i(e.properties.topicAliasMaximum))}e.properties.serverKeepAlive&&t.keepalive&&(t.keepalive=e.properties.serverKeepAlive,this._shiftPingInterval()),e.properties.maximumPacketSize&&(t.properties||(t.properties={}),t.properties.maximumPacketSize=e.properties.maximumPacketSize)}if(0===r)this.reconnecting=!1,this._onConnect(e);else if(0<r){const n=new Error("Connection refused: "+m[r]);n.code=r,this.emit("error",n)}},S.prototype._handleAuth=function(e){var t=this.options.protocolVersion;const r=5===t?e.reasonCode:e.returnCode;if(5!==t){const i=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+t);return i.code=r,void this.emit("error",i)}const n=this;this.handleAuth(e,function(e,t){e?n.emit("error",e):24===r?(n.reconnecting=!1,n._sendPacket(t)):(t=new Error("Connection refused: "+m[r]),e.code=r,n.emit("error",t))})},S.prototype.handleAuth=function(e,t){t()},S.prototype._handlePublish=function(r,n){p("_handlePublish: packet %o",r),n=void 0!==n?n:k;let i=r.topic.toString();const o=r.payload;var e=r.qos;const s=r.messageId,a=this,t=this.options,l=[0,16,128,131,135,144,145,151,153];if(5===this.options.protocolVersion){let e;if(void 0!==(e=r.properties?r.properties.topicAlias:e))if(0===i.length){if(!(0<e&&e<=65535))return p("_handlePublish :: topic alias out of range. alias: %d",e),void this.emit("error",new Error("Received Topic Alias is out of range"));var u=this.topicAliasRecv.getTopicByAlias(e);if(!u)return p("_handlePublish :: unregistered topic alias. alias: %d",e),void this.emit("error",new Error("Received unregistered Topic Alias"));i=u,p("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",i,e)}else{if(!this.topicAliasRecv.put(i,e))return p("_handlePublish :: topic alias out of range. alias: %d",e),void this.emit("error",new Error("Received Topic Alias is out of range"));p("_handlePublish :: registered topic: %s - alias: %d",i,e)}}switch(p("_handlePublish: qos %d",e),e){case 2:t.customHandleAcks(i,o,r,function(e,t){return e instanceof Error||(t=e,e=null),e?a.emit("error",e):-1===l.indexOf(t)?a.emit("error",new Error("Wrong reason code for pubrec")):void(t?a._sendPacket({cmd:"pubrec",messageId:s,reasonCode:t},n):a.incomingStore.put(r,function(){a._sendPacket({cmd:"pubrec",messageId:s},n)}))});break;case 1:t.customHandleAcks(i,o,r,function(e,t){return e instanceof Error||(t=e,e=null),e?a.emit("error",e):-1===l.indexOf(t)?a.emit("error",new Error("Wrong reason code for puback")):(t||a.emit("message",i,o,r),void a.handleMessage(r,function(e){if(e)return n&&n(e);a._sendPacket({cmd:"puback",messageId:s,reasonCode:t},n)}))});break;case 0:this.emit("message",i,o,r),this.handleMessage(r,n);break;default:p("_handlePublish: unknown QoS. Doing nothing.")}},S.prototype.handleMessage=function(e,t){t()},S.prototype._handleAck=function(t){var r=t.messageId,e=t.cmd;const n=this.outgoing[r]?this.outgoing[r].cb:null,i=this;let o;if(n){switch(p("_handleAck :: packet type",e),e){case"pubcomp":case"puback":var s=t.reasonCode;s&&0<s&&16!==s&&((o=new Error("Publish error: "+m[s])).code=s,n(o,t)),delete this.outgoing[r],this.outgoingStore.del(t,n),this.messageIdProvider.deallocate(r),this._invokeStoreProcessingQueue();break;case"pubrec":var s={cmd:"pubrel",qos:2,messageId:r},a=t.reasonCode;a&&0<a&&16!==a?((o=new Error("Publish error: "+m[a])).code=a,n(o,t)):this._sendPacket(s);break;case"suback":delete this.outgoing[r],this.messageIdProvider.deallocate(r);for(let e=0;e<t.granted.length;e++)if(0!=(128&t.granted[e])){const l=this.messageIdToTopic[r];l&&l.forEach(function(e){delete i._resubscribeTopics[e]})}this._invokeStoreProcessingQueue(),n(null,t);break;case"unsuback":delete this.outgoing[r],this.messageIdProvider.deallocate(r),this._invokeStoreProcessingQueue(),n(null);break;default:i.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}else p("_handleAck :: Server sent an ack in error. Ignoring.")},S.prototype._handlePubrel=function(e,r){p("handling pubrel packet"),r=void 0!==r?r:k;var t=e.messageId;const n=this,i={cmd:"pubcomp",messageId:t};n.incomingStore.get(e,function(e,t){e?n._sendPacket(i,r):(n.emit("message",t.topic,t.payload,t),n.handleMessage(t,function(e){if(e)return r(e);n.incomingStore.del(t,k),n._sendPacket(i,r)}))})},S.prototype._handleDisconnect=function(e){this.emit("disconnect",e)},S.prototype._nextId=function(){return this.messageIdProvider.allocate()},S.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()},S.prototype._resubscribe=function(){p("_resubscribe");var t=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||5===this.options.protocolVersion&&!this.connackPacket.sessionPresent)&&0<t.length)if(this.options.resubscribe)if(5===this.options.protocolVersion){p("_resubscribe: protocolVersion 5");for(let e=0;e<t.length;e++){const r={};r[t[e]]=this._resubscribeTopics[t[e]],r.resubscribe=!0,this.subscribe(r,{properties:r[t[e]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},S.prototype._onConnect=function(o){if(this.disconnected)this.emit("connect",o);else{const s=this;this.connackPacket=o,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0,!function r(){let t=s.outgoingStore.createStream();function n(){s._storeProcessing=!1,s._packetIdsDuringStoreProcessing={}}function i(){t.destroy(),t=null,s._flushStoreProcessingQueue(),n()}s.once("close",i),t.on("error",function(e){n(),s._flushStoreProcessingQueue(),s.removeListener("close",i),s.emit("error",e)}),t.on("end",function(){let e=!0;for(const t in s._packetIdsDuringStoreProcessing)if(!s._packetIdsDuringStoreProcessing[t]){e=!1;break}e?(n(),s.removeListener("close",i),s._invokeAllStoreProcessingQueue(),s.emit("connect",o)):r()}),function n(){if(t){s._storeProcessing=!0;var e=t.read(1);let r;e?s._packetIdsDuringStoreProcessing[e.messageId]?n():s.disconnecting||s.reconnectTimer?t.destroy&&t.destroy():(r=s.outgoing[e.messageId]?s.outgoing[e.messageId].cb:null,s.outgoing[e.messageId]={volatile:!1,cb:function(e,t){r&&r(e,t),n()}},s._packetIdsDuringStoreProcessing[e.messageId]=!0,s.messageIdProvider.register(e.messageId)?s._sendPacket(e):p("messageId: %d has already used.",e.messageId)):t.once("readable",n)}}()}()}},S.prototype._invokeStoreProcessingQueue=function(){if(0<this._storeProcessingQueue.length){const e=this._storeProcessingQueue[0];if(e&&e.invoke())return this._storeProcessingQueue.shift(),!0}return!1},S.prototype._invokeAllStoreProcessingQueue=function(){for(;this._invokeStoreProcessingQueue(););},S.prototype._flushStoreProcessingQueue=function(){for(const e of this._storeProcessingQueue)e.cbStorePut&&e.cbStorePut(new Error("Connection closed")),e.callback&&e.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)},T.exports=S}.call(this)}.call(this,C("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./default-message-id-provider":40,"./store":41,"./topic-alias-recv":42,"./topic-alias-send":43,"./validations":44,_process:50,debug:6,events:10,inherits:12,"mqtt-packet":28,"readable-stream":69,reinterval:70,"rfdc/default":71,xtend:81}],34:[function(e,t,r){"use strict";const i=e("buffer")["Buffer"],o=e("readable-stream").Transform,s=e("duplexify");let a,l,u,c=!1;t.exports=function(e,t){if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");var r="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt",n=((n=t).hostname||(n.hostname="localhost"),n.path||(n.path="/"),n.wsOptions||(n.wsOptions={}),function(e,t){var r="alis"===e.protocol?"wss":"ws";let n=r+"://"+e.hostname+e.path;return e.port&&80!==e.port&&443!==e.port&&(n=r+"://"+e.hostname+":"+e.port+e.path),n="function"==typeof e.transformWsUrl?e.transformWsUrl(n,e,t):n}(t,e));return(a=t.my).connectSocket({url:n,protocols:r}),l=function(){const e=new o;return e._write=function(e,t,r){a.sendSocketMessage({data:e.buffer,success:function(){r()},fail:function(){r(new Error)}})},e._flush=function(e){a.closeSocket({success:function(){e()}})},e}(),u=s.obj(),c||(c=!0,a.onSocketOpen(function(){u.setReadable(l),u.setWritable(l),u.emit("connect")}),a.onSocketMessage(function(e){if("string"==typeof e.data){var t=i.from(e.data,"base64");l.push(t)}else{const r=new FileReader;r.addEventListener("load",function(){let e=r.result;e=e instanceof ArrayBuffer?i.from(e):i.from(e,"utf8"),l.push(e)}),r.readAsArrayBuffer(e.data)}}),a.onSocketClose(function(){u.end(),u.destroy()}),a.onSocketError(function(e){u.destroy(e)})),u}},{buffer:5,duplexify:8,"readable-stream":69}],35:[function(n,i,e){!function(r){!function(){"use strict";const s=n("../client");var e=n("../store");const a=n("url"),l=n("xtend"),u=n("debug")("mqttjs"),c={};function t(e,t){if(u("connecting to an MQTT broker..."),"object"!=typeof e||t||(t=e,e=null),t=t||{},e){const i=a.parse(e,!0);if(null!=i.port&&(i.port=Number(i.port)),null===(t=l(i,t)).protocol)throw new Error("Missing protocol");t.protocol=t.protocol.replace(/:$/,"")}var r;if((e=t).auth&&((r=e.auth.match(/^(.+):(.+)$/))?(e.username=r[1],e.password=r[2]):e.username=e.auth),t.query&&"string"==typeof t.query.clientId&&(t.clientId=t.query.clientId),t.cert&&t.key){if(!t.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(t.protocol))switch(t.protocol){case"mqtt":t.protocol="mqtts";break;case"ws":t.protocol="wss";break;case"wx":t.protocol="wxs";break;case"ali":t.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+t.protocol+'"!')}}if(!c[t.protocol]){const o=-1!==["mqtts","wss"].indexOf(t.protocol);t.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(e,t){return(!o||t%2!=0)&&"function"==typeof c[e]})[0]}if(!1===t.clean&&!t.clientId)throw new Error("Missing clientId for unclean clients");t.protocol&&(t.defaultProtocol=t.protocol);const n=new s(function(e){return t.servers&&(e._reconnectCount&&e._reconnectCount!==t.servers.length||(e._reconnectCount=0),t.host=t.servers[e._reconnectCount].host,t.port=t.servers[e._reconnectCount].port,t.protocol=t.servers[e._reconnectCount].protocol||t.defaultProtocol,t.hostname=t.host,e._reconnectCount++),u("calling streambuilder for",t.protocol),c[t.protocol](e,t)},t);return n.on("error",function(){}),n}void 0!==r&&"browser"!==r.title||"function"!=typeof __webpack_require__?(c.mqtt=n("./tcp"),c.tcp=n("./tcp"),c.ssl=n("./tls"),c.tls=n("./tls"),c.mqtts=n("./tls")):(c.wx=n("./wx"),c.wxs=n("./wx"),c.ali=n("./ali"),c.alis=n("./ali")),c.ws=n("./ws"),c.wss=n("./ws"),i.exports=t,i.exports.connect=t,i.exports.MqttClient=s,i.exports.Store=e}.call(this)}.call(this,n("_process"))},{"../client":33,"../store":41,"./ali":34,"./tcp":36,"./tls":37,"./ws":38,"./wx":39,_process:50,debug:6,url:76,xtend:81}],36:[function(e,t,r){"use strict";const n=e("net"),i=e("debug")("mqttjs:tcp");t.exports=function(e,t){t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost";var r=t.port,t=t.hostname;return i("port %d and host %s",r,t),n.createConnection(r,t)}},{debug:6,net:4}],37:[function(e,t,r){"use strict";const i=e("tls"),o=e("net"),s=e("debug")("mqttjs:tls");t.exports=function(t,r){r.port=r.port||8883,r.host=r.hostname||r.host||"localhost",0===o.isIP(r.host)&&(r.servername=r.host),r.rejectUnauthorized=!1!==r.rejectUnauthorized,delete r.path,s("port %d host %s rejectUnauthorized %b",r.port,r.host,r.rejectUnauthorized);const n=i.connect(r);function e(e){r.rejectUnauthorized&&t.emit("error",e),n.end()}return n.on("secureConnect",function(){r.rejectUnauthorized&&!n.authorized?n.emit("error",new Error("TLS not authorized")):n.removeListener("error",e)}),n.on("error",e),n}},{debug:6,net:4,tls:4}],38:[function(o,s,e){!function(i){!function(){"use strict";const p=o("buffer")["Buffer"],a=o("ws"),d=o("debug")("mqttjs:ws"),y=o("duplexify"),g=o("readable-stream").Transform,e=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],n=void 0!==i&&"browser"===i.title||"function"==typeof __webpack_require__;function b(e,t){let r=e.protocol+"://"+e.hostname+":"+e.port+e.path;return r="function"==typeof e.transformWsUrl?e.transformWsUrl(r,e,t):r}function m(t){const r=t;return t.hostname||(r.hostname="localhost"),t.port||("wss"===t.protocol?r.port=443:r.port=80),t.path||(r.path="/"),t.wsOptions||(r.wsOptions={}),n||"wss"!==t.protocol||e.forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&!Object.prototype.hasOwnProperty.call(t.wsOptions,e)&&(r.wsOptions[e]=t[e])}),r}function t(e,t){d("streamBuilder");var r,n,i,t=m(t),e=b(t,e);r=e,n=t,d("createWebSocket"),d("protocol: "+n.protocolId+" "+n.protocolVersion),i="MQIsdp"===n.protocolId&&3===n.protocolVersion?"mqttv3.1":"mqtt",d("creating new Websocket for url: "+r+" and protocol: "+i);const o=r=new a(r,[i],n.wsOptions),s=a.createWebSocketStream(o,t.wsOptions);return s.url=e,o.on("close",()=>{s.destroy()}),s}function r(e,t){d("browserStreamBuilder");let r;const i=function(e){const t=m(e);if(t.hostname||(t.hostname=t.host),!t.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");e=new URL(document.URL);t.hostname=e.hostname,t.port||(t.port=e.port)}return void 0===t.objectMode&&(t.objectMode=!(!0===t.binary||void 0===t.binary)),t}(t).browserBufferSize||524288,o=t.browserBufferTimeout||1e3,s=!t.objectMode,a=function(e,t){var r="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt",t=b(t,e);const n=new WebSocket(t,[r]);return n.binaryType="arraybuffer",n}(e,t),n=function(e,t,r){const n=new g({objectModeMode:e.objectMode});return n._write=t,n._flush=r,n}(t,function e(t,r,n){a.bufferedAmount>i&&setTimeout(e,o,t,r,n);s&&"string"==typeof t&&(t=p.from(t,"utf8"));try{a.send(t)}catch(e){return n(e)}n()},function(e){a.close(),e()});t.objectMode||(n._writev=f),n.on("close",()=>{a.close()});e=void 0!==a.addEventListener;function l(){r.setReadable(n),r.setWritable(n),r.emit("connect")}function u(){r.end(),r.destroy()}function c(e){r.destroy(e)}function h(e){let t=e.data;t=t instanceof ArrayBuffer?p.from(t):p.from(t,"utf8"),n.push(t)}function f(t,e){const r=new Array(t.length);for(let e=0;e<t.length;e++)"string"==typeof t[e].chunk?r[e]=p.from(t[e],"utf8"):r[e]=t[e].chunk;this._write(p.concat(r),"binary",e)}return a.readyState===a.OPEN?r=n:(r=r=y(void 0,void 0,t),t.objectMode||(r._writev=f),e?a.addEventListener("open",l):a.onopen=l),r.socket=a,e?(a.addEventListener("close",u),a.addEventListener("error",c),a.addEventListener("message",h)):(a.onclose=u,a.onerror=c,a.onmessage=h),r}n?s.exports=r:s.exports=t}.call(this)}.call(this,o("_process"))},{_process:50,buffer:5,debug:6,duplexify:8,"readable-stream":69,ws:80}],39:[function(e,t,r){"use strict";const o=e("buffer")["Buffer"],s=e("readable-stream").Transform,a=e("duplexify");let l,u,c;t.exports=function(e,t){if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");var r="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt",n=((n=t).hostname||(n.hostname="localhost"),n.path||(n.path="/"),n.wsOptions||(n.wsOptions={}),function(e,t){var r="wxs"===e.protocol?"wss":"ws";let n=r+"://"+e.hostname+e.path;return e.port&&80!==e.port&&443!==e.port&&(n=r+"://"+e.hostname+":"+e.port+e.path),n="function"==typeof e.transformWsUrl?e.transformWsUrl(n,e,t):n}(t,e));l=wx.connectSocket({url:n,protocols:[r]}),u=function(){const e=new s;return e._write=function(e,t,r){l.send({data:e.buffer,success:function(){r()},fail:function(e){r(new Error(e))}})},e._flush=function(e){l.close({success:function(){e()}})},e}(),(c=a.obj())._destroy=function(e,t){l.close({success:function(){t&&t(e)}})};const i=c.destroy;return c.destroy=function(){c.destroy=i;const e=this;setTimeout(function(){l.close({fail:function(){e._destroy(new Error)}})},0)}.bind(c),l.onOpen(function(){c.setReadable(u),c.setWritable(u),c.emit("connect")}),l.onMessage(function(e){let t=e.data;t=t instanceof ArrayBuffer?o.from(t):o.from(t,"utf8"),u.push(t)}),l.onClose(function(){c.end(),c.destroy()}),l.onError(function(e){c.destroy(new Error(e.errMsg))}),c}},{buffer:5,duplexify:8,"readable-stream":69}],40:[function(e,t,r){"use strict";function n(){if(!(this instanceof n))return new n;this.nextId=Math.max(1,Math.floor(65535*Math.random()))}n.prototype.allocate=function(){var e=this.nextId++;return 65536===this.nextId&&(this.nextId=1),e},n.prototype.getLastAllocated=function(){return 1===this.nextId?65535:this.nextId-1},n.prototype.register=function(e){return!0},n.prototype.deallocate=function(e){},n.prototype.clear=function(){},t.exports=n},{}],41:[function(e,t,r){"use strict";const n=e("xtend"),i=e("readable-stream").Readable,o={objectMode:!0},s={clean:!0};function a(e){if(!(this instanceof a))return new a(e);this.options=e||{},this.options=n(s,e),this._inflights=new Map}a.prototype.put=function(e,t){return this._inflights.set(e.messageId,e),t&&t(),this},a.prototype.createStream=function(){const e=new i(o),r=[];let t=!1,n=0;return this._inflights.forEach(function(e,t){r.push(e)}),e._read=function(){!t&&n<r.length?this.push(r[n++]):this.push(null)},e.destroy=function(){if(!t){const e=this;t=!0,setTimeout(function(){e.emit("close")},0)}},e},a.prototype.del=function(e,t){return(e=this._inflights.get(e.messageId))?(this._inflights.delete(e.messageId),t(null,e)):t&&t(new Error("missing packet")),this},a.prototype.get=function(e,t){return(e=this._inflights.get(e.messageId))?t(null,e):t&&t(new Error("missing packet")),this},a.prototype.close=function(e){this.options.clean&&(this._inflights=null),e&&e()},t.exports=a},{"readable-stream":69,xtend:81}],42:[function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);this.aliasToTopic={},this.max=e}n.prototype.put=function(e,t){return!(0===t||t>this.max)&&(this.aliasToTopic[t]=e,this.length=Object.keys(this.aliasToTopic).length,!0)},n.prototype.getTopicByAlias=function(e){return this.aliasToTopic[e]},n.prototype.clear=function(){this.aliasToTopic={}},t.exports=n},{}],43:[function(e,t,r){"use strict";const n=e("lru-cache"),i=e("number-allocator").NumberAllocator;function o(e){if(!(this instanceof o))return new o(e);0<e&&(this.aliasToTopic=new n({max:e}),this.topicToAlias={},this.numberAllocator=new i(1,e),this.max=e,this.length=0)}o.prototype.put=function(e,t){if(0===t||t>this.max)return!1;var r=this.aliasToTopic.get(t);return r&&delete this.topicToAlias[r],this.aliasToTopic.set(t,e),this.topicToAlias[e]=t,this.numberAllocator.use(t),this.length=this.aliasToTopic.length,!0},o.prototype.getTopicByAlias=function(e){return this.aliasToTopic.get(e)},o.prototype.getAliasByTopic=function(e){e=this.topicToAlias[e];return void 0!==e&&this.aliasToTopic.get(e),e},o.prototype.clear=function(){this.aliasToTopic.reset(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0},o.prototype.getLruAlias=function(){var e=this.numberAllocator.firstVacant();return e||this.aliasToTopic.keys()[this.aliasToTopic.length-1]},t.exports=o},{"lru-cache":25,"number-allocator":46}],44:[function(e,t,r){"use strict";t.exports={validateTopics:function(t){if(0===t.length)return"empty_topic_list";for(let e=0;e<t.length;e++)if(!function(e){const t=e.split("/");for(let e=0;e<t.length;e++)if("+"!==t[e]){if("#"===t[e])return e===t.length-1;if(-1!==t[e].indexOf("+")||-1!==t[e].indexOf("#"))return}return 1}(t[e]))return t[e];return null}}},{}],45:[function(e,t,r){var i=36e5,o=864e5;function s(e,t,r,n){t=1.5*r<=t;return Math.round(e/r)+" "+n+(t?"s":"")}t.exports=function(e,t){t=t||{};var r=typeof e;if(!("string"==r&&0<e.length)){if("number"==r&&isFinite(e))return(t.long?function(e){var t=Math.abs(e);if(o<=t)return s(e,t,o,"day");if(i<=t)return s(e,t,i,"hour");if(6e4<=t)return s(e,t,6e4,"minute");if(1e3<=t)return s(e,t,1e3,"second");return e+" ms"}:function(e){var t=Math.abs(e);if(o<=t)return Math.round(e/o)+"d";if(i<=t)return Math.round(e/i)+"h";if(6e4<=t)return Math.round(e/6e4)+"m";if(1e3<=t)return Math.round(e/1e3)+"s";return e+"ms"})(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}r=e;if(!(100<(r=String(r)).length)){r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(r){var n=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return n*o;case"hours":case"hour":case"hrs":case"hr":case"h":return n*i;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}},{}],46:[function(e,t,r){e=e("./lib/number-allocator.js");t.exports.NumberAllocator=e},{"./lib/number-allocator.js":47}],47:[function(e,t,r){"use strict";const n=e("js-sdsl").Set,o=e("debug")("number-allocator:trace"),s=e("debug")("number-allocator:error");function a(e,t){this.low=e,this.high=t}function i(e,t){if(!(this instanceof i))return new i(e,t);this.min=e,this.max=t,this.ss=new n([],(e,t)=>e.compare(t)),o("Create"),this.clear()}a.prototype.equals=function(e){return this.low===e.low&&this.high===e.high},a.prototype.compare=function(e){return this.low<e.low&&this.high<e.low?-1:e.low<this.low&&e.high<this.low?1:0},i.prototype.firstVacant=function(){return 0===this.ss.size()?null:this.ss.front().low},i.prototype.alloc=function(){if(0===this.ss.size())return o("alloc():empty"),null;const e=this.ss.front();var t=e.low;return t+1<=e.high?++e.low:this.ss.eraseElementByPos(0),o("alloc():"+t),t},i.prototype.use=function(e){var t=new a(e,e);const r=this.ss.lowerBound(t);if(r){if(r.equals(t))return this.ss.eraseElementByValue(r),o("use():"+e),!0;if(r.low>e)return!1;if(r.low===e)return++r.low,o("use():"+e),!0;if(r.high===e)return--r.high,o("use():"+e),!0;t=r.low;return r.low=e+1,this.ss.insert(new a(t,e-1)),o("use():"+e),!0}return o("use():failed"),!1},i.prototype.free=function(e){if(e<this.min||e>this.max)s("free():"+e+" is out of range");else{var t=new a(e,e);const r=this.ss.lowerBound(t);if(r){if(r.low<=e&&e<=r.high)return void s("free():"+e+" has already been vacant");if(r===this.ss.front())e+1===r.low?--r.low:this.ss.insert(t);else{const n=this.ss.reverseLowerBound(t);n.high+1===e?e+1===r.low?(this.ss.eraseElementByValue(n),r.low=n.low):n.high=e:e+1===r.low?r.low=e:this.ss.insert(t)}}else{if(r===this.ss.front())return void this.ss.insert(t);const i=this.ss.reverseLowerBound(t);i.high+1===e?i.high=e:this.ss.insert(t)}o("free():"+e)}},i.prototype.clear=function(){o("clear()"),this.ss.clear(),this.ss.insert(new a(this.min,this.max))},i.prototype.intervalCount=function(){return this.ss.size()},i.prototype.dump=function(){for(const e of this.ss);},t.exports=i},{debug:6,"js-sdsl":24}],48:[function(e,t,r){e=e("wrappy");function n(e){function t(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))}return t.called=!1,t}function i(e){function t(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)}var r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}t.exports=e(n),t.exports.strict=e(i),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i(this)},configurable:!0})})},{wrappy:79}],49:[function(e,t,r){!function(a){!function(){"use strict";void 0===a||!a.version||0===a.version.indexOf("v0.")||0===a.version.indexOf("v1.")&&0!==a.version.indexOf("v1.8.")?t.exports={nextTick:function(e,t,r,n){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,o,s=arguments.length;switch(s){case 0:case 1:return a.nextTick(e);case 2:return a.nextTick(function(){e.call(null,t)});case 3:return a.nextTick(function(){e.call(null,t,r)});case 4:return a.nextTick(function(){e.call(null,t,r,n)});default:for(i=new Array(s-1),o=0;o<i.length;)i[o++]=arguments[o];return a.nextTick(function(){e.apply(null,i)})}}}:t.exports=a}.call(this)}.call(this,e("_process"))},{_process:50}],50:[function(e,t,r){var n,i,t=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return(n=setTimeout)(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}var l,u=[],c=!1,h=-1;function f(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&p())}function p(){if(!c){for(var e=a(f),t=(c=!0,u.length);t;){for(l=u,u=[];++h<t;)l&&l[h].run();h=-1,t=u.length}l=null,c=!1,!function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return(i=clearTimeout)(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function y(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new d(e,t)),1!==u.length||c||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=y,t.addListener=y,t.once=y,t.off=y,t.removeListener=y,t.removeAllListeners=y,t.emit=y,t.prependListener=y,t.prependOnceListener=y,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],51:[function(e,A,I){!function(x){!function(){var e=this,t="object"==typeof I&&I&&!I.nodeType&&I,r="object"==typeof A&&A&&!A.nodeType&&A,n="object"==typeof x&&x;n.global!==n&&n.window!==n&&n.self!==n||(e=n);var i,o,g=2147483647,b=36,m=26,s=38,a=700,l=/^xn--/,u=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=b-1,v=Math.floor,w=String.fromCharCode;function _(e){throw new RangeError(h[e])}function p(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function d(e,t){var r=e.split("@"),n="",r=(1<r.length&&(n=r[0]+"@",e=r[1]),(e=e.replace(c,".")).split("."));return n+p(r,t).join(".")}function k(e){for(var t,r,n=[],i=0,o=e.length;i<o;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function y(e){return p(e,function(e){var t="";return 65535<e&&(t+=w((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=w(e)}).join("")}function S(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function E(e,t,r){var n=0;for(e=r?v(e/a):e>>1,e+=v(e/t);f*m>>1<e;n+=b)e=v(e/f);return v(n+(f+1)*e/(e+s))}function C(e){var t,r,n,i,o,s,a,l=[],u=e.length,c=0,h=128,f=72,p=e.lastIndexOf("-");for(p<0&&(p=0),r=0;r<p;++r)128<=e.charCodeAt(r)&&_("not-basic"),l.push(e.charCodeAt(r));for(n=0<p?p+1:0;n<u;){for(i=c,o=1,s=b;u<=n&&_("invalid-input"),a=e.charCodeAt(n++),(b<=(a=a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:b)||a>v((g-c)/o))&&_("overflow"),c+=a*o,!(a<(a=s<=f?1:f+m<=s?m:s-f));s+=b)o>v(g/(a=b-a))&&_("overflow"),o*=a;f=E(c-i,t=l.length+1,0==i),v(c/t)>g-h&&_("overflow"),h+=v(c/t),c%=t,l.splice(c++,0,h)}return y(l)}function T(e){for(var t,r,n,i,o,s,a,l,u,c,h=[],f=(e=k(e)).length,p=128,d=72,y=t=0;y<f;++y)(a=e[y])<128&&h.push(w(a));for(r=n=h.length,n&&h.push("-");r<f;){for(i=g,y=0;y<f;++y)p<=(a=e[y])&&a<i&&(i=a);for(i-p>v((g-t)/(l=r+1))&&_("overflow"),t+=(i-p)*l,p=i,y=0;y<f;++y)if((a=e[y])<p&&++t>g&&_("overflow"),a==p){for(o=t,s=b;!(o<(u=s<=d?1:d+m<=s?m:s-d));s+=b)h.push(w(S(u+(c=o-u)%(u=b-u),0))),o=v(c/u);h.push(w(S(o,0))),d=E(t,l,r==n),t=0,++r}++t,++p}return h.join("")}if(i={version:"1.4.1",ucs2:{decode:k,encode:y},decode:C,encode:T,toASCII:function(e){return d(e,function(e){return u.test(e)?"xn--"+T(e):e})},toUnicode:function(e){return d(e,function(e){return l.test(e)?C(e.slice(4).toLowerCase()):e})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return i});else if(t&&r)if(A.exports==t)r.exports=i;else for(o in i)i.hasOwnProperty(o)&&(t[o]=i[o]);else e.punycode=i}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],52:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var o=/\+/g,t=(e=e.split(t=t||"&"),1e3),s=(n&&"number"==typeof n.maxKeys&&(t=n.maxKeys),e.length);0<t&&t<s&&(s=t);for(var a=0;a<s;++a){var l,u=e[a].replace(o,"%20"),c=u.indexOf(r),c=0<=c?(l=u.substr(0,c),u.substr(c+1)):(l=u,""),u=decodeURIComponent(l),c=decodeURIComponent(c);Object.prototype.hasOwnProperty.call(i,u)?h(i[u])?i[u].push(c):i[u]=[i[u],c]:i[u]=c}return i};var h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],53:[function(e,t,r){"use strict";function o(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}t.exports=function(r,n,i,e){return n=n||"&",i=i||"=","object"==typeof(r=null===r?void 0:r)?a(l(r),function(e){var t=encodeURIComponent(o(e))+i;return s(r[e])?a(r[e],function(e){return t+encodeURIComponent(o(e))}).join(n):t+encodeURIComponent(o(r[e]))}).join(n):e?encodeURIComponent(o(e))+i+encodeURIComponent(o(r)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var l=Object.keys||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r}},{}],54:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":52,"./encode":53}],55:[function(e,t,r){"use strict";var n={};function i(e,i,t){var r=function(n){var e,t;function r(e,t,r){return n.call(this,(e=e,t=t,r=r,"string"==typeof i?i:i(e,t,r)))||this}return t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,r}(t=t||Error);r.prototype.name=t.name,r.prototype.code=e,n[e]=r}function l(e,t){var r;return Array.isArray(e)?(r=e.length,e=e.map(function(e){return String(e)}),2<r?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])):"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),i("ERR_INVALID_ARG_TYPE",function(e,t,r){var n,i,o,s,a;return"string"==typeof t&&(s="not ",t.substr(!o||o<0?0:+o,s.length)===s)?(n="must not be",t=t.replace(/^not /,"")):n="must be",o=e,s=" argument",(void 0===a||a>o.length)&&(a=o.length),o=o.substring(a-s.length,a)===s?"The ".concat(e," ").concat(n," ").concat(l(t,"type")):(a=(i="number"!=typeof i?0:i)+(o=".").length>(a=e).length||-1===a.indexOf(o,i)?"argument":"property",'The "'.concat(e,'" ').concat(a," ").concat(n," ").concat(l(t,"type"))),o+=". Received type ".concat(typeof r)},TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n},{}],56:[function(c,h,e){!function(u){!function(){"use strict";var e=Object.keys||function(e){var t,r=[];for(t in e)r.push(t);return r},t=(h.exports=s,c("./_stream_readable")),r=c("./_stream_writable");c("inherits")(s,t);for(var n=e(r.prototype),i=0;i<n.length;i++){var o=n[i];s.prototype[o]||(s.prototype[o]=r.prototype[o])}function s(e){if(!(this instanceof s))return new s(e);t.call(this,e),r.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||u.nextTick(l,this)}function l(e){e.end()}Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}.call(this)}.call(this,c("_process"))},{"./_stream_readable":58,"./_stream_writable":60,_process:50,inherits:12}],57:[function(e,t,r){"use strict";t.exports=i;var n=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}e("inherits")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":59,inherits:12}],58:[function(q,D,e){!function(j,U){!function(){"use strict";function d(e,t){return e.listeners(t).length}(D.exports=w).ReadableState=v,q("events").EventEmitter;var n,i=q("./internal/streams/stream"),c=q("buffer").Buffer,h=U.Uint8Array||function(){};var o,e,r,t=q("util"),y=t&&t.debuglog?t.debuglog("stream"):function(){},s=q("./internal/streams/buffer_list"),t=q("./internal/streams/destroy"),a=q("./internal/streams/state").getHighWaterMark,l=q("../errors").codes,f=l.ERR_INVALID_ARG_TYPE,p=l.ERR_STREAM_PUSH_AFTER_EOF,u=l.ERR_METHOD_NOT_IMPLEMENTED,g=l.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,b=(q("inherits")(w,i),t.errorOrDestroy),m=["error","close","destroy","pause","resume"];function v(e,t,r){n=n||q("./_stream_duplex"),"boolean"!=typeof r&&(r=t instanceof n),this.objectMode=!!(e=e||{}).objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=a(this,e,"readableHighWaterMark",r),this.buffer=new s,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(o=o||q("string_decoder/").StringDecoder,this.decoder=new o(e.encoding),this.encoding=e.encoding)}function w(e){if(n=n||q("./_stream_duplex"),!(this instanceof w))return new w(e);var t=this instanceof n;this._readableState=new v(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),i.call(this)}function _(e,t,r,n,i){y("readableAddChunk",t);var o,s,a,l,u=e._readableState;if(null===t)u.reading=!1,s=e,a=u,y("onEofChunk"),a.ended||(a.decoder&&(l=a.decoder.end())&&l.length&&(a.buffer.push(l),a.length+=a.objectMode?1:l.length),a.ended=!0,a.sync?C(s):(a.needReadable=!1,a.emittedReadable||(a.emittedReadable=!0,T(s))));else if(o=i?o:function(e,t){var r;!function(e){return c.isBuffer(e)||e instanceof h}(t)&&"string"!=typeof t&&void 0!==t&&!e.objectMode&&(r=new f("chunk",["string","Buffer","Uint8Array"],t));return r}(u,t))b(e,o);else if(u.objectMode||t&&0<t.length)if("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===c.prototype||(l=t,t=c.from(l)),n)u.endEmitted?b(e,new g):k(e,u,t,!0);else if(u.ended)b(e,new p);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!r?(t=u.decoder.write(t),u.objectMode||0!==t.length?k(e,u,t,!1):x(e,u)):k(e,u,t,!1)}else n||(u.reading=!1,x(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function k(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&C(e)),x(e,t)}Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),w.prototype.destroy=t.destroy,w.prototype._undestroy=t.undestroy,w.prototype._destroy=function(e,t){t(e)},w.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=c.from(e,t),t=""),r=!0),_(this,e,t,!1,r)},w.prototype.unshift=function(e){return _(this,e,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(e){for(var t=new(o=o||q("string_decoder/").StringDecoder)(e),r=(this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding,this._readableState.buffer.head),n="";null!==r;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var S=1073741824;function E(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?(t.flowing&&t.length?t.buffer.head.data:t).length:(e>t.highWaterMark&&(t.highWaterMark=(S<=(r=e)?r=S:(r--,r=(r=(r=(r=(r|=r>>>1)|r>>>2)|r>>>4)|r>>>8)|r>>>16,r++),r)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var r}function C(e){var t=e._readableState;y("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(y("emitReadable",t.flowing),t.emittedReadable=!0,j.nextTick(T,e))}function T(e){var t=e._readableState;y("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,R(e)}function x(e,t){t.readingMore||(t.readingMore=!0,j.nextTick(A,e,t))}function A(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(y("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function I(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function O(e){y("readable nexttick read 0"),e.read(0)}function P(e,t){y("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),R(e),t.flowing&&!t.reading&&e.read(0)}function R(e){var t=e._readableState;for(y("flow",t.flowing);t.flowing&&null!==e.read(););}function B(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function N(e){var t=e._readableState;y("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,j.nextTick(L,t,e))}function L(e,t){y("endReadableNT",e.endEmitted,e.length),e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy&&(!(e=t._writableState)||e.autoDestroy&&e.finished)&&t.destroy())}function M(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}w.prototype.read=function(e){y("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:0<t.length)||t.ended))return y("read: emitReadable",t.length,t.ended),(0===t.length&&t.ended?N:C)(this),null;if(0===(e=E(e,t))&&t.ended)return 0===t.length&&N(this),null;var n=t.needReadable;return y("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&y("length less than watermark",n=!0),t.ended||t.reading?y("reading or ended",n=!1):n&&(y("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=E(r,t))),null===(n=0<e?B(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&N(this)),null!==n&&this.emit("data",n),n},w.prototype._read=function(e){b(this,new u("_read()"))},w.prototype.pipe=function(r,e){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=r;break;case 1:i.pipes=[i.pipes,r];break;default:i.pipes.push(r)}i.pipesCount+=1,y("pipe count=%d opts=%j",i.pipesCount,e);e=(!e||!1!==e.end)&&r!==j.stdout&&r!==j.stderr?s:p;function o(e,t){y("onunpipe"),e===n&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,y("cleanup"),r.removeListener("close",h),r.removeListener("finish",f),r.removeListener("drain",a),r.removeListener("error",c),r.removeListener("unpipe",o),n.removeListener("end",s),n.removeListener("end",p),n.removeListener("data",u),l=!0,!i.awaitDrain||r._writableState&&!r._writableState.needDrain||a())}function s(){y("onend"),r.end()}i.endEmitted?j.nextTick(e):n.once("end",e),r.on("unpipe",o);t=n;var t,a=function(){var e=t._readableState;y("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&d(t,"data")&&(e.flowing=!0,R(t))},l=(r.on("drain",a),!1);function u(e){y("ondata");e=r.write(e);y("dest.write",e),!1===e&&((1===i.pipesCount&&i.pipes===r||1<i.pipesCount&&-1!==M(i.pipes,r))&&!l&&(y("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function c(e){y("onerror",e),p(),r.removeListener("error",c),0===d(r,"error")&&b(r,e)}function h(){r.removeListener("finish",f),p()}function f(){y("onfinish"),r.removeListener("close",h),p()}function p(){y("unpipe"),n.unpipe(r)}return n.on("data",u),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(r,"error",c),r.once("close",h),r.once("finish",f),r.emit("pipe",n),i.flowing||(y("pipe resume"),n.resume()),r},w.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e=e||t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=M(t.pipes,e);return-1===s||(t.pipes.splice(s,1),--t.pipesCount,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},w.prototype.addListener=w.prototype.on=function(e,t){var t=i.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=0<this.listenerCount("readable"),!1!==r.flowing&&this.resume()):"readable"!==e||r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,y("on readable",r.length,r.reading),r.length?C(this):r.reading||j.nextTick(O,this)),t},w.prototype.removeListener=function(e,t){t=i.prototype.removeListener.call(this,e,t);return"readable"===e&&j.nextTick(I,this),t},w.prototype.removeAllListeners=function(e){var t=i.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||j.nextTick(I,this),t},w.prototype.resume=function(){var e,t,r=this._readableState;return r.flowing||(y("resume"),r.flowing=!r.readableListening,e=this,(t=r).resumeScheduled||(t.resumeScheduled=!0,j.nextTick(P,e,t))),r.paused=!1,this},w.prototype.pause=function(){return y("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(y("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},w.prototype.wrap=function(t){var e,r=this,n=this._readableState,i=!1;for(e in t.on("end",function(){var e;y("wrapped end"),n.decoder&&!n.ended&&(e=n.decoder.end())&&e.length&&r.push(e),r.push(null)}),t.on("data",function(e){y("wrapped data"),n.decoder&&(e=n.decoder.write(e)),n.objectMode&&null==e||(n.objectMode||e&&e.length)&&!r.push(e)&&(i=!0,t.pause())}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var o=0;o<m.length;o++)t.on(m[o],this.emit.bind(this,m[o]));return this._read=function(e){y("wrapped _read",e),i&&(i=!1,t.resume())},this},"function"==typeof Symbol&&(w.prototype[Symbol.asyncIterator]=function(){return(e=void 0===e?q("./internal/streams/async_iterator"):e)(this)}),Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(w.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(w.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),w._fromList=B,Object.defineProperty(w.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(w.from=function(e,t){return(r=void 0===r?q("./internal/streams/from"):r)(w,e,t)})}.call(this)}.call(this,q("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/async_iterator":61,"./internal/streams/buffer_list":62,"./internal/streams/destroy":63,"./internal/streams/from":65,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:5,events:10,inherits:12,"string_decoder/":75,util:4}],59:[function(e,t,r){"use strict";t.exports=l;var t=e("../errors").codes,n=t.ERR_METHOD_NOT_IMPLEMENTED,i=t.ERR_MULTIPLE_CALLBACK,o=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=t.ERR_TRANSFORM_WITH_LENGTH_0,a=e("./_stream_duplex");function l(e){if(!(this instanceof l))return new l(e);a.call(this,e),this._transformState={afterTransform:function(e,t){var r=this._transformState,n=(r.transforming=!1,r.writecb);if(null===n)return this.emit("error",new i);r.writechunk=null,(r.writecb=null)!=t&&this.push(t),n(e),(r=this._readableState).reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function u(){var r=this;"function"!=typeof this._flush||this._readableState.destroyed?c(this,null,null):this._flush(function(e,t){c(r,e,t)})}function c(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new s;if(e._transformState.transforming)throw new o;e.push(null)}e("inherits")(l,a),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new n("_transform()"))},l.prototype._write=function(e,t,r){var n=this._transformState;n.writecb=r,n.writechunk=e,n.writeencoding=t,n.transforming||(r=this._readableState,(n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark))},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){a.prototype._destroy.call(this,e,function(e){t(e)})}},{"../errors":55,"./_stream_duplex":56,inherits:12}],60:[function(O,P,e){!function(A,I){!function(){"use strict";function h(o){var s=this;this.next=null,this.entry=null,this.finish=function(){var e=s,t=o,r=void 0,n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}}(P.exports=_).WritableState=w;var r,e={deprecate:O("util-deprecate")},n=O("./internal/streams/stream"),f=O("buffer").Buffer,p=I.Uint8Array||function(){};var i,t=O("./internal/streams/destroy"),o=O("./internal/streams/state").getHighWaterMark,s=O("../errors").codes,d=s.ERR_INVALID_ARG_TYPE,a=s.ERR_METHOD_NOT_IMPLEMENTED,y=s.ERR_MULTIPLE_CALLBACK,l=s.ERR_STREAM_CANNOT_PIPE,u=s.ERR_STREAM_DESTROYED,g=s.ERR_STREAM_NULL_VALUES,b=s.ERR_STREAM_WRITE_AFTER_END,c=s.ERR_UNKNOWN_ENCODING,m=t.errorOrDestroy;function v(){}function w(e,c,t){r=r||O("./_stream_duplex"),"boolean"!=typeof t&&(t=c instanceof r),this.objectMode=!!(e=e||{}).objectMode,t&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=o(this,e,"writableHighWaterMark",t),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;t=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!t,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){var t=c,r=t._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new y;var o,s,a,l,u=r;u.writing=!1,u.writecb=null,u.length-=u.writelen,u.writelen=0,e?(u=t,s=n,a=e,l=i,--(o=r).pendingcb,s?(A.nextTick(l,a),A.nextTick(x,u,o),u._writableState.errorEmitted=!0,m(u,a)):(l(a),u._writableState.errorEmitted=!0,m(u,a),x(u,o))):((e=C(r)||t.destroyed)||r.corked||r.bufferProcessing||!r.bufferedRequest||E(t,r),n?A.nextTick(S,t,r,e,i):S(t,r,e,i))},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new h(this)}O("inherits")(_,n),w.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};try{Object.defineProperty(w.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}function _(e){var t=this instanceof(r=r||O("./_stream_duplex"));if(!t&&!i.call(_,this))return new _(e);this._writableState=new w(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),n.call(this)}function k(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new u("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function S(e,t,r,n){var i;r||(r=e,0===(i=t).length&&i.needDrain&&(i.needDrain=!1,r.emit("drain"))),t.pendingcb--,n(),x(e,t)}function E(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){for(var n=t.bufferedRequestCount,i=new Array(n),n=t.corkedRequestsFree,o=(n.entry=r,0),s=!0;r;)(i[o]=r).isBuf||(s=!1),r=r.next,o+=1;i.allBuffers=s,k(e,t,!0,t.length,i,"",n.finish),t.pendingcb++,t.lastBufferedRequest=null,n.next?(t.corkedRequestsFree=n.next,n.next=null):t.corkedRequestsFree=new h(t),t.bufferedRequestCount=0}else{for(;r;){var a=r.chunk,l=r.encoding,u=r.callback;if(k(e,t,!1,t.objectMode?1:a.length,a,l,u),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(t,r){t._final(function(e){r.pendingcb--,e&&m(t,e),r.prefinished=!0,t.emit("prefinish"),x(t,r)})}function x(e,t){var r,n,i=C(t);return i&&(r=e,(n=t).prefinished||n.finalCalled||("function"!=typeof r._final||n.destroyed?(n.prefinished=!0,r.emit("prefinish")):(n.pendingcb++,n.finalCalled=!0,A.nextTick(T,r,n))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy&&(!(r=e._readableState)||r.autoDestroy&&r.endEmitted)&&e.destroy())),i}"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(i=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(e){return!!i.call(this,e)||this===_&&(e&&e._writableState instanceof w)}})):i=function(e){return e instanceof this},_.prototype.pipe=function(){m(this,new l)},_.prototype.write=function(e,t,r){var n,i,o,s,a,l,u=this._writableState,c=!1,h=!u.objectMode&&(h=e,f.isBuffer(h)||h instanceof p);return h&&!f.isBuffer(e)&&(s=e,e=f.from(s)),"function"==typeof t&&(r=t,t=null),t=h?"buffer":t||u.defaultEncoding,"function"!=typeof r&&(r=v),u.ending?(s=this,a=r,l=new b,m(s,l),A.nextTick(a,l)):!h&&(a=this,l=u,i=r,null===(n=e)?o=new g:"string"==typeof n||l.objectMode||(o=new d("chunk",["string","Buffer"],n)),o&&(m(a,o),!void A.nextTick(i,o)))||(u.pendingcb++,c=function(e,t,r,n,i,o){r||(s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,r));return t}(t,n,i),n!==s&&(r=!0,i="buffer",n=s));var s=t.objectMode?1:n.length,a=(t.length+=s,t.length<t.highWaterMark);a||(t.needDrain=!0);{var l;t.writing||t.corked?(l=t.lastBufferedRequest,t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1):k(e,t,!1,s,n,i,o)}return a}(this,u,h,e,t,r)),c},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||E(this,e))},_.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase()))return this._writableState.defaultEncoding=e,this;throw new c(e)},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(e,t,r){r(new a("_write()"))},_.prototype._writev=null,_.prototype.end=function(e,t,r){var n=this._writableState;if("function"==typeof e?(r=e,t=e=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending){e=this,t=n,n=r;t.ending=!0,x(e,t),n&&(t.finished?A.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}return this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),_.prototype.destroy=t.destroy,_.prototype._undestroy=t.undestroy,_.prototype._destroy=function(e,t){t(e)}}.call(this)}.call(this,O("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/destroy":63,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:5,inherits:12,"util-deprecate":78}],61:[function(n,g,e){!function(y){!function(){"use strict";var e;function r(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}var i=n("./end-of-stream"),o=Symbol("lastResolve"),s=Symbol("lastReject"),a=Symbol("error"),l=Symbol("ended"),u=Symbol("lastPromise"),c=Symbol("handlePromise"),h=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t,r=e[o];null!==r&&null!==(t=e[h].read())&&(e[u]=null,e[o]=null,e[s]=null,r(f(t,!1)))}var t=Object.getPrototypeOf(function(){}),d=Object.setPrototypeOf((r(e={get stream(){return this[h]},next:function(){var r=this,e=this[a];if(null!==e)return Promise.reject(e);if(this[l])return Promise.resolve(f(void 0,!0));if(this[h].destroyed)return new Promise(function(e,t){y.nextTick(function(){r[a]?t(r[a]):e(f(void 0,!0))})});var t,n,i,e=this[u];if(e)t=new Promise((n=e,i=this,function(e,t){n.then(function(){i[l]?e(f(void 0,!0)):i[c](e,t)},t)}));else{e=this[h].read();if(null!==e)return Promise.resolve(f(e,!1));t=new Promise(this[c])}return this[u]=t}},Symbol.asyncIterator,function(){return this}),r(e,"return",function(){var e=this;return new Promise(function(t,r){e[h].destroy(null,function(e){e?r(e):t(f(void 0,!0))})})}),e),t);g.exports=function(e){var t,n=Object.create(d,(r(t={},h,{value:e,writable:!0}),r(t,o,{value:null,writable:!0}),r(t,s,{value:null,writable:!0}),r(t,a,{value:null,writable:!0}),r(t,l,{value:e._readableState.endEmitted,writable:!0}),r(t,c,{value:function(e,t){var r=n[h].read();r?(n[u]=null,n[o]=null,n[s]=null,e(f(r,!1))):(n[o]=e,n[s]=t)},writable:!0}),t));return n[u]=null,i(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code)return null!==(t=n[s])&&(n[u]=null,n[o]=null,n[s]=null,t(e)),void(n[a]=e);var t=n[o];null!==t&&(n[u]=null,n[o]=null,t(f(void 0,!(n[s]=null)))),n[l]=!0}),e.on("readable",function(e){y.nextTick(p,e)}.bind(null,n)),n}}.call(this)}.call(this,n("_process"))},{"./end-of-stream":64,_process:50}],62:[function(e,t,r){"use strict";function o(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function i(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach(function(e){var t,r;t=n,r=i[e=e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=e("buffer").Buffer,l=e("util").inspect,u=l&&l.custom||"inspect";t.exports=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.head=null,this.tail=null,this.length=0}var t,r,n;return t=e,(r=[{key:"push",value:function(e){e={data:e,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(e){e={data:e,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){var e;if(0!==this.length)return e=this.head.data,1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t,r,n=a.allocUnsafe(e>>>0),i=this.head,o=0;i;)t=i.data,r=o,a.prototype.copy.call(t,n,r),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0===(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t).data=i.slice(o);break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0===(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r).data=i.slice(o);break}++n}return this.length-=n,t}},{key:u,value:function(e,t){return l(this,i({},t,{depth:0,customInspect:!1}))}}])&&s(t.prototype,r),n&&s(t,n),e}()},{buffer:5,util:4}],63:[function(e,t,r){!function(l){!function(){"use strict";function o(e,t){a(e,t),s(e)}function s(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function a(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,l.nextTick(a,this,e)):l.nextTick(a,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?r._writableState?r._writableState.errorEmitted?l.nextTick(s,r):(r._writableState.errorEmitted=!0,l.nextTick(o,r,e)):l.nextTick(o,r,e):t?(l.nextTick(s,r),t(e)):l.nextTick(s,r)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}.call(this)}.call(this,e("_process"))},{_process:50}],64:[function(e,t,r){"use strict";var b=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function m(){}t.exports=function e(t,r,n){if("function"==typeof r)return e(t,null,r);function i(){t.writable||o()}function o(){y=!(d=!1),p||n.call(t)}function s(){g=!(p=!1),d||n.call(t)}function a(e){n.call(t,e)}function l(){var e;return p&&!g?(t._readableState&&t._readableState.ended||(e=new b),n.call(t,e)):d&&!y?(t._writableState&&t._writableState.ended||(e=new b),n.call(t,e)):void 0}function u(){t.req.on("finish",o)}c=n||m,h=!1,n=function(){if(!h){h=!0;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];c.apply(this,t)}};var c,h,f,p=(r=r||{}).readable||!1!==r.readable&&t.readable,d=r.writable||!1!==r.writable&&t.writable,y=t._writableState&&t._writableState.finished,g=t._readableState&&t._readableState.endEmitted;return(f=t).setHeader&&"function"==typeof f.abort?(t.on("complete",o),t.on("abort",l),t.req?u():t.on("request",u)):d&&!t._writableState&&(t.on("end",i),t.on("close",i)),t.on("end",s),t.on("finish",o),!1!==r.error&&t.on("error",a),t.on("close",l),function(){t.removeListener("complete",o),t.removeListener("abort",l),t.removeListener("request",u),t.req&&t.req.removeListener("finish",o),t.removeListener("end",i),t.removeListener("close",i),t.removeListener("finish",o),t.removeListener("end",s),t.removeListener("error",a),t.removeListener("close",l)}}},{"../../../errors":55}],65:[function(e,t,r){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],66:[function(l,e,t){"use strict";var u;var r=l("../../../errors").codes,a=r.ERR_MISSING_ARGS,c=r.ERR_STREAM_DESTROYED;function h(e){if(e)throw e}function f(r,e,t,n){i=n,o=!1;var i,o,s=!(n=function(){o||(o=!0,i.apply(void 0,arguments))}),a=(r.on("close",function(){s=!0}),(u=void 0===u?l("./end-of-stream"):u)(r,{readable:e,writable:t},function(e){if(e)return n(e);s=!0,n()}),!1);return function(e){var t;if(!s&&!a)return a=!0,(t=r).setHeader&&"function"==typeof t.abort?r.abort():"function"==typeof r.destroy?r.destroy():void n(e||new c("pipe"))}}function p(e){e()}function d(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var r,i,o=!(r=n).length||"function"!=typeof r[r.length-1]?h:r.pop();if((n=Array.isArray(n[0])?n[0]:n).length<2)throw new a("streams");var s=n.map(function(e,t){var r=t<n.length-1;return f(e,r,0<t,function(e){i=i||e,e&&s.forEach(p),r||(s.forEach(p),o(i))})});return n.reduce(d)}},{"../../../errors":55,"./end-of-stream":64}],67:[function(e,t,r){"use strict";var s=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,r,n){o=n,i=r;var i,o=null!=(t=t).highWaterMark?t.highWaterMark:o?t[i]:null;if(null==o)return e.objectMode?16:16384;if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new s(n?r:"highWaterMark",o);return Math.floor(o)}}},{"../../../errors":55}],68:[function(e,t,r){t.exports=e("events").EventEmitter},{events:10}],69:[function(e,t,r){(((r=t.exports=e("./lib/_stream_readable.js")).Stream=r).Readable=r).Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),r.finished=e("./lib/internal/streams/end-of-stream.js"),r.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":56,"./lib/_stream_passthrough.js":57,"./lib/_stream_readable.js":58,"./lib/_stream_transform.js":59,"./lib/_stream_writable.js":60,"./lib/internal/streams/end-of-stream.js":64,"./lib/internal/streams/pipeline.js":66}],70:[function(e,t,r){"use strict";function n(e,t,r){var n=this;this._callback=e,this._args=r,this._interval=setInterval(e,t,this._args),this.reschedule=function(e){e=e||n._interval,n._interval&&clearInterval(n._interval),n._interval=setInterval(n._callback,e,n._args)},this.clear=function(){n._interval&&(clearInterval(n._interval),n._interval=void 0)},this.destroy=function(){n._interval&&clearInterval(n._interval),n._callback=void 0,n._interval=void 0,n._args=void 0}}t.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");if(0<arguments.length)for(var e=new Array(arguments.length-2),t=0;t<e.length;t++)e[t]=arguments[t+2];return new n(arguments[0],arguments[1],e)}},{}],71:[function(e,t,r){"use strict";t.exports=e("./index.js")()},{"./index.js":72}],72:[function(e,r,t){!function(t){!function(){"use strict";function c(e){return e instanceof t?t.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}r.exports=function(e){var l,u;{return(e=e||{}).circles?(l=[],u=[],e.proto?function e(t){if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return s(t,e);if(t instanceof Map)return new Map(s(Array.from(t),e));if(t instanceof Set)return new Set(s(Array.from(t),e));var r={};l.push(t);u.push(r);for(var n in t){var i,o=t[n];"object"!=typeof o||null===o?r[n]=o:o instanceof Date?r[n]=new Date(o):o instanceof Map?r[n]=new Map(s(Array.from(o),e)):o instanceof Set?r[n]=new Set(s(Array.from(o),e)):ArrayBuffer.isView(o)?r[n]=c(o):(i=l.indexOf(o),r[n]=-1!==i?u[i]:e(o))}l.pop();u.pop();return r}:function e(t){if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return s(t,e);if(t instanceof Map)return new Map(s(Array.from(t),e));if(t instanceof Set)return new Set(s(Array.from(t),e));var r={};l.push(t);u.push(r);for(var n in t){var i,o;!1!==Object.hasOwnProperty.call(t,n)&&("object"!=typeof(i=t[n])||null===i?r[n]=i:i instanceof Date?r[n]=new Date(i):i instanceof Map?r[n]=new Map(s(Array.from(i),e)):i instanceof Set?r[n]=new Set(s(Array.from(i),e)):ArrayBuffer.isView(i)?r[n]=c(i):(o=l.indexOf(i),r[n]=-1!==o?u[o]:e(i)))}l.pop();u.pop();return r}):e.proto?function e(t){if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return o(t,e);if(t instanceof Map)return new Map(o(Array.from(t),e));if(t instanceof Set)return new Set(o(Array.from(t),e));var r={};for(var n in t){var i=t[n];"object"!=typeof i||null===i?r[n]=i:i instanceof Date?r[n]=new Date(i):i instanceof Map?r[n]=new Map(o(Array.from(i),e)):i instanceof Set?r[n]=new Set(o(Array.from(i),e)):ArrayBuffer.isView(i)?r[n]=c(i):r[n]=e(i)}return r}:function e(t){if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return o(t,e);if(t instanceof Map)return new Map(o(Array.from(t),e));if(t instanceof Set)return new Set(o(Array.from(t),e));var r={};for(var n in t){var i;!1!==Object.hasOwnProperty.call(t,n)&&("object"!=typeof(i=t[n])||null===i?r[n]=i:i instanceof Date?r[n]=new Date(i):i instanceof Map?r[n]=new Map(o(Array.from(i),e)):i instanceof Set?r[n]=new Set(o(Array.from(i),e)):ArrayBuffer.isView(i)?r[n]=c(i):r[n]=e(i))}return r};function s(e,t){for(var r=Object.keys(e),n=new Array(r.length),i=0;i<r.length;i++){var o,s=r[i],a=e[s];"object"!=typeof a||null===a?n[s]=a:a instanceof Date?n[s]=new Date(a):ArrayBuffer.isView(a)?n[s]=c(a):(o=l.indexOf(a),n[s]=-1!==o?u[o]:t(a))}return n}}function o(e,t){for(var r=Object.keys(e),n=new Array(r.length),i=0;i<r.length;i++){var o=r[i],s=e[o];"object"!=typeof s||null===s?n[o]=s:s instanceof Date?n[o]=new Date(s):ArrayBuffer.isView(s)?n[o]=c(s):n[o]=t(s)}return n}}}.call(this)}.call(this,e("buffer").Buffer)},{buffer:5}],73:[function(e,t,r){var n=e("buffer"),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,r),r.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");e=i(e);return void 0!==t?"string"==typeof r?e.fill(t,r):e.fill(t):e.fill(0),e},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},{buffer:5}],74:[function(e,t,r){t.exports=function(e){var t=e._readableState;return t?t.objectMode||"number"==typeof e._duplexState?e.read():e.read(function(e){if(e.buffer.length)return(e.buffer.head?e.buffer.head.data:e.buffer[0]).length;return e.length}(t)):null}},{}],75:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"==typeof t||n.isEncoding!==i&&i(e))return t||e;throw new Error("Unknown encoding: "+e)}function s(e){var t;switch(this.encoding=o(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=l,t=4;break;case"base64":this.text=h,this.end=f,t=3;break;default:return this.write=p,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function l(e){var t,r=this.lastTotal-this.lastNeed,n=(t=this,128!=(192&(n=e)[0])?(t.lastNeed=0,""):1<t.lastNeed&&1<n.length?128!=(192&n[1])?(t.lastNeed=1,""):2<t.lastNeed&&2<n.length&&128!=(192&n[2])?(t.lastNeed=2,""):void 0:void 0);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,r,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);t=e.toString("utf16le",t);if(t){var r=t.charCodeAt(t.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}function c(e){var t,e=e&&e.length?this.write(e):"";return this.lastNeed?(t=this.lastTotal-this.lastNeed,e+this.lastChar.toString("utf16le",0,t)):e}function h(e,t){var r=(e.length-t)%3;return 0==r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function f(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}(r.StringDecoder=s).prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=function(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+"":e},s.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=a(t[n]);if(0<=i)return 0<i&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if(0<=(i=a(t[n])))return 0<i&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if(0<=(i=a(t[n])))return 0<i&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;r=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":73}],76:[function(e,t,r){"use strict";var S=e("punycode"),E=e("./util");function _(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}r.parse=i,r.resolve=function(e,t){return i(e,!1,!0).resolve(t)},r.resolveObject=function(e,t){return e?i(e,!1,!0).resolveObject(t):t},r.format=function(e){E.isString(e)&&(e=i(e));return e instanceof _?e.format():_.prototype.format.call(e)},r.Url=_;var C=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,T=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,r=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),x=["'"].concat(r),A=["%","/","?",";","#"].concat(x),I=["/","?","#"],O=/^[+a-z0-9A-Z_-]{0,63}$/,P=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,R={javascript:!0,"javascript:":!0},B={javascript:!0,"javascript:":!0},N={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},M=e("querystring");function i(e,t,r){if(e&&E.isObject(e)&&e instanceof _)return e;var n=new _;return n.parse(e,t,r),n}_.prototype.parse=function(e,t,r){if(!E.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),n=-1!==n&&n<e.indexOf("#")?"?":"#",i=e.split(n);i[0]=i[0].replace(/\\/g,"/");var o=(o=e=i.join(n)).trim();if(!r&&1===e.split("#").length){i=T.exec(o);if(i)return this.path=o,this.href=o,this.pathname=i[1],i[2]?(this.search=i[2],this.query=t?M.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var s,n=C.exec(o);if(n&&(s=(n=n[0]).toLowerCase(),this.protocol=s,o=o.substr(n.length)),!(r||n||o.match(/^\/\/[^@\/]+@[^@\/]+/))||!(w="//"===o.substr(0,2))||n&&B[n]||(o=o.substr(2),this.slashes=!0),!B[n]&&(w||n&&!N[n])){for(var a=-1,l=0;l<I.length;l++)-1!==(u=o.indexOf(I[l]))&&(-1===a||u<a)&&(a=u);-1!==(e=-1===a?o.lastIndexOf("@"):o.lastIndexOf("@",a))&&(i=o.slice(0,e),o=o.slice(e+1),this.auth=decodeURIComponent(i));for(var u,a=-1,l=0;l<A.length;l++)-1!==(u=o.indexOf(A[l]))&&(-1===a||u<a)&&(a=u);-1===a&&(a=o.length),this.host=o.slice(0,a),o=o.slice(a),this.parseHost(),this.hostname=this.hostname||"";r="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!r)for(var c=this.hostname.split(/\./),l=0,h=c.length;l<h;l++){var f=c[l];if(f&&!f.match(O)){for(var p="",d=0,y=f.length;d<y;d++)127<f.charCodeAt(d)?p+="x":p+=f[d];if(!p.match(O)){var g=c.slice(0,l),b=c.slice(l+1),m=f.match(P);m&&(g.push(m[1]),b.unshift(m[2])),b.length&&(o="/"+b.join(".")+o),this.hostname=g.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),r||(this.hostname=S.toASCII(this.hostname));var v=this.port?":"+this.port:"",w=this.hostname||"";this.host=w+v,this.href+=this.host,r&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!R[s])for(l=0,h=x.length;l<h;l++){var _,k=x[l];-1!==o.indexOf(k)&&((_=encodeURIComponent(k))===k&&(_=escape(k)),o=o.split(k).join(_))}n=o.indexOf("#"),-1!==n&&(this.hash=o.substr(n),o=o.slice(0,n)),e=o.indexOf("?");return-1!==e?(this.search=o.substr(e),this.query=o.substr(e+1),t&&(this.query=M.parse(this.query)),o=o.slice(0,e)):t&&(this.search="",this.query={}),o&&(this.pathname=o),N[s]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(v=this.pathname||"",i=this.search||"",this.path=v+i),this.href=this.format(),this},_.prototype.format=function(){var e=this.auth||"",t=(e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@"),this.protocol||""),r=this.pathname||"",n=this.hash||"",i=!1,o="",e=(this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&E.isObject(this.query)&&Object.keys(this.query).length&&(o=M.stringify(this.query)),this.search||o&&"?"+o||"");return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||N[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i=i||"",n&&"#"!==n.charAt(0)&&(n="#"+n),e&&"?"!==e.charAt(0)&&(e="?"+e),t+i+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(e=e.replace("#","%23"))+n},_.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},_.prototype.resolveObject=function(e){E.isString(e)&&((f=new _).parse(e,!1,!0),e=f);for(var t=new _,r=Object.keys(this),n=0;n<r.length;n++){var i=r[n];t[i]=this[i]}if(t.hash=e.hash,""===e.href)return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),s=0;s<o.length;s++){var a=o[s];"protocol"!==a&&(t[a]=e[a])}return N[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!N[e.protocol]){for(var l=Object.keys(e),u=0;u<l.length;u++){var c=l[u];t[c]=e[c]}return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||B[e.protocol])t.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),t.pathname=h.join("/")}return t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,(t.pathname||t.search)&&(f=t.pathname||"",p=t.search||"",t.path=f+p),t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var f=t.pathname&&"/"===t.pathname.charAt(0),p=e.host||e.pathname&&"/"===e.pathname.charAt(0),f=p||f||t.host&&e.pathname,d=f,y=t.pathname&&t.pathname.split("/")||[],h=e.pathname&&e.pathname.split("/")||[],g=t.protocol&&!N[t.protocol];if(g&&(t.hostname="",t.port=null,t.host&&(""===y[0]?y[0]=t.host:y.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),f=f&&(""===h[0]||""===y[0])),p)t.host=(e.host||""===e.host?e:t).host,t.hostname=(e.hostname||""===e.hostname?e:t).hostname,t.search=e.search,t.query=e.query,y=h;else if(h.length)(y=y||[]).pop(),y=y.concat(h),t.search=e.search,t.query=e.query;else if(!E.isNullOrUndefined(e.search))return g&&(t.hostname=t.host=y.shift(),(w=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=w.shift(),t.host=t.hostname=w.shift())),t.search=e.search,t.query=e.query,E.isNull(t.pathname)&&E.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.href=t.format(),t;if(!y.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var b=y.slice(-1)[0],p=(t.host||e.host||1<y.length)&&("."===b||".."===b)||""===b,m=0,v=y.length;0<=v;v--)"."===(b=y[v])?y.splice(v,1):".."===b?(y.splice(v,1),m++):m&&(y.splice(v,1),m--);if(!f&&!d)for(;m--;)y.unshift("..");!f||""===y[0]||y[0]&&"/"===y[0].charAt(0)||y.unshift(""),p&&"/"!==y.join("/").substr(-1)&&y.push("");var w,d=""===y[0]||y[0]&&"/"===y[0].charAt(0);return g&&(t.hostname=t.host=!d&&y.length?y.shift():"",(w=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=w.shift(),t.host=t.hostname=w.shift())),(f=f||t.host&&y.length)&&!d&&y.unshift(""),y.length?t.pathname=y.join("/"):(t.pathname=null,t.path=null),E.isNull(t.pathname)&&E.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t},_.prototype.parseHost=function(){var e=this.host,t=n.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":77,punycode:51,querystring:54}],77:[function(e,t,r){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],78:[function(e,r,t){!function(t){!function(){function n(e){try{if(!t.localStorage)return}catch(e){return}e=t.localStorage[e];return null!=e&&"true"===String(e).toLowerCase()}r.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation"),r=!0}return e.apply(this,arguments)}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],79:[function(e,t,r){t.exports=function e(i,t){if(i&&t)return e(i)(t);if("function"!=typeof i)throw new TypeError("need wrapper function");Object.keys(i).forEach(function(e){r[e]=i[e]});return r;function r(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];var r=i.apply(this,e),n=e[e.length-1];return"function"==typeof r&&r!==n&&Object.keys(n).forEach(function(e){r[e]=n[e]}),r}}},{}],80:[function(e,t,r){"use strict";t.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],81:[function(e,t,r){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r,n=arguments[t];for(r in n)i.call(n,r)&&(e[r]=n[r])}return e};var i=Object.prototype.hasOwnProperty},{}],82:[function(e,t,r){"use strict";t.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},{}],83:[function(e,t,r){"use strict";function o(e){var t=this;if((t=t instanceof o?t:new o).tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(0<arguments.length)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}function s(e,t,r,n){if(!(this instanceof s))return new s(e,t,r,n);this.list=n,this.value=e,t?(t.next=this).prev=t:this.prev=null,r?(r.prev=this).next=r:this.next=null}(t.exports=o).Node=s,(o.create=o).prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},o.prototype.unshiftNode=function(e){var t;e!==this.head&&(e.list&&e.list.removeNode(e),t=this.head,e.list=this,(e.next=t)&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++)},o.prototype.pushNode=function(e){var t;e!==this.tail&&(e.list&&e.list.removeNode(e),t=this.tail,e.list=this,(e.prev=t)&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++)},o.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++){n=r=void 0;var r=this,n=arguments[e];r.tail=new s(n,r.tail,null,r),r.head||(r.head=r.tail),r.length++}return this.length},o.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++){n=r=void 0;var r=this,n=arguments[e];r.head=new s(n,null,r.head,r),r.tail||(r.tail=r.head),r.length++}return this.length},o.prototype.pop=function(){var e;if(this.tail)return e=this.tail.value,this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e},o.prototype.shift=function(){var e;if(this.head)return e=this.head.value,this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e},o.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},o.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},o.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},o.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},o.prototype.map=function(e,t){t=t||this;for(var r=new o,n=this.head;null!==n;)r.push(e.call(t,n.value,this)),n=n.next;return r},o.prototype.mapReverse=function(e,t){t=t||this;for(var r=new o,n=this.tail;null!==n;)r.push(e.call(t,n.value,this)),n=n.prev;return r},o.prototype.reduce=function(e,t){var r,n=this.head;if(1<arguments.length)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var i=0;null!==n;i++)r=e(r,n.value,i),n=n.next;return r},o.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(1<arguments.length)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var i=this.length-1;null!==n;i--)r=e(r,n.value,i),n=n.prev;return r},o.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},o.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},o.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new o;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;for(;null!==i&&n<t;n++,i=i.next)r.push(i.value);return r},o.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new o;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,i=this.tail;null!==i&&t<n;n--)i=i.prev;for(;null!==i&&e<n;n--,i=i.prev)r.push(i.value);return r},o.prototype.splice=function(e,t,...r){(e=e>this.length?this.length-1:e)<0&&(e=this.length+e);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;for(var o=[],n=0;i&&n<t;n++)o.push(i.value),i=this.removeNode(i);(i=null===i?this.tail:i)!==this.head&&i!==this.tail&&(i=i.prev);for(n=0;n<r.length;n++)i=function(e,t,r){r=t===e.head?new s(r,null,t,e):new s(r,t,t.next,e);null===r.next&&(e.tail=r);null===r.prev&&(e.head=r);return e.length++,r}(this,i,r[n]);return o},o.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{e("./iterator.js")(o)}catch(e){}},{"./iterator.js":82}],emitter:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=e("mqtt"),n=(i.prototype.connect=function(e,t){var r,n=this,i=(null==(e=e||{}).secure&&("undefined"!=typeof window&&null!=window&&null!=window.location&&null!=window.location.protocol?e.secure="https:"==window.location.protocol:e.secure=!1),{host:"api.emitter.io",port:e.secure?443:8080,keepalive:30,secure:!1});for(r in i)e[r]=(void 0===e[r]?i:e)[r];e.host=e.host.replace(/.*?:\/\//g,"");var o=(e.secure?"wss://":"ws://")+e.host+":"+e.port;return this._callbacks={connect:[t]},this._mqtt=s.connect(o,e),this._mqtt.on(a.connect,function(){return n._tryInvoke(a.connect,n)}),this._mqtt.on("close",function(){return n._tryInvoke(a.disconnect,n)}),this._mqtt.on("offline",function(){return n._tryInvoke(a.offline,n)}),this._mqtt.on("error",function(e){return n._tryInvoke(a.error,e)}),this._mqtt.on("message",function(e,t,r){r=new l(r);n._startsWith(r.channel,"emitter/keygen")?n._tryInvoke(a.keygen,r.asObject()):n._startsWith(r.channel,"emitter/presence")?n._tryInvoke(a.presence,r.asObject()):n._startsWith(r.channel,"emitter/me")?n._tryInvoke(a.me,r.asObject()):n._tryInvoke(a.message,r)}),this},i.prototype.disconnect=function(){return this._mqtt.end(),this},i.prototype.publish=function(e){"string"!=typeof e.key&&this._throwError("emitter.publish: request object does not contain a 'key' string."),"string"!=typeof e.channel&&this._throwError("emitter.publish: request object does not contain a 'channel' string."),"object"!=typeof e.message&&"string"!=typeof e.message&&this._throwError("emitter.publish: request object does not contain a 'message' object.");var t=new Array,t=(null==e.me||1==e.me?t.push({key:"me",value:"1"}):t.push({key:"me",value:"0"}),e.ttl&&t.push({key:"ttl",value:e.ttl.toString()}),this._formatChannel(e.key,e.channel,t));return this._mqtt.publish(t,e.message),this},i.prototype.publishWithLink=function(e){return"string"!=typeof e.link&&this._throwError("emitter.publishWithLink: request object does not contain a 'link' string."),"object"!=typeof e.message&&"string"!=typeof e.message&&this._throwError("emitter.publishWithLink: request object does not contain a 'message' object."),this._mqtt.publish(e.link,e.message),this},i.prototype.subscribe=function(e){"string"!=typeof e.key&&this._throwError("emitter.subscribe: request object does not contain a 'key' string."),"string"!=typeof e.channel&&this._throwError("emitter.subscribe: request object does not contain a 'channel' string.");var t=new Array,e=(null!=e.last&&t.push({key:"last",value:e.last.toString()}),this._formatChannel(e.key,e.channel,t));return this._mqtt.subscribe(e),this},i.prototype.link=function(e){"string"!=typeof e.key&&this._throwError("emitter.link: request object does not contain a 'key' string."),"string"!=typeof e.channel&&this._throwError("emitter.link: request object does not contain a 'channel' string."),"string"!=typeof e.name&&this._throwError("emitter.link: request object does not contain a 'name' string."),"boolean"!=typeof e.private&&this._throwError("emitter.link: request object does not contain 'private'."),"boolean"!=typeof e.subscribe&&this._throwError("emitter.link: request object does not contain 'subscribe'.");var t=new Array,t=(null==e.me||1==e.me?t.push({key:"me",value:"1"}):t.push({key:"me",value:"0"}),null!=e.ttl&&t.push({key:"ttl",value:e.ttl.toString()}),this._formatChannel(null,e.channel,t));return e={key:e.key,channel:t,name:e.name,private:e.private,subscribe:e.subscribe},this._mqtt.publish("emitter/link/",JSON.stringify(e)),this},i.prototype.unsubscribe=function(e){"string"!=typeof e.key&&this._throwError("emitter.unsubscribe: request object does not contain a 'key' string."),"string"!=typeof e.channel&&this._throwError("emitter.unsubscribe: request object does not contain a 'channel' string.");e=this._formatChannel(e.key,e.channel,[]);return this._mqtt.unsubscribe(e),this},i.prototype.keygen=function(e){return"string"!=typeof e.key&&this._throwError("emitter.keygen: request object does not contain a 'key' string."),"string"!=typeof e.channel&&this._throwError("emitter.keygen: request object does not contain a 'channel' string."),this._mqtt.publish("emitter/keygen/",JSON.stringify(e)),this},i.prototype.presence=function(e){return"string"!=typeof e.key&&this._throwError("emitter.presence: request object does not contain a 'key' string."),"string"!=typeof e.channel&&this._throwError("emitter.presence: request object does not contain a 'channel' string."),this._mqtt.publish("emitter/presence/",JSON.stringify(e)),this},i.prototype.me=function(){return this._mqtt.publish("emitter/me/",""),this},i.prototype.on=function(e,t){return this._checkEvent("off",e),this._callbacks||this._throwError("emitter.on: called before connecting"),this._callbacks[e]||(this._callbacks[e]=[]),-1===this._callbacks[e].indexOf(t)&&this._callbacks[e].push(t),this},i.prototype.off=function(e,t){this._checkEvent("off",e),this._callbacks||this._throwError("emitter.off: called before connecting");e=this._callbacks[e];return e&&0<=(t=e.indexOf(t))&&e.splice(t,1),this},i.prototype._checkEvent=function(e,t){var r;a[t]||(t=(r=Object.keys(a)).map(function(e,t){return(t===r.length-1?"or ":"")+"'"+e+"'"}).join(", "),this._throwError("emitter."+e+": unknown event type, supported values are "+t+"."))},i.prototype._tryInvoke=function(e,t){e=this._callbacks[e];e&&e.filter(function(e){return e}).forEach(function(e){return e(t)})},i.prototype._formatChannel=function(e,t,r){var n=t;if(e&&0<e.length&&(n=this._endsWith(e,"/")?e+t:e+"/"+t),this._endsWith(n,"/")||(n+="/"),null!=r&&0<r.length){n+="?";for(var i=0;i<r.length;++i)n+=r[i].key+"="+r[i].value,i+1<r.length&&(n+="&")}return n},i.prototype._startsWith=function(e,t){return e.slice(0,t.length)==t},i.prototype._endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},i.prototype._throwError=function(e){throw new Error(e)},i);function i(){}r.Emitter=n;o.prototype.asString=function(){return this.binary.toString()},o.prototype.asBinary=function(){return this.binary},o.prototype.asObject=function(){var e={};try{e=JSON.parse(this.asString())}catch(e){}return e};var a,l=o;function o(e){this.channel=e.topic,this.binary=e.payload}r.EmitterMessage=l,(e=a=r.EmitterEvents||(r.EmitterEvents={})).connect="connect",e.disconnect="disconnect",e.message="message",e.offline="offline",e.error="error",e.keygen="keygen",e.presence="presence",e.me="me",r.connect=function(e,t){var r=new n;return r.connect(e,t),r}},{mqtt:35}]},{},[]))("emitter");